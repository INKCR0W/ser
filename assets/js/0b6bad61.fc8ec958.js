"use strict";(self.webpackChunkser=self.webpackChunkser||[]).push([[7945],{8838:(t,e,n)=>{n.r(e),n.d(e,{assets:()=>u,contentTitle:()=>s,default:()=>l,frontMatter:()=>o,metadata:()=>r,toc:()=>d});var i=n(4848),a=n(8453);const o={sidebar_position:14},s=void 0,r={id:"\u4e8c\u3001\u670d\u52a1\u5668\u6a21\u5757/\u56db\u3001Linux\u4e91\u670d\u52a1\u914d\u7f6e/14\u3001\u78c1\u76d8\u914d\u989d \u221a",title:"14\u3001\u78c1\u76d8\u914d\u989d \u221a",description:"\u9898\u76ee",source:"@site/docs/\u4e8c\u3001\u670d\u52a1\u5668\u6a21\u5757/\u56db\u3001Linux\u4e91\u670d\u52a1\u914d\u7f6e/14\u3001\u78c1\u76d8\u914d\u989d \u221a.md",sourceDirName:"\u4e8c\u3001\u670d\u52a1\u5668\u6a21\u5757/\u56db\u3001Linux\u4e91\u670d\u52a1\u914d\u7f6e",slug:"/\u4e8c\u3001\u670d\u52a1\u5668\u6a21\u5757/\u56db\u3001Linux\u4e91\u670d\u52a1\u914d\u7f6e/14\u3001\u78c1\u76d8\u914d\u989d \u221a",permalink:"/docs/\u4e8c\u3001\u670d\u52a1\u5668\u6a21\u5757/\u56db\u3001Linux\u4e91\u670d\u52a1\u914d\u7f6e/14\u3001\u78c1\u76d8\u914d\u989d \u221a",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:14,frontMatter:{sidebar_position:14},sidebar:"tutorialSidebar",previous:{title:"13\u3001podman\u670d\u52a1-arm \u221a",permalink:"/docs/\u4e8c\u3001\u670d\u52a1\u5668\u6a21\u5757/\u56db\u3001Linux\u4e91\u670d\u52a1\u914d\u7f6e/13\u3001podman\u670d\u52a1-arm \u221a"},next:{title:"15\u3001ftp\u670d\u52a1 \u221a",permalink:"/docs/\u4e8c\u3001\u670d\u52a1\u5668\u6a21\u5757/\u56db\u3001Linux\u4e91\u670d\u52a1\u914d\u7f6e/15\u3001ftp\u670d\u52a1 \u221a"}},u={},d=[{value:"\u9898\u76ee",id:"\u9898\u76ee",level:2}];function c(t){const e={br:"br",h2:"h2",img:"img",p:"p",strong:"strong",...(0,a.R)(),...t.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e.h2,{id:"\u9898\u76ee",children:"\u9898\u76ee"}),"\n",(0,i.jsx)(e.p,{children:"(1)\u5728Linux6\u4e3b\u673a\u4e0a\u6dfb\u52a01\u575720G\u786c\u76d8\uff0c\u786c\u76d8\u6587\u4ef6\u4e3a1inux6-1.qcow2\uff0c\u4fdd\u5b58\u5728\u6839\u7528\u6237\u5bb6\u76ee\u5f55\uff0c\u5e76\u683c\u5f0f\u5316\u4e3aext4\u6587\u4ef6\u7cfb\u7edf\uff0c\u5e76\u5f00\u673a\u81ea\u52a8\u6302\u8f7d\u5230/data/quota\u76ee\u5f55\u4e0b\u3002\n(2)\u57281inux6\u4e0a\u521b\u5efa qu01-qu03\u7b493\u4e2a\u7528\u6237\uff0c\u7528\u6237\u5bc6\u7801\u4e0e\u7528\u6237\u540d\u76f8\u540c\u3002\n(3)\u5728/data/quota\u7684\u5b58\u50a8\u914d\u989d : root\u7528\u6237\u786c\u9650\u523610G\uff0cqu01\u3001qu02\u90fd\u914d\u7f6e\u8f6f\u9650\u5236500MB\u3001\u786c\u9650\u52361000MB\u3002\n(4)\u5f53\u7528\u6237qu01\u57281inux6\u767b\u5f55\u65f6\uff0c\u7cfb\u7edf\u81ea\u52a8\u663e\u793a\u5f53\u524d\u7528\u6237\u78c1\u76d8\u914d\u989d\u4f7f\u7528\u60c5\u51b5\u3002\n(5)\u5b9e\u73b0\u81ea\u52a8\u5316\u7684\u914d\u989d\u7ba1\u7406\uff0c\u6bcf\u59290\u70b90\u5206\u81ea\u52a8\u7528\u6237qu03\u7684\u914d\u989d\u9650\u5236\u8bbe\u7f6e\u4e3a\u8f6f\u9650\u5236500M\u3001\u786c\u9650\u52361000M\u3002\n1\u5c0f\u9898Server2\u914d\u7f6e\nqemu-img create -f qcow2 /root/linux6-1.qcow2 20G            #\u521b\u5efa\u786c\u76d8\u6587\u4ef6\nvirsh shutdown linux6 \t#\u82e5qcow2\u78c1\u76d8\u4f4d\u4e8eroot\u4e0b\uff0c\u5219\u9700\u8981\u5173\u673a\u624d\u53ef\u8fde\u63a5\uff0c\u4e0d\u5728root\u4e0b\uff0c\u53ef\u76f4\u63a5\u8fde\u63a5\nvirsh attach-disk linux6 /root/linux6-1.qcow2 vdb --persistent --subdriver=qcow2 #\u8fde\u63a5\u5230linux6\uff0c\u6ce8\u610f\uff1a\u78c1\u76d8\u540d\u4e0d\u8981\u4e0elinux6\u73b0\u6709\u78c1\u76d8\u91cd\u540d\u3002\nchmod 777 /root/\t#\u52a0\u6743\uff0c\u5426\u5219\u542f\u52a8\u4e0d\u4e86\u865a\u62df\u673a\nvirsh start linux6"}),"\n",(0,i.jsxs)(e.p,{children:["Linux6\u914d\u7f6e\nlsblk #\u67e5\u770b\u78c1\u76d8\u662f\u5426\u6dfb\u52a0\n",(0,i.jsx)(e.img,{src:"https://cdn.nlark.com/yuque/0/2024/png/33622884/1712386752620-92c92aa1-35a4-4524-aabc-5215dd6340d9.png#averageHue=%23120e0b&clientId=u91b29006-76ba-4&from=paste&height=306&id=LOrrN&originHeight=275&originWidth=805&originalType=binary&ratio=0.8999999761581421&rotation=0&showTitle=false&size=27870&status=done&style=none&taskId=u0ffd186b-ec91-4572-bbaa-f4c589968e9&title=&width=894.444468139131",alt:"image.png"}),"\nmkfs.ext4 /dev/vdb   #\u683c\u5f0f\u5316\u4e3aext4\nvi /etc/fstab  #\u7f16\u8f91fstab\u6587\u4ef6\uff0c\u6dfb\u52a0\u4ee5\u4e0b\u5185\u5bb9\n",(0,i.jsx)(e.img,{src:"https://cdn.nlark.com/yuque/0/2024/png/33622884/1712387222901-565041a7-b5bc-4b64-b0b1-b49ae963268f.png#averageHue=%230e0a07&clientId=u91b29006-76ba-4&from=paste&height=163&id=e86e1&originHeight=147&originWidth=1050&originalType=binary&ratio=0.8999999761581421&rotation=0&showTitle=false&size=26144&status=done&style=none&taskId=uf7f3fb1b-0296-469c-b8f3-c155df91ea4&title=&width=1166.6666975727796",alt:"image.png"}),"\n",(0,i.jsx)(e.strong,{children:"echo '/dev/vdb /data/quota ext4 defaults 0 0' >> /etc/fstab"}),"\nmkdir -p /data/quota     #\u521b\u5efa\u6302\u8f7d\u70b9\nchmod 777 /data/quota #\u6743\u9650\u7ed9\u6ee1\nreboot    \t\t\t\t#\u91cd\u542f\u67e5\u770b\u6302\u8f7d\u7ed3\u679c",(0,i.jsx)(e.br,{}),"\n","2\u5c0f\u9898useradd qu01\nuseradd qu02\nuseradd qu03\npasswd qu01\npasswd qu02\npasswd qu03\n\u4f7f\u7528id qu01\u621602\u621603\uff0c\u53ef\u4ee5\u67e5\u770b\u7528\u6237\u662f\u5426\u5b58\u5728\n3\u5c0f\u9898yum install quota* -y   #\u5b89\u88c5quota\u76f8\u5173\u7684\u6240\u6709\u5305\nvi /etc/fstab  #\u5c06defaults\u4fee\u6539\u4e3a\u4ee5\u4e0b\u5185\u5bb9\uff0c\u8ba9\u5176\u652f\u6301quota\n",(0,i.jsx)(e.img,{src:"https://cdn.nlark.com/yuque/0/2024/png/33622884/1712394149042-045a42de-afe9-4904-8b83-909fef6dc3bc.png#averageHue=%2316120f&clientId=u91b29006-76ba-4&from=paste&height=168&id=oXMu6&originHeight=151&originWidth=891&originalType=binary&ratio=0.8999999761581421&rotation=0&showTitle=false&size=16905&status=done&style=none&taskId=ua8743ec8-6fcb-4f02-b2ae-e7d0a7272a3&title=&width=990.0000262260444",alt:"image.png"}),"\n\u4fee\u6539\u5b8c\u6210\u4e4b\u540e\u91cd\u542f\u7cfb\u7edf\uff0c\u6216\u8005\u91cd\u65b0\u6302\u8f7d\u78c1\u76d8\nquotacheck -auv\t#\u68c0\u67e5\u78c1\u76d8\u662f\u5426\u652f\u6301\u914d\u7f6e\uff0c\u4f1a\u751f\u6210\u78c1\u76d8\u914d\u989d\u6587\u4ef6\nsudo edquota -u root  #\u6539blocks\u5904\u7684hard\uff0c\u4fee\u6539\u5b8c\u540e",":wq","\u4fdd\u5b58\u9000\u51fa\n",(0,i.jsx)(e.img,{src:"https://cdn.nlark.com/yuque/0/2024/png/33622884/1712392972260-8ebf294a-fce8-49f3-bc4d-6f2ecf562dbd.png#averageHue=%230d0c0b&clientId=u91b29006-76ba-4&from=paste&height=88&id=AXr7Q&originHeight=79&originWidth=1418&originalType=binary&ratio=0.8999999761581421&rotation=0&showTitle=false&size=9364&status=done&style=none&taskId=u745c6871-3231-4dce-a4a0-08eecc8988a&title=&width=1575.5555972935251",alt:"image.png"}),"\nedquota -u qu01  #\u6539blocks\u5904\u7684soft\u548chard\n",(0,i.jsx)(e.img,{src:"https://cdn.nlark.com/yuque/0/2024/png/33622884/1712392838692-82731747-2cf6-4909-8f71-8fa2acebd000.png#averageHue=%230c0b0a&clientId=u91b29006-76ba-4&from=paste&height=103&id=CZcR7&originHeight=93&originWidth=1430&originalType=binary&ratio=0.8999999761581421&rotation=0&showTitle=false&size=9354&status=done&style=none&taskId=ua952991d-812c-46cf-9c86-f2f178182db&title=&width=1588.8889309800713",alt:"image.png"}),"\nedquota -u qu02  #\u6539blocks\u5904\u7684soft\u548chard\n",(0,i.jsx)(e.img,{src:"https://cdn.nlark.com/yuque/0/2024/png/33622884/1712392927568-c3b04380-6776-4ee9-9dd6-8c1ae2ae56c6.png#averageHue=%230e0c0b&clientId=u91b29006-76ba-4&from=paste&height=94&id=NSYR6&originHeight=85&originWidth=1422&originalType=binary&ratio=0.8999999761581421&rotation=0&showTitle=false&size=9413&status=done&style=none&taskId=u29e181dd-9353-49bf-92a1-fe76c9c1ac8&title=&width=1580.0000418557072",alt:"image.png"}),'\n\u6ce8\u610f\uff1a\u8fd9\u91ccG\u548cM\u7684\u6362\u7b97\u4e0d\u4e00\u6837\uff0c\u7ed3\u679c\u662f\u7cfb\u7edf\u81ea\u5df1\u6362\u7b97\u51fa\u6765\u7684\uff0c\u4f60\u53ef\u4ee5\u76f4\u63a5\u8f93\u51651G\u300110G\uff0c\u7136\u540e\u4fdd\u5b58\uff0c\u518d\u8fdb\u53bb\u7684\u65f6\u5019\uff0c\u5c31\u4f1a\u88ab\u6362\u7b97\n4\u5c0f\u9898vi /etc/profile #\u5728\u5c3e\u90e8\u6dfb\u52a0\u4ee5\u4e0b\u5185\u5bb9\nif [ "$USER" = "qu01" ]; then\nquota -v -u; fi\n5\u5c0f\u9898echo \'0 0 * * * root edquota -u qu03 -f /data/quota -b 500M 1000M\' >> /etc/crontab']})]})}function l(t={}){const{wrapper:e}={...(0,a.R)(),...t.components};return e?(0,i.jsx)(e,{...t,children:(0,i.jsx)(c,{...t})}):c(t)}},8453:(t,e,n)=>{n.d(e,{R:()=>s,x:()=>r});var i=n(6540);const a={},o=i.createContext(a);function s(t){const e=i.useContext(o);return i.useMemo((function(){return"function"==typeof t?t(e):{...e,...t}}),[e,t])}function r(t){let e;return e=t.disableParentContext?"function"==typeof t.components?t.components(a):t.components||a:s(t.components),i.createElement(o.Provider,{value:e},t.children)}}}]);