"use strict";(self.webpackChunkser=self.webpackChunkser||[]).push([[3494],{4727:(n,e,i)=>{i.r(e),i.d(e,{assets:()=>o,contentTitle:()=>a,default:()=>h,frontMatter:()=>r,metadata:()=>l,toc:()=>d});var t=i(4848),s=i(8453);const r={sidebar_position:1},a=void 0,l={id:"\u4e8c\u3001\u670d\u52a1\u5668\u6a21\u5757/\u56db\u3001Linux\u4e91\u670d\u52a1\u914d\u7f6e/1\u3001\u7cfb\u7edf\u5b89\u88c5 \u221a",title:"1\u3001\u7cfb\u7edf\u5b89\u88c5 \u221a",description:"\u9898\u76ee\uff1a",source:"@site/docs/\u4e8c\u3001\u670d\u52a1\u5668\u6a21\u5757/\u56db\u3001Linux\u4e91\u670d\u52a1\u914d\u7f6e/1\u3001\u7cfb\u7edf\u5b89\u88c5 \u221a.md",sourceDirName:"\u4e8c\u3001\u670d\u52a1\u5668\u6a21\u5757/\u56db\u3001Linux\u4e91\u670d\u52a1\u914d\u7f6e",slug:"/\u4e8c\u3001\u670d\u52a1\u5668\u6a21\u5757/\u56db\u3001Linux\u4e91\u670d\u52a1\u914d\u7f6e/1\u3001\u7cfb\u7edf\u5b89\u88c5 \u221a",permalink:"/docs/\u4e8c\u3001\u670d\u52a1\u5668\u6a21\u5757/\u56db\u3001Linux\u4e91\u670d\u52a1\u914d\u7f6e/1\u3001\u7cfb\u7edf\u5b89\u88c5 \u221a",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"Linux\u4e91\u670d\u52a1\u914d\u7f6e",permalink:"/docs/category/linux\u4e91\u670d\u52a1\u914d\u7f6e"},next:{title:"2\u3001dns\u670d\u52a1 \u221a",permalink:"/docs/\u4e8c\u3001\u670d\u52a1\u5668\u6a21\u5757/\u56db\u3001Linux\u4e91\u670d\u52a1\u914d\u7f6e/2\u3001dns\u670d\u52a1 \u221a"}},o={},d=[{value:"<strong>\u9898\u76ee\uff1a</strong>",id:"\u9898\u76ee",level:2},{value:"\u914d\u7f6e\u6b65\u9aa4\uff1a",id:"\u914d\u7f6e\u6b65\u9aa4",level:2},{value:"1\u5c0f\u9898",id:"1\u5c0f\u9898",level:2},{value:"2\u5c0f\u9898",id:"2\u5c0f\u9898",level:2},{value:"3\u5c0f\u9898",id:"3\u5c0f\u9898",level:2},{value:"4\u5c0f\u9898",id:"4\u5c0f\u9898",level:2},{value:"4.1 \u5c0f\u9898",id:"41-\u5c0f\u9898",level:3},{value:"4.2\u5c0f\u9898",id:"42\u5c0f\u9898",level:3},{value:"----\u6269\u5c55\u547d\u4ee4",id:"----\u6269\u5c55\u547d\u4ee4",level:2}];function c(n){const e={admonition:"admonition",br:"br",h2:"h2",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,s.R)(),...n.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e.h2,{id:"\u9898\u76ee",children:(0,t.jsx)(e.strong,{children:"\u9898\u76ee\uff1a"})}),"\n",(0,t.jsxs)(e.p,{children:["1\u3001PC1 web \u8fde\u63a5 server2\uff0c\u7ed9 server2 \u5b89\u88c5 rocky-arm64 CLI \u7cfb\u7edf\uff08\u8bed\n\u8a00\u4e3a\u82f1\u6587\uff09\u3002\n2\u3001\u914d\u7f6e server2 \u7684 IPv4 \u5730\u5740\u4e3a 10.4.220.100/24\u3002\n3\u3001\u5b89\u88c5 qemu-kvm\u3001libvirt \u548c virt-install\u3002\n4\u3001\u521b\u5efa rocky-arm64 \u865a\u62df\u673a\uff0c\u865a\u62df\u673a\u78c1\u76d8\u6587\u4ef6\u4fdd\u5b58\u5728\u9ed8\u8ba4\u76ee\u5f55\uff0c\u540d\u79f0\u4e3a\nlinuxN.qcow2(N \u8868\u793a\u865a\u62df\u673a\u7f16\u53f7 0-9\uff0c\u5982\u865a\u62df\u673a linux1 \u7684\u78c1\u76d8\u6587\u4ef6\n\u4e3a linux1.qcow2),\u865a\u62df\u673a\u4fe1\u606f\u5982\u4e0b\uff1a\n",(0,t.jsx)(e.img,{src:"https://cdn.nlark.com/yuque/0/2023/png/33622884/1694490920405-371f8edd-6f7b-4a4a-a799-eb9d105cad81.png#averageHue=%23ebeae8&clientId=udd1cf54e-ae3b-4&from=paste&height=396&id=ub259c120&originHeight=544&originWidth=947&originalType=binary&ratio=1.375&rotation=0&showTitle=false&size=85202&status=done&style=none&taskId=u04765d5a-1eeb-47bb-9f96-350bec68a20&title=&width=688.7272727272727",alt:"image.png"}),"\n",(0,t.jsx)(e.img,{src:"https://cdn.nlark.com/yuque/0/2023/png/33622884/1694490934456-df3891ea-c2f5-4196-b85a-7ae782818d28.png#averageHue=%23eae9e7&clientId=udd1cf54e-ae3b-4&from=paste&height=90&id=uce965b34&originHeight=124&originWidth=946&originalType=binary&ratio=1.375&rotation=0&showTitle=false&size=17370&status=done&style=none&taskId=u1ed8c0a8-430c-437c-8e1f-7de73b2065f&title=&width=688",alt:"image.png"}),"\n4.1 \u5b89\u88c5 linux0\uff0c\u7cfb\u7edf\u4e3a rocky9 CLI\uff0c\u7f51\u7edc\u6a21\u5f0f\u4e3a\u6865\u63a5\u6a21\u5f0f\uff0c\u7528\u6237 root\n\u5bc6\u7801\u4e3a Key-1122\u3002\n4.2 \u5173\u95ed linux0\uff0c\u7ed9 linux0 \u521b\u5efa\u5feb\u7167\uff0c\u5feb\u7167\u540d\u79f0\u4e3a linux-snapshot\u3002\n\u6839\u636e linux0 \u514b\u9686\u865a\u62df\u673a linux1-linux9\u3002"]}),"\n",(0,t.jsx)(e.h2,{id:"\u914d\u7f6e\u6b65\u9aa4",children:"\u914d\u7f6e\u6b65\u9aa4\uff1a"}),"\n",(0,t.jsx)(e.h2,{id:"1\u5c0f\u9898",children:"1\u5c0f\u9898"}),"\n",(0,t.jsx)(e.p,{children:"1.1 \u4fee\u6539Ubuntu IP\u5730\u5740\u4e0e\u9cb2\u6cf0\u670d\u52a1\u5668\u7ba1\u7406\u53e3\u540c\u7f51\u6bb5\n1.2 web\u767b\u5f55\u7ba1\u7406\u540e\u53f0\u9cb2\u6cf0\u670d\u52a1\u5668\u7ba1\u7406\u53e3\u4e3a192.168.2.10\n\u7528\u6237\u540d\uff1aAdmin \u5bc6\u7801\uff1aAdmin@123\n1.3 \u521b\u5efa\u903b\u8f91\u76d8\uff08\u975e\u5fc5\u987b\uff09\u670d\u52a1\u5668\u53ef\u80fd\u5b58\u5728\u4e24\u5757\u8f83\u5c0f\u7684\u78c1\u76d8\uff0c\u4f8b\u5982\u4e00\u5757\u53ea\u6709480G\uff0c\u9700\u8981\u8fdb\u884c\u5408\u5e76\u6210\u903b\u8f91\u76d8\uff0c\u4e0d\u7136\u53ef\u80fd\u4e0d\u591f\u5b8c\u62109\u53f0\u751a\u81f3\u66f4\u591a\u7684\u865a\u62df\u673a\u5b89\u88c5\n1.4  \u542f\u52a8\u865a\u62df\u63a7\u5236\u53f0\u4f4d\u4e8e\u9996\u9875\u53f3\u4e0b\u89d2---\u9009\u62e9html5\u5171\u4eab\u6a21\u5f0f\n1.5 \u8fde\u63a5\u5b89\u88c5\u955c\u50cf\u70b9\u51fb\u5149\u76d8\u56fe\u6807--\u8fde\u63a5\u4f4d\u4e8e\u672c\u5730\u7684\u955c\u50cf\u6587\u4ef6\n1.6 \u9009\u62e9\u5149\u9a71\u542f\u52a8\u9009\u62e9B\u56fe\u6807--\u9009\u62e9\u5149\u9a71\n1.7 \u5f3a\u5236\u91cd\u542f\u9cb2\u6cf0\u70b9\u51fb\u7535\u6e90\u56fe\u6807--\u9009\u62e9\u5f3a\u5236\u91cd\u542f\n1.8 \u9009\u62e9\u5b89\u88c5rocky\u9700\u8981\u5173\u6ce8\u5b89\u88c5\u754c\u9762\u7684\u53d8\u5316\uff0c\u8df3\u51fa\u63d0\u793a\u5c31\u5feb\u901f\u9009\u62e9\u5b89\u88c5rocky\uff0c\u4e0d\u7136\u5b83\u81ea\u52a8\u9009\u62e9\u68c0\u67e5\u518d\u5b89\u88c5\u4f1a\u6d6a\u8d39\u5f88\u591a\u65f6\u95f4\n1.9 \u8fdb\u884c\u78c1\u76d8\u5206\u533a\u6ce8\u610f\uff1a\u9898\u76ee\u4e2d\u6709\u660e\u786e\u8981\u6c42\u5206\u533a\u5bb9\u91cf\u5c31\u6309\u9898\u76ee\u6765\u914d\u7f6e\uff0c\u6ca1\u6709\u8981\u6c42\u7684\u8bddboot\u5206\u533a1G\u5373\u53ef\uff0cswap\u5206\u533a10G\u5373\u53ef\uff0chome\u5206\u533a20G\u5373\u53ef\uff0c\u5176\u4f59\u7a7a\u95f4\u90fd\u7ed9/\u6839\u5206\u533a\uff0c\n1.10 \u9009\u62e9\u5b89\u88c5\u7248\u672c\u9009\u62e9\u6700\u5c0f\u5316\u5b89\u88c5\u7248\u672c\n1.11 \u914d\u7f6e\u5bc6\u7801\u6309\u9898\u76ee\u8981\u6c42\u914d\u7f6e\n1.12 \u8fdb\u884c\u5b89\u88c5\u6240\u6709\u8bbe\u7f6e\u5b8c\u6210\u540e\uff0c\u8fdb\u884c\u5b89\u88c5\u3002"}),"\n",(0,t.jsx)(e.h2,{id:"2\u5c0f\u9898",children:"2\u5c0f\u9898"}),"\n",(0,t.jsxs)(e.p,{children:["2.1 \u521b\u5efa\u6865\u63a5\u7f51\u5361nmcli c add type bridge ifname br0 #\u521b\u5efa\u6865\u8bbe\u5907 br0\nnmcli c add type bridge-slave ifname enp125s0f0 master br0 #\u914d\u7f6e\u6865\u8bbe\u5907\u6865\u63a5\u7684\u7f51\u5361\n2.2 \u4fee\u6539\u672c\u5730\u7f51\u5361\u4e3a\u81ea\u52a8\u83b7\u53d6vi /etc/NetworkManager/system-connections/enp125s0f0.nmconnection\n",(0,t.jsx)(e.img,{src:"https://cdn.nlark.com/yuque/0/2024/png/33622884/1710911651823-e9cded61-2456-4463-8706-59b2cc40d5f1.png#averageHue=%23121212&clientId=u5933070e-09df-4&from=paste&height=407&id=ag8yd&originHeight=488&originWidth=887&originalType=binary&ratio=1.2000000476837158&rotation=0&showTitle=false&size=28140&status=done&style=none&taskId=uddc324c7-378f-4824-9aa3-a94367263c0&title=&width=739.1666372948234",alt:"image.png"}),"\n2.3 \u4fee\u6539\u6865\u8bbe\u5907\u7684IP\u5730\u5740\u4e3a\u9759\u6001vi /etc/NetworkManager/system-connections/bridge-br0.nmconnection\n",(0,t.jsx)(e.img,{src:"https://cdn.nlark.com/yuque/0/2024/png/33622884/1710911680754-6ba08193-cc69-4490-811b-f27c5666d7ac.png#averageHue=%23131313&clientId=u5933070e-09df-4&from=paste&height=449&id=T6vjC&originHeight=539&originWidth=807&originalType=binary&ratio=1.2000000476837158&rotation=0&showTitle=false&size=29307&status=done&style=none&taskId=u75cc8421-68ce-45fb-9323-33072d5aca0&title=&width=672.499973277252",alt:"image.png"}),"\n2.4 \u91cd\u542f\u7f51\u5361nmcli connection reload + \u6865\u63a5\u7f51\u5361\u914d\u7f6e\u6587\u4ef6\u8def\u5f84  #\u52a0\u8f7d\u914d\u7f6e\u4fe1\u606f\uff0c\u7acb\u5373\u751f\u6548\nnmcli connection up + \u6865\u63a5\u7f51\u5361\u914d\u7f6e\u6587\u4ef6\u8def\u5f84         #\u6fc0\u6d3b\u914d\u7f6e\nnmcli \u67e5\u770b\u7f51\u7edc\u8fde\u63a5\u60c5\u51b5",(0,t.jsx)(e.img,{src:"https://cdn.nlark.com/yuque/0/2024/png/33622884/1710911811038-559f019e-c9a0-478b-a258-5a0b5faf16dd.png#averageHue=%23141414&clientId=u5933070e-09df-4&from=paste&height=814&id=y1d2w&originHeight=977&originWidth=879&originalType=binary&ratio=1.2000000476837158&rotation=0&showTitle=false&size=98767&status=done&style=none&taskId=u42f324f8-378e-4dac-abb9-0aeee5a34cf&title=&width=732.4999708930663",alt:"image.png"}),"\n",(0,t.jsx)(e.img,{src:"https://cdn.nlark.com/yuque/0/2024/png/33622884/1713178227265-2521bcf3-3d3d-4943-bdd7-6087ed65a5e3.png#averageHue=%230a0a0a&clientId=uc98eb0ec-f630-4&from=paste&height=153&id=ud5c19272&originHeight=143&originWidth=958&originalType=binary&ratio=0.9375&rotation=0&showTitle=false&size=46979&status=done&style=none&taskId=ue4b8403f-2b9c-4e51-a443-13c885bc3f0&title=&width=1021.8666666666667",alt:"image.png"})]}),"\n",(0,t.jsx)(e.h2,{id:"3\u5c0f\u9898",children:"3\u5c0f\u9898"}),"\n",(0,t.jsxs)(e.p,{children:["3.1 Ubuntu\u4f20\u8f93\u955c\u50cf\u5230Server2scp + \u955c\u50cf\u540d + root@10.4.220.100:/opt  #\u5728Ubuntu\u4f20\u8f93\u955c\u50cf\u5230Server2\u7684opt\u76ee\u5f55\u4e0b\n3.2 \u642d\u5efa\u672c\u5730yum\u6e90Server2\u6267\u884c\u4ee5\u4e0b\u64cd\u4f5c\nmount /opt/\u955c\u50cf\u540d  /var/www/html/a #\u6302\u8f7d\u955c\u50cf\u5230a\u76ee\u5f55\ncd /etc/yum.repos.d/ #\u5207\u6362\u5230yum\u6587\u4ef6\u6240\u5728\u76ee\u5f55\nvi rocky-devel.repo  #\u7f16\u8f91yum\u6587\u4ef6\uff0c\u4fee\u6539\u7ea2\u6846\u5904\n",(0,t.jsx)(e.img,{src:"https://cdn.nlark.com/yuque/0/2024/png/33622884/1710914769705-43f3f0b0-8af3-4259-bba0-ddff77cb1129.png#averageHue=%231a1a1a&clientId=u4a6ad3ae-a8dd-4&from=paste&height=471&id=Id96p&originHeight=565&originWidth=1406&originalType=binary&ratio=1.2000000476837158&rotation=0&showTitle=false&size=75535&status=done&style=none&taskId=udc8faac3-9e18-499f-8329-321b080425a&title=&width=1171.6666201088183",alt:"image.png"}),"\nrm -rf \u6587\u4ef6\u540d #\u5220\u9664\u9664rocky-devel.repo\u5916\u7684\u6240\u6709\u6587\u4ef6\nyum clean all #\u6e05\u9664\u7f13\u5b58\nyum makecache #\u5efa\u7acb\u65b0\u7684\u4ed3\u5e93\u7f13\u5b58\n",(0,t.jsx)(e.img,{src:"https://cdn.nlark.com/yuque/0/2024/png/33622884/1710914261520-3b9ddbf1-3a04-42ea-b089-9fe91d353d3b.png#averageHue=%231f1f1f&clientId=u0b7ec4b4-8459-4&from=paste&height=93&id=yVMmN&originHeight=112&originWidth=1613&originalType=binary&ratio=1.3499999046325684&rotation=0&showTitle=false&size=24133&status=done&style=none&taskId=u9e351881-b844-4950-b0a7-7eaa14b2065&title=&width=1344.1666132542844",alt:"image.png"}),"\n3.3 \u5b89\u88c5\u8f6f\u4ef6yum install qemu* virt-*  libvirt* bash-comp* httpd -y\nbash #\u4f7ftab\u529f\u80fd\u751f\u6548\n\u5305\u8bf4\u660eqemu-kvm\uff1aqemu\u6a21\u62df\u5668\nqemu-img\uff1aqemu\u78c1\u76d8image\u7ba1\u7406\u5668\nvirt-install\uff1a\u7528\u6765\u521b\u5efa\u865a\u62df\u673a\u7684\u547d\u4ee4\u884c\u5de5\u5177\nlibvirt\uff1a\u63d0\u4f9blibvirtd daemon\u6765\u7ba1\u7406\u865a\u62df\u673a\u548c\u63a7\u5236hypervisor\nlibvirt-client\uff1a\u63d0\u4f9b\u5ba2\u6237\u7aefAPI\u7528\u6765\u8bbf\u95eeserver\u548c\u63d0\u4f9b\u7ba1\u7406\u865a\u62df\u673a\u547d\u4ee4\u884c\u5de5\u5177\u7684virsh\u5b9e\u4f53\nvirt-viewer\uff1a\u56fe\u5f62\u63a7\u5236\u53f0\uff0cvnc\u7684\u663e\u793a\u5c31\u662f\u5b83\u63d0\u4f9b\nbash-completion\uff1atab\u529f\u80fd\u7684\u8f6f\u4ef6\u5305\uff0c\u53ef\u4ee5\u8fdb\u884c\u547d\u4ee4\u8865\u9f50\uff0c\u51cf\u5c11\u914d\u7f6e\u96be\u5ea6\nhttpd\uff1a\u4e3a\u642d\u5efayum\u6e90\u63d0\u4f9b\u5171\u4eab\u670d\u52a1\n3.4 \u542f\u52a8\u5b88\u62a4\u8fdb\u7a0bsystemctl enable libvirtd  --now #\u8bbe\u4e3a\u5f00\u673a\u81ea\u542f\u5e76\u73b0\u5728\u542f\u52a8\nsystemctl status libvirtd              #\u67e5\u770b\u8fd0\u884c\u72b6\u6001"]}),"\n",(0,t.jsx)(e.h2,{id:"4\u5c0f\u9898",children:"4\u5c0f\u9898"}),"\n",(0,t.jsx)(e.h3,{id:"41-\u5c0f\u9898",children:"4.1 \u5c0f\u9898"}),"\n",(0,t.jsx)(e.p,{children:"\u51c6\u5907\u5de5\u4f5c1\u3001\u5173\u95ed\u9632\u706b\u5899\nsystemctl disable firewalld --now #\u5f00\u673a\u4e0d\u81ea\u542f\u5e76\u73b0\u5728\u5173\u95ed\u9632\u706b\u5899"}),"\n",(0,t.jsxs)(e.p,{children:["2\u3001\u5f00\u542fssh\u670d\u52a1\nvi /etc/ssh/sshd_config #\u5141\u8bb8ssh\n",(0,t.jsx)(e.img,{src:"https://cdn.nlark.com/yuque/0/2024/png/33622884/1710913557263-a70e1584-0c5f-4064-bd18-7667becc1e4f.png#averageHue=%230d0c0c&clientId=u5933070e-09df-4&from=paste&height=474&id=u192d1e12&originHeight=640&originWidth=1147&originalType=binary&ratio=1.2000000476837158&rotation=0&showTitle=false&size=56044&status=done&style=none&taskId=u865901bb-1116-482a-aea5-8203ee7302e&title=&width=849.6296896496307",alt:"image.png"}),"\nsystemctl restart sshd #\u91cd\u542fssh\u670d\u52a1\n4.1 ssh\u767b\u5f55Server2ssh root@10.4.220.100  #\u8f93\u5165\u7528\u6237\u540d\u5bc6\u7801\n4.2 \u521b\u5efaLinux0virt-install --name linux0 --memory 4096 --disk path=/var/lib/libvirt/images/linux0.qcow2,size=40,bus=virtio --vcpus 2 --os-variant auto --network bridge=br0,model=virtio --cdrom /opt/Rocky-9.2-x86_64-dvd.iso --graphics vnc,listen=0.0.0.0 --video virtio\n\u5b57\u6bb5\u91ca\u4e49\uff1a1\u3001--name linux1 #\u8bbe\u7f6e\u865a\u62df\u673a\u540d\u79f0\n2\u3001--ram 2048  #\u5206\u914d\u5185\u5b58\u5927\u5c0f\uff0c\u5355\u4f4dMB\n3\u3001--disk path=/var/lib/libvirt/images/linux1.qcow2,size=40,bus=virtio #\u6307\u5b9a\u786c\u76d8\u6587\u4ef6\u8def\u5f84 \u5bb9\u91cf\u5927\u5c0f \u7c7b\u578b \u9ed8\u8ba4\u5b58\u653e\u4f4d\u7f6e\uff1a/var/lib/libvirt/images\n4\u3001--vcpus 2 #\u8bbe\u7f6e\u865a\u62dfCPU\u6570\n5\u3001--os-variant rocky9 #\u6307\u5b9a\u64cd\u4f5c\u7cfb\u7edf\u7c7b\u578b\n6\u3001--network bridge=br0,model=virtio #\u7f51\u7edc\u6a21\u5f0f \u6307\u5b9a\u6865\u63a5\u7f51\u5361 \u7c7b\u578b\n7\u3001--location /opt/Rocky-9.1-x86_64-dvd.iso #\u9009\u62e9\u5b89\u88c5\u955c\u50cf\u7684\u672c\u5730\u8def\u5f84\n8\u3001--graphics vnc,listen=0.0.0.0 #\u56fe\u5f62\u5316\u8f93\u51fa\u4e3avnc\uff0c\u76d1\u542c\u7684IP\u5730\u5740\u4e3a\u6240\u6709\n9\u3001--video virtio #\u6307\u5b9a\u663e\u793a\u9a71\u52a8\n4.3 VNC\u8fde\u63a5\u5b8c\u6210\u5b89\u88c5",(0,t.jsx)(e.img,{src:"https://cdn.nlark.com/yuque/0/2023/png/33622884/1683508867867-70583cd8-eccf-4513-8fab-fc496eae2dc3.png#averageHue=%23ebebea&clientId=u1beb751e-0f7c-4&from=paste&height=636&id=kOaH9&originHeight=636&originWidth=810&originalType=binary&ratio=1&rotation=0&showTitle=false&size=48935&status=done&style=none&taskId=u646cde1c-6fd1-421e-8c95-13b3f58cf19&title=&width=810",alt:"image.png"}),"\n\u7cfb\u7edf\u5b89\u88c5\u65f6\u7528\u6237\u540d\u548c\u5bc6\u7801\u81ea\u884c\u8bbe\u7f6e\uff0c\u8fd9\u91cc\u4e0d\u505a\u8bf4\u660e\n\u6ce8\uff1a\u5173\u4e8eVNC\u670d\u52a1vnc\u9ed8\u8ba4\u7aef\u53e3\u4e3a5900\uff0c\u5982\u679c\u67093\u53f0\u865a\u62df\u673a\uff0c\u670d\u52a1\u5668IP\u4e3a10.1.220.100:5900\uff0c\u90a3\u4e48\u767b\u5f55vnc\u65f6\uff0c\u7b2c\u4e00\u53f0\u4e3a10.1.220.100\uff0c\u7b2c\u4e8c\u53f0\u4e3a10.1.220.100:5901\uff0c\u7b2c\u4e09\u53f0\u4e3a10.1.220.100:5902\uff0c\u4ee5\u6b64\u7c7b\u63a8\uff0c\u9632\u706b\u5899\u5904\u9664\u4e86\u53ef\u4ee5\u653e\u884c\u670d\u52a1\u540d\uff0c\u4e5f\u53ef\u4ee5\u653e\u884c\u76f8\u5e94\u7aef\u53e3\n4.4 \u8fdb\u884cLinux\u7684\u57fa\u7840\u914d\u7f6e"]}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsx)(e.p,{children:"\u4fee\u6539IP\u5730\u5740"}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsx)(e.p,{children:"\u5173\u95ed\u9632\u706b\u5899"}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(e.p,{children:"systemctl restart firewalld --now"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"\u5141\u8bb8ssh"}),"\n"]}),"\n",(0,t.jsxs)(e.p,{children:["vi /etc/ssh/sshd_conf\n",(0,t.jsx)(e.img,{src:"https://cdn.nlark.com/yuque/0/2024/png/33622884/1710913557263-a70e1584-0c5f-4064-bd18-7667becc1e4f.png#averageHue=%230d0c0c&clientId=u5933070e-09df-4&from=paste&height=474&id=JWH4s&originHeight=640&originWidth=1147&originalType=binary&ratio=1.2000000476837158&rotation=0&showTitle=false&size=56044&status=done&style=none&taskId=u865901bb-1116-482a-aea5-8203ee7302e&title=&width=849.6296896496307",alt:"image.png"}),"\nsystemctl restart sshd"]}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"\u914d\u7f6e\u5c40\u57df\u7f51yum\u6e90"}),"\n"]}),"\n",(0,t.jsxs)(e.p,{children:["cd /etc/yum.repos.d/ #\u5207\u6362\u5230yum\u6587\u4ef6\u6240\u5728\u76ee\u5f55\nvi rocky-devel.repo  #\u7f16\u8f91yum\u6587\u4ef6\uff0c\u4fee\u6539\u7ea2\u6846\u5904\n",(0,t.jsx)(e.img,{src:"https://cdn.nlark.com/yuque/0/2024/png/33622884/1710914091631-9a030fc9-19b9-4345-8a0f-87f3d9553376.png#averageHue=%23181818&clientId=u0b7ec4b4-8459-4&from=paste&height=583&id=awsk9&originHeight=700&originWidth=1380&originalType=binary&ratio=1.3499999046325684&rotation=0&showTitle=false&size=87902&status=done&style=none&taskId=u71cce64a-097f-44d6-85d1-5b2d86a8100&title=&width=1149.9999543031074",alt:"image.png"}),"\nrm -rf \u6587\u4ef6\u540d #\u5220\u9664\u9664rocky-devel.repo\u5916\u7684\u6240\u6709\u6587\u4ef6\nyum clean all #\u6e05\u9664\u7f13\u5b58\nyum makecache #\u5efa\u7acb\u65b0\u7684\u4ed3\u5e93\u7f13\u5b58\n",(0,t.jsx)(e.img,{src:"https://cdn.nlark.com/yuque/0/2024/png/33622884/1710914261520-3b9ddbf1-3a04-42ea-b089-9fe91d353d3b.png#averageHue=%231f1f1f&clientId=u0b7ec4b4-8459-4&from=paste&height=93&id=oiDW9&originHeight=112&originWidth=1613&originalType=binary&ratio=1.3499999046325684&rotation=0&showTitle=false&size=24133&status=done&style=none&taskId=u9e351881-b844-4950-b0a7-7eaa14b2065&title=&width=1344.1666132542844",alt:"image.png"})]}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"\u5b89\u88c5tab\u5305\u548cvim\u7f16\u8f91\u5668"}),"\n"]}),"\n",(0,t.jsx)(e.p,{children:"yum install bash-comp* vim -y"}),"\n",(0,t.jsx)(e.h3,{id:"42\u5c0f\u9898",children:"4.2\u5c0f\u9898"}),"\n",(0,t.jsx)(e.p,{children:"\u521b\u5efa\u5feb\u7167\nvirsh shutdown linux1 #\u5173\u673a\u865a\u62df\u673a\nvirsh snapshot-create-as linux0 linux-snapshot #\u521b\u5efa\u5feb\u7167"}),"\n",(0,t.jsx)(e.p,{children:"\u514b\u9686\nvirt-clone --original linux0  --name linux1 --file /var/lib/libvirt/images/linux1.qcow2 --auto-clone\n\u6309\u4e0a\u9762\u7684\u547d\u4ee4\uff0c\u7167\u846b\u82a6\u753b\u74e2\u5b8c\u62102-9\u7684\u514b\u9686"}),"\n",(0,t.jsx)(e.p,{children:"\u5b8c\u5584Linux1-9\u57fa\u7840\u914d\u7f6e"}),"\n",(0,t.jsxs)(e.ol,{children:["\n",(0,t.jsx)(e.li,{children:"\u4fee\u6539\u4e3b\u673a\u540d"}),"\n"]}),"\n",(0,t.jsxs)(e.p,{children:["nmcli g hostname xxxx",(0,t.jsx)(e.br,{}),"\n","bash #\u4f7f\u5176\u4e3b\u673a\u540d\u751f\u6548"]}),"\n",(0,t.jsxs)(e.ol,{start:"2",children:["\n",(0,t.jsx)(e.li,{children:"\u4fee\u6539IP\u5730\u5740"}),"\n"]}),"\n",(0,t.jsx)(e.p,{children:"vi /etc/Net"}),"\n",(0,t.jsxs)(e.ol,{start:"3",children:["\n",(0,t.jsx)(e.li,{children:"tab\u529f\u80fd\u751f\u6548"}),"\n"]}),"\n",(0,t.jsx)(e.p,{children:"bash"}),"\n",(0,t.jsxs)(e.admonition,{type:"info",children:[(0,t.jsx)(e.h2,{id:"----\u6269\u5c55\u547d\u4ee4",children:"----\u6269\u5c55\u547d\u4ee4"}),(0,t.jsx)(e.p,{children:"1\u3001\u5217\u51fa\u6240\u6709\u865a\u62df\u673a\uff0c\u865a\u62df\u673a\u72b6\u6001\nvirsh list --all"}),(0,t.jsx)(e.p,{children:"2\u3001\u542f\u52a8\u865a\u62df\u673a\nvirsh start linux1"}),(0,t.jsx)(e.p,{children:"3\u3001\u5173\u95ed\u865a\u62df\u673a\nvirsh shutdown linux1"}),(0,t.jsx)(e.p,{children:"4\u3001\u91cd\u542f\u865a\u62df\u673a\nvirsh reboot linux1"}),(0,t.jsx)(e.p,{children:"5\u3001\u9500\u6bc1\u865a\u62df\u673a\uff0c\u76f8\u5f53\u62d4\u6389\u865a\u62df\u673a\u7684\u7535\u6e90\nvirsh destroy linux1"}),(0,t.jsx)(e.p,{children:"6\u3001\u5220\u9664\u865a\u62df\u673a\nvirsh undefine linux1"}),(0,t.jsx)(e.p,{children:"7\u3001\u4fee\u6539\u865a\u62df\u673a\u540d\u79f0\nvirsh domrename linux100 linux1"}),(0,t.jsx)(e.p,{children:"8\u3001\u4fee\u6539\u786c\u76d8\u6587\u4ef6\u540d\u79f0\nmv /var/lib/libvirt/images/linux100.qcow2  /var/lib/libvirt/images/linux1.qcow2"}),(0,t.jsx)(e.p,{children:"9\u3001\u83b7\u53d6\u57df\u7684\u7f51\u7edc\u63a5\u53e3\u72b6\u6001\nvirsh domiflist linux1"}),(0,t.jsx)(e.p,{children:"10\u3001\u6062\u590d\u5feb\u7167\nvirsh snapshot-revert linux1 linux-snapshot"}),(0,t.jsx)(e.p,{children:"11\u3001\u5220\u9664\u5feb\u7167\nvirsh snapshot-delete linux1 linux-snapshot"}),(0,t.jsx)(e.p,{children:"12\u3001\u6dfb\u52a0\u78c1\u76d8\nqemu-img create -f qcow2 /cp/a.qcow2 10G"}),(0,t.jsx)(e.p,{children:"13\u3001\u67e5\u770b\u78c1\u76d8\u4fe1\u606f\nqemu-img info /opt/a.qcow2"}),(0,t.jsx)(e.p,{children:"14\u3001\u6302\u8f7d\u78c1\u76d8\nvirsh attach-disk linux1 /cp/a.qcow2 vdb --persistent --subdriver=qcow2\n#\u5c06\u8be5\u78c1\u76d8\u8fde\u63a5\u5230linux1\u5f53\u4e2d\uff0c\u5728linux\u4e2d\u663e\u793a\u4e3avdb\uff0cpersistent\u4e3a\u6c38\u4e45\u7684\u610f\u601d\uff0csubdriver\u6307\u5b9a\u78c1\u76d8\u7c7b\u578b"}),(0,t.jsx)(e.p,{children:"15\u3001\u67e5\u770b\u4e3b\u673a\u78c1\u76d8\u8fde\u63a5\u60c5\u51b5\nvirsh domblklist linux1"}),(0,t.jsx)(e.p,{children:"fdisk -l \u67e5\u770b\u6240\u6709\u78c1\u76d8\u4fe1\u606f\uff0c\u8fd9\u4e2a\u65f6\u5019\u5c31\u6709\u4e00\u4e2avdb"}),(0,t.jsx)(e.p,{children:"16\u3001\u5206\u79bb\u78c1\u76d8\nvirsh detach-disk linux1 /cp/a.qcow2"})]})]})}function h(n={}){const{wrapper:e}={...(0,s.R)(),...n.components};return e?(0,t.jsx)(e,{...n,children:(0,t.jsx)(c,{...n})}):c(n)}},8453:(n,e,i)=>{i.d(e,{R:()=>a,x:()=>l});var t=i(6540);const s={},r=t.createContext(s);function a(n){const e=t.useContext(r);return t.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function l(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(s):n.components||s:a(n.components),t.createElement(r.Provider,{value:e},n.children)}}}]);