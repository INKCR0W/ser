"use strict";(self.webpackChunkser=self.webpackChunkser||[]).push([[4902],{7855:(n,e,i)=>{i.r(e),i.d(e,{assets:()=>p,contentTitle:()=>o,default:()=>l,frontMatter:()=>a,metadata:()=>s,toc:()=>d});var t=i(4848),r=i(8453);const a={sidebar_position:3},o=void 0,s={id:"\u4e00\u3001\u7f51\u7edc\u6a21\u5757/\u4e09\u3001\u8def\u7531\u8c03\u8bd5",title:"\u4e09\u3001\u8def\u7531\u8c03\u8bd5",description:"1\u5c0f\u9898",source:"@site/docs/\u4e00\u3001\u7f51\u7edc\u6a21\u5757/\u4e09\u3001\u8def\u7531\u8c03\u8bd5.md",sourceDirName:"\u4e00\u3001\u7f51\u7edc\u6a21\u5757",slug:"/\u4e00\u3001\u7f51\u7edc\u6a21\u5757/\u4e09\u3001\u8def\u7531\u8c03\u8bd5",permalink:"/docs/\u4e00\u3001\u7f51\u7edc\u6a21\u5757/\u4e09\u3001\u8def\u7531\u8c03\u8bd5",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"\u4e8c\u3001\u4ea4\u6362\u914d\u7f6e",permalink:"/docs/\u4e00\u3001\u7f51\u7edc\u6a21\u5757/\u4e8c\u3001\u4ea4\u6362\u914d\u7f6e"},next:{title:"\u56db\u3001\u65e0\u7ebf\u90e8\u7f72",permalink:"/docs/\u4e00\u3001\u7f51\u7edc\u6a21\u5757/\u56db\u3001\u65e0\u7ebf\u90e8\u7f72"}},p={},d=[{value:"1\u5c0f\u9898",id:"1\u5c0f\u9898",level:2},{value:"2\u5c0f\u9898",id:"2\u5c0f\u9898",level:2},{value:"3\u5c0f\u9898",id:"3\u5c0f\u9898",level:2},{value:"4\u5c0f\u9898",id:"4\u5c0f\u9898",level:2},{value:"5\u5c0f\u9898",id:"5\u5c0f\u9898",level:2},{value:"5.1 area 0 \u914d\u7f6e",id:"51-area-0-\u914d\u7f6e",level:3},{value:"5.2-5.3 area 1\u914d\u7f6e",id:"52-53-area-1\u914d\u7f6e",level:3},{value:"5.4-5.5 area 2\u914d\u7f6e",id:"54-55-area-2\u914d\u7f6e",level:3},{value:"6\u5c0f\u9898",id:"6\u5c0f\u9898",level:2},{value:"7\u5c0f\u9898",id:"7\u5c0f\u9898",level:2},{value:"8\u5c0f\u9898",id:"8\u5c0f\u9898",level:2},{value:"9\u5c0f\u9898",id:"9\u5c0f\u9898",level:2},{value:"10\u5c0f\u9898(\u5f85\u5b9a\u7a3f)",id:"10\u5c0f\u9898\u5f85\u5b9a\u7a3f",level:2}];function c(n){const e={br:"br",code:"code",h2:"h2",h3:"h3",img:"img",p:"p",pre:"pre",strong:"strong",...(0,r.R)(),...n.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e.h2,{id:"1\u5c0f\u9898",children:"1\u5c0f\u9898"}),"\n",(0,t.jsx)(e.p,{children:"1.\u914d\u7f6e\u6240\u6709\u8bbe\u5907\u4e3b\u673a\u540d\uff0c\u540d\u79f0\u89c1\u201c\u7f51\u7edc\u62d3\u6251\u201d\u3002\u542f\u7528\u6240\u6709\u8bbe\u5907\u7684 ssh \u670d \u52a1\uff0c\u7528\u6237\u540d\u548c\u660e\u6587\u5bc6\u7801\u5747\u4e3a admin\uff1b\u914d\u7f6e\u6240\u6709\u8bbe\u5907 ssh \u8fde\u63a5\u8d85\u65f6\u4e3a 9 \u5206\u949f\uff0cconsole \u8fde\u63a5\u8d85\u65f6\u4e3a 30 \u5206\u949f\u3002"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"\u8def\u7531\u5668RT1/RT2\nhostname + \u4e3b\u673a\u540d\n\nip sshd enable  #\u542f\u7528ssh\naaa authentication login default local #\u914d\u7f6eaaa\u767b\u5f55\u8ba4\u8bc1\u65b9\u5f0f\u4e3a\u672c\u5730\u7528\u6237\u4fe1\u606f\u8ba4\u8bc1\uff0c\u9ed8\u8ba4\u5df2\u914d\u7f6e\naaa authentication enable default none #\u914d\u7f6eaaa\u767b\u5f55\u8fdb\u5165enable\u8ba4\u8bc1\u65b9\u5f0f\u4e3a\u4e0d\u8ba4\u8bc1\uff0c\u9ed8\u8ba4\u5df2\u914d\u7f6e\n\nusername admin password 0 admin #\u914d\u7f6e\u7528\u6237\u540d\u5bc6\u7801\uff0c\u9ed8\u8ba4\u5df2\u914d\u7f6e\n\nip sshd timeout 540 #\u8fde\u63a5\u8d85\u65f6540\u79d2=9\u5206\u949f\n\nline console 0 #\u914d\u7f6econsole 0\nexec-timeout 1800 #\u8fde\u63a5\u8d85\u65f61800\u79d2=30\u5206\u949f\n\n\u9632\u706b\u5899FW1/FW2\nssh timeout 9 \nconsole timeout 30\n\n\n\u4ea4\u6362\u673a\u548cAC SW1/SW2/SW3/AC\nssh-server enable \nssh-server timeout 540 #ssh\u8fde\u63a5\u8d85\u65f6\n\nip http server\nusername admin privilege 15 password 0 admin #\u9ed8\u8ba4\u5df2\u914d\u7f6e\n\nauthentication line console login local #\u8fd9\u4e2a\u53ef\u4ee5\u4e0d\u7528\u914d\u7f6e\nexec-timeout 30 #console\u8d85\u65f6\n"})}),"\n",(0,t.jsx)(e.h2,{id:"2\u5c0f\u9898",children:"2\u5c0f\u9898"}),"\n",(0,t.jsx)(e.p,{children:"2.\u914d\u7f6e\u6240\u6709\u8bbe\u5907\u7684\u65f6\u533a\u4e3a GMT+08:00\u3002\u8c03\u6574 SW1 \u65f6\u95f4\u4e3a\u5b9e\u9645\u65f6\u95f4\uff0cSW1 \u914d\u7f6e\u4e3a ntp server\uff0c\u5176\u4ed6\u8bbe\u5907\u4e3a ntp client\uff0c\u8bf7\u6c42\u62a5\u6587\u65f6\u95f4\u95f4\u9694 1 \u5206\u949f\uff0c\u7528 SW1 Loopback1 IPv6 \u5730\u5740\u4f5c\u4e3a ntp server \u5730\u5740\u3002"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"\u4e00\u3001SW1\nclock timezone GMT add 8 0 #\u8bbe\u7f6e\u65f6\u533a\uff0cadd\u4e3a\u52a0 GMT\u4e3a\u65f6\u533a\u540d\nshow clock #\u67e5\u770b\u5f53\u524d\u65e5\u671f\u53ca\u65f6\u95f4\nclock set \u65f6:\u5206:\u79d2 \u5e74.\u6708.\u65e5 #\u4fee\u6539\u5f53\u524d\u7cfb\u7edf\u65e5\u671f\u53ca\u65f6\u95f4\uff0c\u6ce8\uff1a\u7279\u6743\u6a21\u5f0f\u4e0b\u8f93\u5165\nntp enable #\u542f\u7528NTP\u670d\u52a1\nntp-service refclock-master 1 #\u8bbe\u7f6e\u672c\u5730\u65f6\u949f\u4f5c\u4e3aNTP\u4e3b\u65f6\u949f\uff0c\u6240\u5904\u7684\u5c42\u6570\u4e3a1\uff0c\u6570\u5b57\u8d8a\u5c0f\u51c6\u786e\u5ea6\u8d8a\u9ad8\n\n\u4e8c\u3001SW2/SW3/AC\nclock timezone GMT add 8 0 \nntp enable #\u542f\u7528ntp\u670d\u52a1\nntp server 2001:10:4:1::1 #\u8bbe\u7f6eNTP\u670d\u52a1\u5668\u4e3a2001:10:4:1::1\nntp syn-interval 60 #\u540c\u6b65\u65f6\u95f4\u7684\u95f4\u9694\uff0c\u67d0\u4e9b\u7248\u672c\u7684AC\u8f93\u5165ntp syn-interval 00:01:00\n\n\u4e09\u3001FW1/FW2\nclock zone china \u6216\u8005clock zone GMT 8 0  #\u65f6\u533a\u8bbe\u7f6e\nntp enable\nntp server 2001:10:4:1::1\nntp query-interval 60\n\n\u56db\u3001RT1/RT2\ntime-zone GMT 8 0\nntp source loopback 1\nntp server 10.4.1.1\nntp server 2001:10:4:1::1\nntp query-interval 60\n\ndate  #\u67e5\u770b\u65f6\u95f4,\u5168\u5c40\u4e0b\n"})}),"\n",(0,t.jsx)(e.h2,{id:"3\u5c0f\u9898",children:"3\u5c0f\u9898"}),"\n",(0,t.jsx)(e.p,{children:"3.\u914d\u7f6e\u63a5\u53e3 IPv4 \u5730\u5740\u548c IPv6 \u5730\u5740\uff0c\u4e92\u8054\u63a5\u53e3 IPv6 \u5730\u5740\u7528\u672c\u5730\u94fe\u8def \u5730\u5740\u3002FW1 \u548c FW2 \u63a5\u53e3\u4ec5\u542f\u7528 ping \u529f\u80fd\u4ee5\u53ca Loopback1 \u7684 ssh \u529f\u80fd\u3002"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"int loopback1\nip address 10.4.1.1 255.255.255.255\nipv6 address 2001:10:4:1::1/128\n\nint loopback2\nip address 10.4.1.2 255.255.255.255\nipv6 address 2001:10:4:1::2/128\n\nint vlan11\nip address 10.4.11.1 255.255.255.0\nipv6 address 2001:10:4:11::1/64\n\nint vlan12\nip address 10.4.12.1 255.255.255.0\nipv6 address 2001:10:4:12::1/64\n\nint vlan13\nip address 10.4.13.1 255.255.255.0\nipv6 address 2001:10:4:13::1/64\n\nint vlan14\nip address 10.4.14.1 255.255.255.0\nipv6 address 2001:10:4:14::1/64\n\nint vlan15\nip address 10.4.15.1 255.255.255.0\nipv6 address 2001:10:4:15::1/64\n\nint vlan1019\nip address 10.4.255.14 255.255.255.252\n\nint vlan1020\nip address 10.4.255.5 255.255.255.252\n\nint vlan1023\nip address 10.4.255.1 255.255.255.252\n\nint vlan1024\nip address 10.4.255.1 255.255.255.252\n"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"int loopback1\nip address 10.4.2.1 255.255.255.255\nipv6 address 2001:10:4:2::1/128\n\nint vlan21\nip address 10.4.21.1 255.255.255.0\nipv6 address 2001:10:4:21::1/64\n\nint vlan22\nip address 10.4.22.1 255.255.255.0\nipv6 address 2001:10:4:22::1/64\n\nint vlan23\nip address 10.4.23.1 255.255.255.0\nipv6 address 2001:10:4:23::1/64\n\nint vlan24\nip address 10.4.24.1 255.255.255.0\nipv6 address 2001:10:4:24::1/64\n\nint vlan25\nip address 10.4.25.1 255.255.255.0\nipv6 address 2001:10:4:25::1/64\n\nint vlan1019\nip address 10.4.255.22 255.255.255.252\n\nint vlan1020\nip address 10.4.255.9 255.255.255.252\n\nint vlan1023\nip address 10.4.255.2 255.255.255.252\n\nint vlan1024\nip address 10.4.255.2 255.255.255.252\n"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"int loopback1\nip address 10.4.3.1 255.255.255.255\nipv6 address 2001:10:4:3::1/128\n\nint vlan31\nip address 10.4.31.1 255.255.255.0\nipv6 address 2001:10:4:31::1/64\n\nint vlan32\nip address 10.4.32.1 255.255.255.0\nipv6 address 2001:10:4:32::1/64\n\nint vlan33\nip address 10.4.33.1 255.255.255.0\nipv6 address 2001:10:4:33::1/64\n\nint vlan34\nip address 10.4.34.1 255.255.255.0\nipv6 address 2001:10:4:34::1/64\n\nint vlan1019\nip address 10.4.255.6 255.255.255.252\n\nint vlan1020\nip address 10.4.255.10 255.255.255.252\n\nint loopback2\nip address 10.4.3.2 255.255.255.255\nipv6 address 2001:10:4:3::2/128\n\nint vlan110\nip address 10.4.110.1 255.255.255.0\nipv6 address 2001:10:4:110::1/64\n\nint vlan120\nip address 10.4.120.1 255.255.255.0\nipv6 address 2001:10:4:120::1/64\n\nint vlan1015\nip address 10.4.255.30 255.255.255.252\n\nint vlan1017\nip address 200.200.200.1 255.255.255.252\n\nint vlan1018\nip address 200.200.200.5 255.255.255.252\n"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"int loopback1\nip address 10.4.4.1 255.255.255.255\nipv6 address 2001:10:4:4::1/128\n\nint loopback2\nip address 10.4.4.2 255.255.255.255\nipv6 address 2001:10:4:4::2/128\n\nint loopback3\nip address 10.4.4.3 255.255.255.255\nipv6 address 2001:10:4:4::3/128\nexit\n\nvlan 130;140;150\nvlan 1001\nswitchport interface ethernet 1/0/1\n\nint vlan1001\nip address 10.4.255.46 255.255.255.252\n\nint vlan130\nip address 10.4.130.1 255.255.255.0\nipv6 address 2001:10:4:130::1/64\n\nint vlan140\nip address 10.4.140.1 255.255.255.0\nipv6 address 2001:10:4:140::1/64\n\nint vlan150\nip address 10.4.150.1 255.255.255.0\nipv6 address 2001:10:4:150::1/64\n"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"int loopback1\nipv6 enable\nip address 10.4.5.1 255.255.255.255\nipv6 address 2001:10:4:5::1/128\n\nint loopback2\nipv6 enable\nip address 10.4.5.2 255.255.255.255\nipv6 address 2001:10:4:5::2/128\n\nint loopback3\nipv6 enable\nip address 10.4.5.3 255.255.255.255\nipv6 address 2001:10:4:5::3/128\n\nint loopback4\nipv6 enable\nip address 10.4.5.4 255.255.255.255\nipv6 address 2001:10:4:5::4/128\n\nint loopback5\nipv6 enable\nip address 10.4.5.5 255.255.255.255\nipv6 address 2001:10:4:5::5/128\n\nint g0/0\nipv6 enable\nip address 10.4.255.33 255.255.255.252\n\nint g0/1\nipv6 enable\nip address 10.4.255.18 255.255.255.252\n\nint g0/2\nipv6 enable\nip address 10.4.255.21 255.255.255.252\n\nint g0/3\nipv6 enable\nip address 10.4.255.25 255.255.255.252\n\nint s1/0\nipv6 enable\nip address 10.4.255.37 255.255.255.252\n\nint s1/1\nipv6 enable\nip address 10.4.255.41 255.255.255.252\n"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"int loopback1\nip address 10.4.6.1 255.255.255.255\nipv6 enable\nipv6 address 2001:10:4:6::1/128\n\nint loopback2\nip address 10.4.6.2 255.255.255.255\nipv6 enable\nipv6 address 2001:10:4:6::2/128\n\nint loopback3\nip address 10.4.6.3 255.255.255.255\nipv6 enable\nipv6 address 2001:10:4:6::3/128\n\nint loopback4\nip address 10.4.6.4 255.255.255.255\nipv6 enable\nipv6 address 2001:10:4:6::4/128\n\nint loopback5\nip address 10.4.6.5 255.255.255.255\nipv6 enable\nipv6 address 2001:10:4:6::5/128\n\nint tunnel4\nipv6 enable\nip address 10.4.255.50 255.255.255.252\n\nint g0/0\nipv6 enable\nip address 10.4.255.34 255.255.255.252\n\nint g0/1\nipv6 enable\nip address 10.4.255.45 255.255.255.252\n\nint g0/2\nipv6 enable\nip address 200.200.200.6 255.255.255.252\n\nint s1/0\nipv6 enable\nip address 10.4.255.42 255.255.255.252\n\nint s1/1\nipv6 enable\nip address 10.4.255.38 255.255.255.252\n"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"interface loopback1\nzone trust\nip address 10.4.7.1 255.255.255.255\nipv6 enable\nipv6 address 2001:10:4:7::1/128\n\ninterface loopback2\nzone trust\nip address 10.4.7.2 255.255.255.255\nipv6 enable\nipv6 address 2001:10:4:7::2/128\n\ninterface loopback3\nzone trust\nip address 10.4.7.3 255.255.255.255\nipv6 enable\nipv6 address 2001:10:4:7::3/128\n\ninterface loopback4\nzone trust\nip address 10.4.7.4 255.255.255.255\nipv6 enable\nipv6 address 2001:10:4:7::4/128\n\ninterface tunnel4\nzone VPNHub\nipv6 enable\nip address 10.4.255.49 255.255.255.252\n\ninterface e0/1\nzone trust\nipv6 enable\nip address 10.4.255.13 255.255.255.252\n\ninterface e0/2\nzone trust\nipv6 enable\nip address 10.4.255.17 255.255.255.252\n\ninterface e0/3\nzone untrust\nipv6 enable\nip address 200.200.200.2 255.255.255.252\n"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"interface loopback1\nzone trust\nip address 10.4.8.1 255.255.255.255\nipv6 enable\nipv6 address 2001:10:4:8::1/128\n\ninterface e0/1\nzone dmz\nipv6 enable\nip address 10.4.255.26 255.255.255.252\n\ninterface e0/2\nzone trust\nipv6 enable\nip address 10.4.255.29 255.255.255.252\n"})}),"\n",(0,t.jsx)(e.p,{children:"\u6ce8\u610f\uff1aIP\u914d\u7f6e\u5b8c\u4e4b\u540e\u5212\u7aef\u53e3\uff0c\u63a5\u7ebf"}),"\n",(0,t.jsx)(e.h2,{id:"4\u5c0f\u9898",children:"4\u5c0f\u9898"}),"\n",(0,t.jsx)(e.p,{children:"4.SW2 \u914d\u7f6e DHCPv4 \u548c DHCPv6\uff0c\u5206\u522b\u4e3a Vlan11\u3001Vlan21\u3001Vlan130\u3001 Vlan140\u3001Vlan150 \u5206\u914d\u5730\u5740\u3002DHCPv4 \u5730\u5740\u6c60\u540d\u79f0\u5206\u522b\u4e3a PC1\u3001PC2\u3001 AP1\u3001POOLv4-VLAN11\u3001POOLv4-VLAN21\u3001POOLv4-VLAN130\u3001POOLv4- VLAN140\u3001POOLv4-VLAN150\uff0c\u6392\u9664\u7f51\u5173\uff0cDNS \u4e3a 10.4.210.101 \u548c 10.4.220.101\u3002\nDHCPv6 \u5730\u5740\u6c60\u540d\u79f0\u5206\u522b\u4e3a POOLv6-VLAN11\u3001POOLv6- VLAN21\u3001POOLv6-VLAN130\u3001POOLv6-VLAN140\u3001POOLv6-VLAN150\uff0cDHCPv6 \u5730\u5740\u6c60\u7528\u7f51\u7edc\u524d\u7f00\u8868\u793a,\u6392\u9664\u7f51\u5173\uff0cDNS \u4e3a 2400:3200::1\u3002\nPC1 \u4fdd\u7559\u5730 \u5740 10.4.11.9\uff08DHCPv4 \u5730\u5740\u6c60\u540d\u79f0\u4e3a PC1\uff09\u548c 2001:10:4:11::9\uff0cPC2 \u4fdd\u7559\u5730\u574010.4.21.9\uff08DHCPv4 \u5730\u5740\u6c60\u540d\u79f0\u4e3a PC2\uff09\u548c2001:10:4:21::9\uff0c AP1 \u4fdd \u7559 \u5730 \u5740 10.4.130.9 \uff08 DHCPv4 \u5730 \u5740 \u6c60 \u540d \u79f0 \u4e3a AP1 \uff09 \u548c 2001:10:4:130::9\u3002\nSW1\u3001AC1 \u4e2d\u7ee7\u5730\u5740\u4e3a SW2 Loopback1 \u5730\u5740\u3002SW1 \u542f\u7528 DHCPv4 \u548c DHCPv6 snooping \u529f\u80fd\uff0c\u5982\u679c E1/0/1 \u8fde\u63a5 DHCPv4 \u670d \u52a1\u5668\uff0c\u5219\u5173\u95ed\u7aef\u53e3\uff0c\u6062\u590d\u65f6\u95f4\u4e3a 10 \u5206\u949f\u3002"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"\u5168\u5c40\u4e0b\u914d\u7f6e\nservice dhcp #\u542f\u52a8DHCP\u670d\u52a1\u5668\nservice dhcpv6 #\u542f\u52a8dhcpv6\u670d\u52a1\u5668\n\nVLAN11 \u914d\u7f6e\nip dhcp pool POOLv4-VLAN11\nnetwork-address 10.4.11.0 255.255.255.0\ndefault-router 10.4.11.1\ndns-server 10.4.210.101 10.4.220.102\nexit\n\nVLAN21 \u914d\u7f6e\nip dhcp pool POOLv4-VLAN21\nnetwork-address 10.4.21.0 255.255.255.0\ndefault-router 10.4.21.1\ndns-server 10.4.210.101 10.4.220.102\nexit\n\nVLAN130 \u914d\u7f6e\nip dhcp pool POOLv4-VLAN130\nnetwork-address 10.4.130.0 255.255.255.0\ndefault-router 10.4.130.1\ndns-server 10.4.210.101 10.4.220.10\nexit\n\nVLAN140 \u914d\u7f6e\nip dhcp pool POOLv4-VLAN140\nnetwork-address 10.4.140.0 255.255.255.0\ndefault-router 10.4.140.1\ndns-server 10.4.210.101 10.4.220.102\nexit\n\nVLAN150 \u914d\u7f6e\nip dhcp pool POOLv4-VLAN150\nnetwork-address 10.4.150.0 255.255.255.0\ndefault-router 10.4.150.1\ndns-server 10.4.210.101 10.4.220.102\nexit\n\n\u6392\u9664\u7f51\u5173\nip dhcp excluded-address 10.4.11.1\nip dhcp excluded-address 10.4.21.1\nip dhcp excluded-address 10.4.130.1\nip dhcp excluded-address 10.4.140.1\nip dhcp excluded-address 10.4.150.1\n"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"VLAN11 \u914d\u7f6e\nipv6 dhcp pool POOLv6-VLAN11\nnetwork-address 2001:10:4:11::1 64\nstatic-binding 2001:10:4:11::9 00-68-eb-9d-bb-7e\ndns-server 2400:3200::1\nexcluded-address 2001:10:4:11::1\nexit\n\nVLAN21 \u914d\u7f6e\nipv6 dhcp pool POOLv6-VLAN21\nnetwork-address 2001:10:4:21::1 64\nstatic-binding 2001:10:4:21::9 98-0e-24-c4-00-e1\ndns-server 2400:3200::1\nexcluded-address 2001:10:4:21::1\nexit\n\nVLAN130 \u914d\u7f6e\nipv6 dhcp pool POOLv6-VLAN130\nnetwork-address 2001:10:4:130::1 64\nstatic-binding 2001:10:4:130::9 00-03-0f-8a-1f-d0\nexcluded-address 2001:10:4:130::1\ndns-server 2400:3200::1\nexit\n\nVLAN140 \u914d\u7f6e\nipv6 dhcp pool POOLv6-VLAN140\nnetwork-address 2001:10:4:140::1 64\nexcluded-address 2001:10:4:140::1\ndns-server 2400:3200::1\nexit\n\nVLAN150 \u914d\u7f6e\nipv6 dhcp pool POOLv6-VLAN150\nnetwork-address 2001:10:4:150::1 64\nexcluded-address 2001:10:4:150::1\ndns-server 2400:3200::1\nexit\n\nSW2\u914d\u7f6e\nint vlan 21\nipv6 dhcp server POOLv6-VLAN21\nno ipv6 nd suppress-ra \nipv6 nd managed-config-flag\nipv6 nd other-config-flag\n\nint vlan 1023\nipv6 dhcp server POOLv6-VLAN11\nint vlan 1019\nipv6 dhcp server POOLv6-VLAN130\nipv6 dhcp server POOLv6-VLAN140\nipv6 dhcp server POOLv6-VLAN150\n\n\u5907\u6ce8\nno ipv6 nd suppress-ra #\u5173\u95ed\u7981\u6b62IPv6\u8def\u7531\u5668\u516c\u544a\n\u8fd9\u6761\u547d\u4ee4\u7981\u6b62\u8def\u7531\u5668\u6291\u5236\u53d1\u9001\u8def\u7531\u5e7f\u544a\uff08RA\uff09\u6d88\u606f\u3002\u8def\u7531\u5e7f\u544a\u662f\u7531\u8def\n\u7531\u5668\u53d1\u9001\u7ed9\u7f51\u7edc\u4e2d\u7684\u8bbe\u5907\uff0c\u7528\u4e8e\u901a\u77e5\u8bbe\u5907\u6709\u5173IPv6\u7f51\u7edc\u914d\u7f6e\u7684\u91cd\u8981\u4fe1\u606f\uff0c\u6bd4\u5982\u8def\u7531\u5668\u7684\u5730\u5740\u3001\u524d\u7f00\u957f\u5ea6\n\u7b49\u3002\u901a\u8fc7\u7981\u6b62\u6291\u5236\u8def\u7531\u5e7f\u544a\uff0c\u8bbe\u5907\u53ef\u4ee5\u83b7\u5f97\u6765\u81ea\u8def\u7531\u5668\u7684\u7f51\u7edc\u914d\u7f6e\u4fe1\u606f\u3002\n\nipv6 nd managed-config-flag #\u8fd9\u6761\u547d\u4ee4\u8bbe\u7f6e\u8bbe\u5907\u7684NDP\u7ba1\u7406\u914d\u7f6e\u6807\u5fd7\u3002\u5f53\u8bbe\u5907\u6536\u5230\u8def\u7531\u5e7f\u544a\u6d88\n\u606f\u65f6\uff0c\u5982\u679c\u8fd9\u4e2a\u6807\u5fd7\u88ab\u8bbe\u7f6e\u4e3a1\uff0c\u8bbe\u5907\u5c06\u4f7f\u7528DHCPv6\u6765\u83b7\u53d6IPv6\u5730\u5740\u914d\u7f6e\u3002\u8fd9\u610f\u5473\u7740\u8bbe\u5907\u5c06\u5411DHCP\nv6\u670d\u52a1\u5668\u53d1\u9001\u8bf7\u6c42\u4ee5\u83b7\u53d6IPv6\u5730\u5740\uff0c\u800c\u4e0d\u662f\u901a\u8fc7\u81ea\u52a8\u914d\u7f6e\u83b7\u53d6\u3002\n\nipv6 nd other-config-flag #\u65e0\u5730\u5740\u914d\u7f6e\u65f6\u4e3b\u673a\u5e94\u4f7f\u7528DHCPv6\u534f\u8bae\n\u8fd9\u6761\u547d\u4ee4\u8bbe\u7f6e\u8bbe\u5907\u7684NDP\u5176\u4ed6\u914d\u7f6e\u6807\u5fd7\u3002\u5f53\u8bbe\u5907\u6536\u5230\u8def\u7531\u5e7f\u544a\u6d88\u606f\u65f6\uff0c\u5982\u679c\u8fd9\u4e2a\u6807\u5fd7\u88ab\u8bbe\u7f6e\u4e3a1\uff0c\u8bbe\u5907\u5c06\n\u4f7f\u7528DHCPv6\u6765\u83b7\u53d6\u9664IPv6\u5730\u5740\u4e4b\u5916\u7684\u5176\u4ed6\u914d\u7f6e\uff0c\u6bd4\u5982DNS\u670d\u52a1\u5668\u5730\u5740\u3001NTP\u670d\u52a1\u5668\u5730\u5740\u7b49\u3002\u8fd9\u6837\uff0c\u8bbe\u5907\u53ef\n\u4ee5\u901a\u8fc7DHCPv6\u670d\u52a1\u5668\u83b7\u53d6\u5b8c\u6574\u7684IPv6\u7f51\u7edc\u914d\u7f6e\u3002\n\nSW1\u914d\u7f6e\nint vlan 11\nno ipv6 nd suppress-ra #\u7981\u6b62IPv6\u8def\u7531\u5668\u516c\u544a\nipv6 nd managed-config-flag #\u5730\u5740\u914d\u7f6e\u65f6\u4e3b\u673a\u5e94\u4f7f\u7528DHCPv6\u534f\u8bae\nipv6 nd other-config-flag #\u65e0\u5730\u5740\u914d\u7f6e\u65f6\u4e3b\u673a\u5e94\u4f7f\u7528DHCPv6\u534f\u8bae\n\nAC\u914d\u7f6e\nint vlan 130\nno ipv6 nd suppress-ra\nipv6 nd managed-config-flag\nipv6 nd other-config-flag\n\nint vlan 140\nno ipv6 nd suppress-ra\nipv6 nd managed-config-flag\nipv6 nd other-config-flag\n\nint vlan 150\nno ipv6 nd suppress-ra\nipv6 nd managed-config-flag\nipv6 nd other-config-flag\n"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"AP\u4fdd\u7559 \u914d\u7f6e\nip dhcp pool AP1\nhost 10.4.130.9 255.255.255.0\nhardware-address 00-03-0F-d9-bc-00\ndefault-router 10.4.130.1\ndns-server 10.4.210.101 10.4.220.101\nexit\n\nPC1\u4fdd\u7559 \u914d\u7f6e\nip dhcp pool PC1\nhost 10.4.11.9 255.255.255.0\nhardware-address 00-68-EB-9D-BB-7E\ndefault-router 10.4.11.1\ndns-server 10.4.210.101 10.4.220.101\nexit\n\nPC2\u4fdd\u7559 \u914d\u7f6e\nip dhcp pool PC2\nhost 10.4.21.9 255.255.255.0\nhardware-address 98-0E-24-C4-00-E1\ndefault-router 10.4.21.1\ndns-server 10.4.210.101 10.4.220.101\nexit\n"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"dns-server 2400:3200::1 #\u914d\u7f6edns\n"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"SW1 \u4e2d\u7ee7\u914d\u7f6e\nip forward-protocol udp bootps #\u8f6c\u53d167\u53f7\u7aef\u53e3udp\u62a5\u6587\nservice dhcp\nservice dhcpv6 \n\nint vlan 11\nip helper-address 10.4.2.1 #\u6307\u5b9a\u4e2d\u7ee7\u5730\u5740\nipv6 dhcp relay destination 2001:10:4:2::1 #\u6307\u5b9adhcpv6\u4e2d\u7ee7\u5730\u5740\nexit\n\nSW1 dhcp snooping \u914d\u7f6e\nip dhcp snooping enable #\u5168\u5c40\u542f\u7528dhcp\u4fa6\u542c\n\nsavi enable\nipv6 dhcp snooping remote-id option    \nipv6 dhcp snooping subscriber-id option\n\nint e1/0/1\nip dhcp snooping action shutdown recovery 600\n\nint e1/0/23  #\u56e0\u4e3a\u8fd9\u4e2a\u7aef\u53e3\u662f\u901a\u8fc7\u5730\u5740\u6c60\u6240\u5bf9\u5e94\u7f51\u7edc\u7684\u7aef\u53e3\nip dhcp snooping trust\nipv6 dhcp snooping trust\n\n\nAC \u4e2d\u7ee7\u914d\u7f6e\nip forward-protocol udp bootps #\u8f6c\u53d167\u53f7\u7aef\u53e3udp\u62a5\u6587\nservice dhcp\nservice dhcpv6 \n\nint vlan 130\nip helper-address 10.4.2.1\nipv6 dhcp relay destination 2001:10:4:2::1\n\nint vlan 140\nip helper-address 10.4.2.1\nipv6 dhcp relay destination 2001:10:4:2::1\n\nint vlan 150\nip helper-address 10.4.2.1\nipv6 dhcp relay destination 2001:10:4:2::1\n"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"no ip dhcpd enable  #\u5173\u95edRT1\u548cRT\u7684\u9ed8\u8ba4dhcp\u529f\u80fd\uff0c\u4e0d\u7136AP\u4f1a\u83b7\u53d6\u4e0d\u5230\u5730\u5740\n"})}),"\n",(0,t.jsxs)(e.p,{children:["\u91ca\u4e491\u3001dhcp\u4e2d\u7ee7\n\u5f53DHCP \u5ba2\u6237\u673a\u548cDHCP\u670d\u52a1\u5668\u4e0d\u5728\u540c\u4e00\u4e2a\u7f51\u6bb5\u65f6\uff0c\u7531DHCP\u4e2d\u7ee7\u4f20\u9012DHCP\u62a5\u6587\u3002\u589e \u52a0DHCP\u4e2d\u7ee7\u529f\u80fd\u7684\u597d\u5904\u662f\u4e0d\u5fc5\u4e3a\u6bcf\u4e2a\u7f51\u6bb5\u90fd\u8bbe\u7f6eDHCP\u670d\u52a1\u5668\uff0c\u540c\u4e00\u4e2aDHCP\u670d\u52a1\u5668\u53ef\u4ee5 \u4e3a\u5f88\u591a\u4e2a\u5b50\u7f51\u7684\u5ba2\u6237\u673a\u63d0\u4f9b\u7f51\u7edc\u914d\u7f6e\u53c2\u6570\uff0c\u65e2\u8282\u7ea6\u4e86\u6210\u672c\u53c8\u65b9\u4fbf\u4e86\u7ba1\u7406\u3002",(0,t.jsx)(e.br,{}),"\n","2\u3001dhcp snooping\nDHCP\u4fa6\u542c\u529f\u80fd\uff0c\u6307\u4ea4\u6362\u673a\u76d1\u6d4bDHCP CLIENT\u901a\u8fc7DHCP\u534f\u8bae\u83b7\u53d6IP\u7684\u8fc7\u7a0b\u3002\u5b83\u901a\u8fc7\u8bbe\u7f6e\u4fe1\u4efb\u7aef\u53e3\u548c\u975e\u4fe1\u4efb\u7aef\u53e3\uff0c\u6765\u9632\u6b62 DHCP \u653b\u51fb\u53ca\u79c1\u8bbe DHCP SERVER\u3002 \u6ce8\uff1adhcp snooping\u9700\u8981\u5728\u5ba2\u6237\u7aef\u6240\u8fde\u63a5\u7684\u8bbe\u5907\u914d\u7f6e\uff0c\u4e0d\u662fdhcp server\n\u914d\u7f6e\u601d\u8def\uff1a\n",(0,t.jsx)(e.img,{src:"https://cdn.nlark.com/yuque/0/2024/png/33622884/1710063012750-19ba03f1-2d4e-4bb7-88ea-94323626d603.png#averageHue=%23ebebeb&clientId=u1795e77b-f101-4&from=paste&height=215&id=uea107888&originHeight=269&originWidth=442&originalType=binary&ratio=1&rotation=0&showTitle=false&size=50986&status=done&style=none&taskId=u428fe1eb-1c98-4561-932e-f5690677db0&title=&width=353.6",alt:"image.png"})]}),"\n",(0,t.jsx)(e.h2,{id:"5\u5c0f\u9898",children:"5\u5c0f\u9898"}),"\n",(0,t.jsx)(e.p,{children:"5.\u6574\u4f53\u8981\u6c42\uff1aSW1\u3001SW2\u3001SW3\u3001RT1 \u4ee5\u592a\u94fe\u8def\u3001RT2 \u4ee5\u592a\u94fe\u8def\u3001FW1\u3001FW2\u3001AC1 \u4e4b \u95f4\u8fd0\u884c OSPFv2 \u548c OSPFv3 \u534f\u8bae\uff08\u8def\u7531\u6a21\u5f0f\u53d1\u5e03\u7f51\u7edc\u7528\u7f51\u7edc\u5730\u5740\uff0c\u6309\u7167 IP \u5730\u5740\u4ece\u5c0f\u5230\u5927\u7684\u987a\u5e8f\u53d1\u5e03\u3002\u6bcf\u4e2a prefix-list \u7684\u5e8f\u53f7\u4ece 5 \u5f00\u59cb\uff0c \u6309\u7167 IP \u5730\u5740\u4ece\u5c0f\u5230\u5927\u7684\u987a\u5e8f\u9012\u589e 5\uff1broute-map \u7684\u5e8f\u53f7\u4ece 10 \u5f00\u59cb\uff0c \u9012\u589e 10\uff0croute-map \u540d\u79f0\u4e0e prefix-list \u540d\u79f0\u76f8\u540c\u3002\u6bcf\u4e2a ACL \u5e8f\u53f7\u4ece10 \u5f00\u59cb\uff0c\u6309\u7167 IP \u5730\u5740\u4ece\u5c0f\u5230\u5927\u7684\u987a\u5e8f\u9012\u589e 10\uff09\u3002"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"1\u3001\u542f\u52a8OSPFv3\u534f\u8bae\nrouter IPv6 ospf 1 \n"})}),"\n",(0,t.jsxs)(e.p,{children:["ospf\u91ca\u4e491\u3001OSPF\u534f\u8bae\uff1a\u5373\u201c\u5f00\u653e\u6700\u77ed\u8def\u5f84\u4f18\u5148\u534f\u8bae\u201d\u3002\u5b83\u662f\u4e00\u79cd\u57fa\u4e8e\u94fe\u8def\u72b6\u6001\u7684\u81ea\u6cbb\u7cfb\u7edf\u5185\u90e8\u7684\u52a8\u6001\u8def\u7531\u534f\u8bae\uff0c\u5b83\u901a\u8fc7\u4e09\u5c42\u4ea4\u6362\u673a\u95f4\u4ea4\u6362\u94fe\u8def\u72b6\u6001\u4fe1\u606f\u6765\u7ec4\u6210\u4e00\u4e2a\u94fe\u8def\u72b6\u6001\u6570\u636e\u5e93\uff0c\u7136\u540e\u57fa\u4e8e\u8fd9\u4e2a\u6570\u636e\u5e93\u7528\u6700\u77ed\u8def\u5f84\u4f18\u5148\u7b97\u6cd5\u751f\u6210\u8def\u7531\u8868\u3002",(0,t.jsx)(e.br,{}),"\n","2\u3001OSPFv3\u534f\u8bae\uff1a\u5373\u201c\u5f00\u653e\u6700\u77ed\u8def\u5f84\u4f18\u5148\u534f\u8bae\u201d\u7b2c\u4e09\u7248\uff0c\u662fOSPF\u534f\u8bae \u7684IPv6\u7248\u672c\u3002\nIP\u8def\u7531\u7b56\u7565\u91ca\u4e49\u5728DCNOS\u4e2d\u63d0\u4f9b\u4e86route-map\u3001acl\u3001as-path\u3001community-list \u548c ip-prefix \u4e94\u79cd\u8fc7\u6ee4\u5668\u4f9b\u8def\u7531\u534f\u8bae\u5f15\u7528",(0,t.jsx)(e.br,{}),"\n","1\u3001route-map\uff1a\u7528\u4e8e\u63a7\u5236\u548c\u6539\u53d8\u8def\u7531\u4fe1\u606f\uff0c\u4e5f\u53ef\u4ee5\u63a7\u5236\u8def\u7531\u4e4b\u95f4\u7684\u91cd\u65b0\u5206\u914d\u3002 \u4e00\u4e2aroute-map \u5305\u542b\u4e00\u7cfb\u5217match\u548cset\u547d\u4ee4\uff0cmatch\u547d\u4ee4\u6307\u5b9a\u9700\u8981\u6ee1\u8db3\u7684\u6761\u4ef6\uff0cset\u547d\u4ee4\u5219\u6307\u660e\u4e86\u5f53match \u6761\u4ef6\u5339\u914d\u65f6\u8981\u91c7\u53d6\u7684\u76f8\u5e94\u52a8\u4f5c\u3002",(0,t.jsx)(e.br,{}),"\n","2\u3001ACL\uff08\u8bbf\u95ee\u63a7\u5236\u5217\u8868\uff09\uff1a \u4ea4\u6362\u673a\u5b9e\u73b0\u7684\u4e00\u79cd\u6570\u636e\u5305\u8fc7\u6ee4\u673a\u5236\uff0c\u901a\u8fc7\u5141\u8bb8\u6216\u62d2\u7edd\u7279\u5b9a\u7684 \u6570\u636e\u5305\u8fdb\u51fa\u7f51\u7edc\uff0c\u4ea4\u6362\u673a\u53ef\u4ee5\u5bf9\u7f51\u7edc\u8bbf\u95ee\u8fdb\u884c\u63a7\u5236\uff0c\u3002\u7528\u6237\u53ef\u4ee5\u57fa \u4e8e\u62a5\u6587\u4e2d\u7684\u7279\u5b9a\u4fe1\u606f\u5236\u5b9a\u4e00\u7ec4\u89c4\u5219\uff08rule\uff09\uff0c\u6bcf\u6761\u89c4\u5219\u90fd\u63cf\u8ff0\u4e86\u5bf9\u5339\u914d\u4e00\u5b9a\u4fe1\u606f\u7684\u6570\u636e\u5305\u6240 \u91c7\u53d6\u7684\u52a8\u4f5c\uff1a\u5141\u8bb8\u901a\u8fc7\uff08permit\uff09\u6216\u62d2\u7edd\u901a\u8fc7\uff08deny\uff09\u3002",(0,t.jsx)(e.br,{}),"\n","3\u3001prefix-list(\u524d\u7f00\u5217\u8868)\uff1a \u524d\u7f00\u5217\u8868ip-prefix \u7684\u4f5c\u7528\u7c7b\u4f3c\u4e8eacl\uff0c\u4f46\u6bd4\u5b83\u66f4\u4e3a\u7075\u6d3b\uff0c\u4e14\u66f4\u6613\u4e8e\u4e3a\u7528\u6237\u7406\u89e3\u3002ip-prefix \u5728\u5e94\u7528\u4e8e\u8def\u7531\u4fe1\u606f\u7684\u8fc7\u6ee4\u65f6\uff0c\u5176\u5339\u914d\u5bf9\u8c61\u4e3a\u8def\u7531\u4fe1\u606f\u7684\u76ee\u7684\u5730\u5740\u4fe1\u606f\u57df\u3002\n4\u3001as-path( \u81ea\u6cbb\u7cfb\u7edf\u8def\u5f84\u4fe1\u606f\u8bbf\u95ee\u5217\u8868)\uff1a\n5\u3001 community-list (\u56e2\u4f53\u5c5e\u6027\u5217\u8868)\uff1a\n\u5177\u4f53\u8981\u6c42\uff1a\n(1)\u3001SW1\u3001SW2\u3001SW3\u3001RT1\u3001RT2\u3001FW1 \u4e4b\u95f4 OSPFv2 \u548c OSPFv3 \u534f\u8bae\uff0cprocess 1\uff0carea 0\uff0c\u5206\u522b\u53d1\u5e03 Loopback1 \u5730\u5740\u8def\u7531\u548c\u4ea7\u54c1\u8def\u7531\uff0cFW1 \u901a\u544a type1 \u9ed8\u8ba4\u8def\u7531\u3002"]}),"\n",(0,t.jsx)(e.h3,{id:"51-area-0-\u914d\u7f6e",children:"5.1 area 0 \u914d\u7f6e"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"SW1 OSPFv2\u914d\u7f6e\nrouter ospf 1\n  ospf router-id 10.4.1.1       #router-id\u7528\u5404\u81ealoopback1\u7684\u5730\u5740\uff0cIP\u5730\u5740\u5206\u914d\u8868\u91cc\u6709\u63d0\u5230\n  network 10.4.1.1/32 area 0    #lop 1\u7f51\u7edc\n  network 10.4.11.0/24 area 0   #vlan 11\u7f51\u7edc\n  network 10.4.255.0/30 area 0  #vlan 1023/1024\u7f51\u7edc\uff0c\u4e0eSW2\u76f8\u8fde\n  network 10.4.255.4/30 area 0  #vlan 1020\u7f51\u7edc \u4e0eSW3 19\u76f8\u8fde\n  network 10.4.255.12/30 area 0 #vlan 1019\u7f51\u7edc \u4e0eFW1 1\u53e3\u76f8\u8fde\n\nSW1 OSPFv3\u914d\u7f6e\nrouter ipv6 ospf 1\n  router-id 10.4.1.1\n\ninterface Loopback1\n  ipv6 router ospf area 0 tag 1\nint vlan 11\n  ipv6 router ospf area 0 tag 1\ninterface Vlan1019\n  ipv6 router ospf area 0 tag 1\ninterface Vlan1020\n  ipv6 router ospf area 0 tag 1\ninterface Vlan1023\n  ipv6 router ospf area 0 tag 1\n\nSW2 OSPFv2\u914d\u7f6e\nrouter ospf 1\n  ospf router-id 10.4.2.1       #loopback1\u7684\u5730\u5740\n  network 10.4.2.1/32 area 0    #loopback1\u7684\u5730\u5740\n  network 10.4.21.0/24 area 0   #vlan 21\u7f51\u7edc\n  network 10.4.255.0/30 area 0  #vlan 1023/1024\u7f51\u7edc\uff0c\u4e0eSW1\u76f8\u8fde\n  network 10.4.255.8/30 area 0  #vlan 1020 \u4e0eSW3 20\u53e3\u76f8\u8fde\n  network 10.4.255.20/30 area 0 #vlan 1019 \u4e0eRT1 2\u53e3\u76f8\u8fde\n\nSW2 OSPFv3\u914d\u7f6e\nrouter ipv6 ospf 1\n  router-id 10.4.2.1\n\ninterface Loopback1\n  ipv6 router ospf area 0 tag 1\ninterface vlan21\n  ipv6 router ospf area 0 tag 1\ninterface Vlan1019\n  ipv6 router ospf area 0 tag 1\ninterface Vlan1020\n  ipv6 router ospf area 0 tag 1\ninterface Vlan1023\n  ipv6 router ospf area 0 tag 1\n\nSW3 OSPFv2\u914d\u7f6e\n router ospf 1\n ospf router-id 10.4.3.1       #loopback1\u7684\u5730\u5740\n network 10.4.3.1/32 area 0    #loopback1\u7684\u7f51\u7edc\n network 10.4.31.0/24 area 0   #vlan 31\u7f51\u7edc\n network 10.4.255.4/30 area 0  #vlan 1019\u7f51\u7edc \u4e0eSW1 20\u53e3\u76f8\u8fde\n network 10.4.255.8/30 area 0  #vlan 1020\u7f51\u7edc \u4e0eSW2 20\u53e3\u76f8\u8fde\n\nSW3 OSPFv3\u914d\u7f6e\nrouter ipv6 ospf 1\n  router-id 10.4.3.1\n\ninterface Loopback1\n  ipv6 router ospf area 0 tag 1\ninterface vlan31\n  ipv6 router ospf area 0 tag 1\ninterface Vlan1019\n  ipv6 router ospf area 0 tag 1\ninterface Vlan1020\n  ipv6 router ospf area 0 tag 1\n"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"RT1 OSPFv2\u914d\u7f6e\nrouter ospf 1\n  router-id 10.4.5.1                          #lo1\u5730\u5740\n  network 10.4.5.1 255.255.255.255 area 0     #lo1\u5730\u5740\n  network 10.4.255.16 255.255.255.252 area 0  #g0/1\u7f51\u7edc\uff0c\u4e0eFW1 2\u53e3\u76f8\u8fde\n  network 10.4.255.20 255.255.255.252 area 0  #g0/2\u7f51\u7edc\uff0c\u4e0eSW2 19\u53e3\u76f8\u8fde\n  network 10.4.255.32 255.255.255.252 area 0  #g0/0\u7f51\u7edc\uff0c\u4e0eRT2 0\u53e3\u76f8\u8fde\n\nRT1 OSPFv3\u914d\u7f6e\nipv6 unicast-routing #\u5141\u8bb8\u914d\u7f6e\u5355\u64ad\u8def\u7531\n\nrouter ospfv3 1\n  router-id 10.4.5.1\n\ninterface Loopback1\n  ipv6 enable #\u63a5\u53e3\u8f6c\u53d1IPV6\u6570\u636e\u5305\n  ipv6 ospf 1 area 0\ninterface GigaEthernet0/0\n  ipv6 enable #\u63a5\u53e3\u8f6c\u53d1IPV6\u6570\u636e\u5305\n  ipv6 ospf 1 area 0\ninterface GigaEthernet0/1\n  ipv6 enable #\u63a5\u53e3\u8f6c\u53d1IPV6\u6570\u636e\u5305\n  ipv6 ospf 1 area 0\ninterface GigaEthernet0/2\n  ipv6 enable #\u63a5\u53e3\u8f6c\u53d1IPV6\u6570\u636e\u5305\n  ipv6 ospf 1 area 0\n\n\nRT2 OSPFv2\u914d\u7f6e\nrouter ospf 1\n  router-id 10.4.6.1                          #lo1\u5730\u5740\n  network 10.4.6.1 255.255.255.255 area 0     #lo1\u7f51\u7edc\n  network 10.4.255.32 255.255.255.252 area 0  #g0/0\u7f51\u7edc\uff0c\u4e0eRT1 0\u53e3\u76f8\u8fde\n\nRT2 OSPFv3\u914d\u7f6e\nipv6 unicast-routing\nrouter ospfv3 1\n  router-id 10.4.6.1\ninterface Loopback1\n  ipv6 enable #\u63a5\u53e3\u8f6c\u53d1IPV6\u6570\u636e\u5305\n  ipv6 ospf 1 area 0\ninterface GigaEthernet0/0\n  ipv6 enable #\u63a5\u53e3\u8f6c\u53d1IPV6\u6570\u636e\u5305\n  ipv6 ospf 1 area 0\n"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"FW1 OSPFv2\u914d\u7f6e\n  ip vrouter trust-vr \n  router ospf 1\n    router-id 10.4.7.1                   #lo1\u5730\u5740\n    default-information originate type 1 #FW1 \u901a\u544a type1 \u9ed8\u8ba4\u8def\u7531\n    network 10.4.7.1/32 area 0           #lo1\u7f51\u7edc\n    network 10.4.255.12/30 area 0        #E0/1\u7f51\u7edc\uff0c\u4e0eSW1 19\u53e3\u76f8\u8fde\n    network 10.4.255.16/30 area 0        #E0/2\u7f51\u7edc\uff0c\u4e0eRT1 1\u53e3\u76f8\u8fde\n    exit\n    \nFW1 OSPFv3\u914d\u7f6e\nipv6 router ospf 1                                                                                   \nrouter-id 10.4.7.1                                                                                 \ndefault-information originate type 1 \nexit\nexit\n\ninterface loopback1\nipv6 enable \nipv6 ospf area 0 \ninterface e0/1\nipv6 enable\nipv6 ospf area 0 \ninterface e0/2\nipv6 enable\nipv6 ospf area 0 \n"})}),"\n",(0,t.jsx)(e.p,{children:"\u4ea4\u6362\u673a\u6d4b\u8bd5\nshow ip route ospf\nshow ipv6 route nsm ospf\n\u8def\u7531\u5668\u3001\u9632\u706b\u5899\u6d4b\u8bd5\nshow ip route ospf\nshow ipv6 route ospf\n(2)\u3001RT2 \u4e0e AC1 \u4e4b\u95f4\u8fd0\u884c OSPFv2 \u534f\u8bae\uff0cprocess 1\uff0carea 1 nssa nosummary\uff1bAC1 \u53d1\u5e03 Loopback1 \u5730\u5740\u8def\u7531\u3001\u7ba1\u7406\u3001\u4ea7\u54c1\u548c\u8425\u9500\u8def\u7531\uff0c\u7528 prefix-list \u91cd\u53d1\u5e03 Loopback3\uff0cprefix-list \u540d\u79f0\u4e3aAC1-Loopback3- IPv4\u3002\n(3)\u3001RT2 \u4e0e AC1 \u4e4b\u95f4\u8fd0\u884c OSPFv3 \u534f\u8bae\uff0cprocess 1\uff0carea 1 stub nosummary\uff1bAC1 \u53d1\u5e03 Loopback1 \u5730\u5740\u8def\u7531\u3001\u7ba1\u7406\u3001\u4ea7\u54c1\u548c\u8425\u9500\u8def\u7531\u3002"}),"\n",(0,t.jsx)(e.h3,{id:"52-53-area-1\u914d\u7f6e",children:"5.2-5.3 area 1\u914d\u7f6e"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"RT2 OSPFv2\u914d\u7f6e\nrouter ospf 1\n  network 10.4.255.44 255.255.255.252 area 1\n  area 1 nssa no-summary #\u6307\u5b9a\u533a\u57df1\u4e3anssn\u533a\u57df\uff08\u975e\u5b8c\u5168\u672b\u68a2\u533a\u57df\uff09\uff0c\u4e0d\u53d1\u9001\u6c47\u603b\u8def\u7531\u4fe1\u606f\u5230\u8fd9\u4e2a\u533a\u57df\n\nRT2 OSPFv3\u914d\u7f6e\nrouter ospfv3 1\narea 1 stub no-summary #\u6307\u5b9a\u533a\u57df1\u4e3astub\u533a\u57df\uff08\u672b\u68a2\u533a\u57df\uff09\uff0c\u7981\u6b62\u63a5\u53d7\u6765\u81ea\u5176\u4ed6\u533a\u57df\u7684\u5916\u90e8\u8def\u7531\u6c47\u603b\u4fe1\u606f\n\nint g0/1\nipv6 enable\nipv6 ospf 1 area 1\n"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"AC OSPFv2\u914d\u7f6e\nrouter ospf 1\n ospf router-id 10.4.4.1       #lo1\u5730\u5740\n area 1 nssa no-summary        #\u533a\u57df1\u4e0d\u53d1\u9001\u805a\u5408LSA\u5230NSSA\n network 10.4.4.1/32 area 1    #lo1\u7f51\u7edc\n network 10.4.130.0/24 area 1  #vlan 130\u7ba1\u7406\u7f51\u7edc\n network 10.4.140.0/24 area 1  #vlan 140\u4ea7\u54c1\u7f51\u7edc\n network 10.4.150.0/24 area 1  #vlan 150\u8425\u9500\u7f51\u7edc\n network 10.4.255.44/30 area 1 #vlan 1001\u4e92\u8054\u7f51\u7edc\uff0c\u4e0eRT2 1\u53e3\u76f8\u8fde\n redistribute connected route-map AC1-Loopback3-IPv4 #\u91cd\u53d1\u5e03 Loopback3\uff0cprefix-list \u540d\u79f0\u4e3aAC1-Loopback3- IPv4\u3002\n exit\n ip prefix-list AC1-Loopback3-IPv4 seq 5 permit 10.4.4.3/32 #\u5efa\u7acb\u524d\u7f00\u5217\u8868\uff0c\u5e8f\u5217\u53f7\u4e3a5\uff0c\u5141\u8bb8lo1\u901a\u8fc7\u3002\n route-map AC-Loopback3-IPv4 permit 10 #\u5b9a\u4e49route-map\uff0c\u540d\u79f0\u548c\u524d\u7f00\u5217\u8868\u76f8\u540c\uff0c\u5e8f\u5217\u53f7\u4e3a10\n  match ip address prefix-list AC-Loopback3-IPv4 #\u4e0b\u4e00\u6761\u5339\u914d\u540d\u79f0\u4e3aAC-Loopback3-IPv4\u7684\u524d\u7f00\u5217\u8868\n\n AC OSPFv3\u914d\u7f6e\nrouter ipv6 ospf 1\n  router-id 10.4.4.1\n  area 1 stub no-summary #\u6307\u5b9a\u533a\u57df1\u4e3astub\u533a\u57df\uff08\u672b\u68a2\u533a\u57df\uff09\uff0c\u7981\u6b62\u63a5\u53d7\u6765\u81ea\u5176\u4ed6\u533a\u57df\u7684\u5916\u90e8\u8def\u7531\u6c47\u603b\u4fe1\u606f\n \n int loop 1\n   ipv6 router ospf area 1 tag 1\n int vlan 1001\n   ipv6 router ospf area 1 tag 1\n int vlan 130\n   ipv6 router ospf area 1 tag 1\n int vlan 140\n   ipv6 router ospf area 1 tag 1\n int vlan 150\n   ipv6 router ospf area 1 tag 1\n"})}),"\n",(0,t.jsx)(e.p,{children:"(4)\u3001RT1\u3001FW2\u3001SW3 \u6a21\u62df\u529e\u4e8b\u5904\u4e4b\u95f4\u8fd0\u884c OSPFv2 \u548c OSPFv3 \u534f\u8bae\uff0cprocess 2\uff0carea 2\u3002SW3 \u6a21\u62df\u529e\u4e8b\u5904\u53d1\u5e03 Loopback2\u3001\u4ea7\u54c1\u548c\u8425\u9500\u8def\u7531\u3002FW2 \u53d1\u5e03 Loopback1 \u8def\u7531\u3002RT1 \u53d1\u5e03 Loopback4 \u8def\u7531\uff0c\u5411\u8be5\u533a\u57df\u901a\u544a type1 \u9ed8\u8ba4\u8def\u7531\uff1bRT1 \u7528 prefix-list \u5339\u914d SW3 \u6a21\u62df\u529e\u4e8b\u5904 Loopback2 \u548c\u4ea7 \u54c1\u8def\u7531\u3001FW2 Loopback1 \u8def\u7531(prefix-list \u540d\u79f0\u5206\u522b\u4e3a SW3-FW2-IPv4 \u548c SW3-FW2-IPv6)\u3001RT1 \u4e0e FW2 \u76f4\u8fde IPv4 \u8def\u7531(prefix-list \u540d\u79f0\u4e3a RT1-FW2-IPv4)\uff0c\u4ee5\u4e0a\u8def\u7531\u91cd\u53d1\u5e03\u5230 process 1\u3002\n(5)\u4fee\u6539 ospf cost \u4e3a 100\uff0c\u5b9e\u73b0 SW1 \u5206\u522b\u4e0e RT2\u3001FW2 \u4e4b\u95f4 IPv4 \u548c IPv6 \u4e92\u8bbf\u6d41\u91cf\u4f18\u5148\u901a\u8fc7 SW1-SW2-RT1 \u94fe\u8def\u8f6c\u53d1\uff0cSW2 \u8bbf\u95ee Internet IPv4 \u548c IPv6 \u6d41\u91cf\u4f18\u5148\u901a\u8fc7 SW2-SW1-FW1 \u94fe\u8def\u8f6c\u53d1\u3002"}),"\n",(0,t.jsx)(e.h3,{id:"54-55-area-2\u914d\u7f6e",children:"5.4-5.5 area 2\u914d\u7f6e"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"SW3 OSPFv2\u914d\u7f6e\nrouter ospf 2 vrf Office #\u5728\u540d\u4e3aOffice\u865a\u62df\u8def\u7531\u8f6c\u53d1\u5b9e\u4f8b\u4e2d\u8fd0\u884cospf\uff0c\u8fdb\u7a0b\u53f7\u4e3a2\n  ospf router-id 10.4.3.2        #\u529e\u4e8b\u5904lo2\u5730\u5740\n  network 10.4.3.2/32 area 2     #lo2\u7f51\u7edc\n  network 10.4.110.0/24 area 2   #vlan 110\u529e\u4e8b\u5904\u4ea7\u54c1\u7f51\u7edc\n  network 10.4.120.0/24 area 2   #vlan 120\u529e\u4e8b\u5904\u8425\u9500\u7f51\u7edc\n  network 10.4.255.28/30 area 2  #vlan 1015\u7f51\u7edc\uff0c\u4e0eFW2 2\u53e3\u76f8\u8fde\n\nSW3 OSPFv3\u914d\u7f6e\nrouter ipv6 ospf 2 vrf Office\n  router-id 10.4.3.2\n  exit\nint lo2\n  ipv6 router ospf area 2 tag 2\nint vlan 110\n  ipv6 router ospf area 2 tag 2\nint vlan 120\n  ipv6 router ospf area 2 tag 2\nint vlan 1015\n  ipv6 router ospf area 2 tag 2\n"})}),"\n",(0,t.jsx)(e.p,{children:"show ip route vrf Office #\u67e5\u8be2VPN\u5b9e\u4f8b\u8def\u7531\u4fe1\u606f"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"FW2 OSPFv2\u914d\u7f6e\nip vrouter trust-vr \n  router ospf 2\n    router-id 10.4.8.1                   #lo1\u5730\u5740\n    network 10.4.8.1/32 area 2           #lo1\u7f51\u7edc\n    network 10.4.255.24/30 area 2        #E0/1\u7f51\u7edc\uff0c\u4e0eRT1 3\u53e3\u76f8\u8fde\n    network 10.4.255.28/30 area 2        #E0/2\u7f51\u7edc\uff0c\u4e0eSW3 15\u53e3\u76f8\u8fde\n    exit\n\nFW2 OSPFv3\u914d\u7f6e\nipv6 router ospf 2\n  router-id 10.4.8.1 \n  exit\n  exit\n\ninterface loopback1\nipv6 enable\nipv6 ospf 2 area 2\nint e0/1\nipv6 enable\nipv6 ospf 2 area 2\ninterface e0/2\nipv6 enable\nipv6 ospf 2 area 2 \n"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"RT1 OSPFv2\u914d\u7f6e\nrouter ospf 2\n  router-id 10.4.5.4 #IP\u5730\u5740\u5206\u914d\u8868\u4e2d\u6709\u8bf4\u660e\uff0clo4\u4e3a\u529e\u4e8b\u5904\u4e0esw3\u76f8\u8fde\n  network 10.4.5.4 255.255.255.255 area 2\n  network 10.4.255.24 255.255.255.252 area 2  #g0/3\u7f51\u7edc\uff0c\u4e0eFW2 1\u53e3\u76f8\u8fde\n  default-information originate always metric-type 1 #\u901a\u544atype1\u9ed8\u8ba4\u8def\u7531\n\nRT1 OSPFv3\u914d\u7f6e\nrouter ospfv3 2 #\u8fdb\u5165OSPFv3\u8fdb\u7a0b2\n  router-id 10.4.5.4\n  default-information originate always metric-type 1\n  exit\n\nint lo4\n  ipv6 enable\n  ipv6 ospf 2 area 2\ninterface GigaEthernet0/3\n  ipv6 enable\n  ipv6 ospf 2 area 2\n\nRT1 \u914d\u7f6e\u524d\u7f00\u5217\u8868\nip prefix-list SW3-FW2-IPv4 seq 5 permit 10.4.3.2/32    #\u5339\u914dSW3 LO2\nip prefix-list SW3-FW2-IPv4 seq 10 permit 10.4.8.1/32   #\u5339\u914dFW2 LO1\nip prefix-list SW3-FW2-IPv4 seq 15 permit 10.4.110.0/24 #\u5339\u914dSW3 \u4ea7\u54c1v110\nip prefix-list RT1-FW2-IPv4 seq 20 permit 10.4.255.24/30 #\u5339\u914d\u76f4\u8fde\u8def\u7531\n\nipv6 prefix-list SW3-FW2-IPv6 seq 5 permit 2001:10:4:3::2/128  #SW3 LO2\nipv6 prefix-list SW3-FW2-IPv6 seq 10 permit 2001:10:4:8::1/128 #FW2 LO1\nipv6 prefix-list SW3-FW2-IPv6 seq 15 permit 2001:10:4:110::/64 #SW3 V110\n\n\nroute-map SW3-FW2-IPv4 10 permit\n  match ip address prefix-list SW3-FW2-IPv4\n  exit\n  \nroute-map SW3-FW2-IPv6 20 permit\n  match ipv6 address prefix-list SW3-FW2-IPv6\n  exit\n  \nroute-map RT1-FW2-IPv4 30 permit              \n  match ip address prefix-list RT1-FW2-IPv4 \n  exit\n\u91cd\u53d1\u5e03\nrouter ospf 1\n  redistribute ospf 2 route-map SW3-FW2-IPv4  \n  redistribute connect route-map RT1-FW2-IPv4\nexit\nrouter ospfv3 1\n  redistribute ospf 2 route-map SW3-FW2-IPv6\n"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"FW1\u914d\u7f6e\nint e0/2\nip ospf cost 100   #cost\u503c\u8d8a\u9ad8\uff0c\u4f18\u5148\u7ea7\u8d8a\u4f4e\uff0c\u9ed8\u8ba4\u662f1\nipv6 ospf cost 100\n\nRT1\u914d\u7f6e\nint e0/1\nip ospf cost 100\nipv6 ospf cost 100\n"})}),"\n",(0,t.jsxs)(e.p,{children:["\u672a\u4fee\u6539\u524d\uff0c\u5f00\u9500\u503c\u4e00\u6837\uff0c\u4f18\u5148\u7ea7\u4e5f\u4e00\u6837\n",(0,t.jsx)(e.img,{src:"https://cdn.nlark.com/yuque/0/2024/png/33622884/1714559335232-a771efc7-84d6-4b32-ba66-a564598990db.png#averageHue=%231d1207&clientId=ua51c271e-251b-4&from=paste&height=267&id=udb6cff47&originHeight=267&originWidth=1370&originalType=binary&ratio=1&rotation=0&showTitle=false&size=48922&status=done&style=none&taskId=u3f2a64e1-9d0c-4036-870a-d31eb07bba6&title=&width=1370",alt:"image.png"}),"\n\u4fee\u6539\u540e\uff0c\u7531\u4e8evlan1019\u7684cost\u503c\u53d8\u9ad8\uff0c\u6240\u4ee5\u53ea\u5269cost\u503c\u4f4e\u7684\u8def\u5f84\n",(0,t.jsx)(e.img,{src:"https://cdn.nlark.com/yuque/0/2024/png/33622884/1714559514821-8d6ae117-e287-4864-a598-1b2aef7131f7.png#averageHue=%231d1208&clientId=ua51c271e-251b-4&from=paste&height=166&id=u0abfeac8&originHeight=166&originWidth=1370&originalType=binary&ratio=1&rotation=0&showTitle=false&size=27946&status=done&style=none&taskId=u80138677-282d-447f-bcfc-a44b5a2c65f&title=&width=1370",alt:"image.png"}),"\n",(0,t.jsx)(e.img,{src:"https://cdn.nlark.com/yuque/0/2024/png/33622884/1714903182031-c2c97ddb-6d69-45e5-9115-7a5572e4714e.png#averageHue=%23080604&clientId=u2e762896-2608-4&from=paste&height=624&id=u91521070&originHeight=702&originWidth=1615&originalType=binary&ratio=1.125&rotation=0&showTitle=false&size=97573&status=done&style=none&taskId=uaf92b303-5a73-4414-9852-5ff3bf3e33f&title=&width=1435.5555555555557",alt:"image.png"}),"\n",(0,t.jsx)(e.img,{src:"https://cdn.nlark.com/yuque/0/2024/png/33622884/1714903070828-1681b482-0c2d-4c5f-92f8-1e464fa59a39.png#averageHue=%23080604&clientId=u2e762896-2608-4&from=paste&height=245&id=ub125f6ce&originHeight=276&originWidth=1615&originalType=binary&ratio=1.125&rotation=0&showTitle=false&size=41870&status=done&style=none&taskId=u19973ec0-d21f-4b86-85e1-f21a9c57a3a&title=&width=1435.5555555555557",alt:"image.png"})]}),"\n",(0,t.jsx)(e.h2,{id:"6\u5c0f\u9898",children:"6\u5c0f\u9898"}),"\n",(0,t.jsx)(e.p,{children:"6.RT1 \u4e32\u884c\u94fe\u8def\u3001RT2 \u4e32\u884c\u94fe\u8def\u3001FW1\u3001AC1 \u4e4b\u95f4\u5206\u522b\u8fd0\u884c RIP \u548c RIPng \u534f\u8bae\uff0c\u5206\u522b\u53d1\u5e03 Loopback2 \u5730\u5740\u8def\u7531\uff08FW1 \u7684 RIPng \u53d1\u5e03\u8def\u7531\u65f6\u7528\u63a5\u53e3\u540d\u79f0\uff09\u3002RT1 \u914d\u7f6e offset \u503c\u4e3a 3 \u7684\u8def\u7531\u7b56\u7565\uff0c\u5b9e\u73b0 RT1/S1/0- RT2/S1/1 \u4e3a\u4e3b\u94fe\u8def\uff0cRT1/S1/1-RT2/S1/0 \u4e3a\u5907\u4efd\u94fe\u8def\uff0cIPv4 \u7684 ACL \u540d \u79f0\u4e3a ACL-RIP-IPv4\uff0cIPv6 \u7684 ACL \u540d\u79f0\u4e3a ACL-RIP-IPv6\u3002RT1 \u7684 S1/0 \u4e0e RT2 \u7684 S1/1 \u4e4b\u95f4\u91c7\u7528 chap \u53cc\u5411\u8ba4\u8bc1\uff0c\u7528\u6237\u540d\u4e3a\u5bf9\u7aef\u8bbe\u5907\u540d\u79f0\uff0c\u5bc6\u7801\u4e3a Key-1122\u3002"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"RT1 \u914d\u7f6e\naaa authentication ppp default local #\u8bbe\u7f6eppp\u8ba4\u8bc1\uff0c\u9ed8\u8ba4\u4f7f\u7528\u672c\u5730\u7528\u6237\u548c\u5bc6\u7801\nusername RT2 password 0 Key-1122 \t\t #\u521b\u5efa\u7528\u6237\uff0c\u7528\u6237\u540d\u4e3aRT2\uff0c\u5bc6\u7801\u4e3aKey-1122\ninterface Serial1/0\n  physical-layer speed 2048000\n  encapsulation ppp  \t\t\t\t\t #\u63a5\u53e3\u5c01\u88c5\u534f\u8bae\u4e3appp\u534f\u8bae\n  ppp authentication chap  \t\t #\u4f7f\u7528chap\u534f\u8bae\u8fdb\u884c\u8ba4\u8bc1\n  ppp chap hostname RT1\t\t\t\t #\u8bbe\u7f6echap \u7528\u6237\u540d\n  ppp chap password 0 Key-1122 #\u8bbe\u7f6echap \u7528\u6237\u540d\u5bc6\u7801\n\ninterface Serial1/1\n  encapsulation ppp\t\t\t\t\t\t\t#\u4e0d\u914d\u8fd9\u4e2aipv6\u542f\u52a8\u4e0d\u4e86\n  physical-layer speed 2048000  #\u4e0d\u914d\u8fd9\u4e2a\u901a\u4fe1\u4e0d\u4e86\n\nRT2\u914d\u7f6e\naaa authentication ppp default local\nusername RT1 password 0 Key-1122\ninterface Serial1/1\nphysical-layer speed 2048000\nencapsulation ppp\n  ppp authentication chap \n  ppp chap hostname RT2\n  ppp chap password 0 Key-1122\n\ninterface Serial1/0\n  encapsulation ppp\n  physical-layer speed 2048000\n"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"ACL\u914d\u7f6e\nip access-list standard ACL-RIP-IPv4 #\u521b\u5efa\u6807\u51c6ACL\npermit any sequence 10\nexit\n\nipv6 access-list ACL-RIP-IPv6 \t\t\t\t#\u521b\u5efaipv6 ACL\npermit ipv6 any any sequence 10   \t\t#\u5141\u8bb8ipv6\u7684\u4efb\u4f55\u6e90\u524d\u7f00\u5230\u4efb\u4f55\u76ee\u7684\u524d\u7f00\uff0c\u5e8f\u5217\u53f7\u4e3a10\uff0c\u5f85\u9a8c\u8bc1\uff0c\u4e0a\u9762\u4e0d\u7528\u76ee\u7684\u5730\u5740\uff0c\u8fd9\u91cc\u4e3a\u4ec0\u4e48\u7528\uff1f\nexit\n\nRT1 \u914d\u7f6eRIP\nrouter rip 1 \t\t\t\t\t\t\t\t\t\t\t\t#\u542f\u52a8rip\uff0c\u8fdb\u7a0b\u53f7\u4e3a1\nversion 2 \t\t\t\t\t\t\t\t\t\t\t\t\t#\u6307\u5b9arip\u7684\u7248\u672c\u4e3a2\nno auto-summary\t\t\t\t\t\t\t\t\t\t \t#\u5173\u95ed\u81ea\u52a8\u6c47\u603b\noffset Serial1/1 in ACL-RIP-IPv4 3 \t#\u6dfb\u52a0RIP\u8def\u7531\u6743\u503c\u504f\u79fb\u91cf\uff0c\u5e94\u7528\u5728s1/1\u53e3in\u65b9\u5411\uff0cacl\u540d\u79f0\u4e3aACL-RIP-IPv4 \u504f\u79fb\u91cf\u503c\u4e3a3\noffset Serial1/1 out ACL-RIP-IPv4 3\t#\u6dfb\u52a0RIP\u8def\u7531\u6743\u503c\u504f\u79fb\u91cf\uff0c\u5e94\u7528\u5728s1/1\u53e3out\u65b9\u5411\uff0cacl\u540d\u79f0\u4e3aACL-RIP-IPv4 \u504f\u79fb\u91cf\u503c\u4e3a3\n\u4f1a\u6bd4s1/0\u591a3\u8df3\uff0c\u6240\u4ee5\u8def\u7531\u53ef\u4ee5\u4f1a\u4f18\u5148\u9009\u62e9s1/0\n\nRT1 \u914d\u7f6eRIPng\nrouter ripng 1\noffset Serial1/1 in ACL-RIP-IPv6 3 \noffset Serial1/1 out ACL-RIP-IPv6 3\n\n\u5e94\u7528RIP\u548cRIPng\u5230\u63a5\u53e3\ninterface Loopback2\nipv6 enable\nip rip 1 enable\nipv6 rip 1 enable\n\ninterface Serial1/0\nipv6 enable\nip rip 1 enable     #\u5728\u7aef\u53e3\u542f\u7528RIP \t\u8fdb\u7a0b\n ipv6 rip 1 enable\t#\u5728\u7aef\u53e3\u542f\u7528RIPng \u8fdb\u7a0b\n \ninterface Serial1/1\nipv6 enable\nip rip 1 enable\nipv6 rip 1 enable\n\ninterface GigaEthernet0/1\nipv6 enable\nip rip 1 enable\nipv6 rip 1 enable \n"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"RT2 \u914d\u7f6eRIP\nrouter rip 1 \nversion 2\nno auto-summary\nexit\n\nRT2 \u914d\u7f6eRIPng\nrouter ripng 1\nexit\n\n\u5e94\u7528RIP\u548cRIPng\u5230\u63a5\u53e3\n\ninterface Loopback2\nip rip 1 enable\nipv6 rip 1 enable\n\ninterface Serial1/0\nipv6 enable\nip rip 1 enable\nipv6 rip 1 enable \n\ninterface Serial1/1\nipv6 enable\nip rip 1 enable\nipv6 rip 1 enable \n\ninterface GigaEthernet0/1\nipv6 enable\nip rip 1 enable\nipv6 rip 1 enable\n"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:'ip vrouter "trust-vr"\nrouter rip\nnetwork 10.4.7.2/32\nnetwork 10.4.255.16 255.255.255.252\nexit\nipv6 router rip\nnetwork loopback2\nnetwork ethernet0/2\nexit\n'})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"router rip\nnetwork 10.4.4.2/32\nnetwork 10.4.255.44/30\nexit\nrouter ipv6 rip\nexit\n\ninterface Loopback2\nipv6 router rip\n\ninterface Vlan1001\nipv6 router rip\n"})}),"\n",(0,t.jsxs)(e.p,{children:["\u9a8c\u8bc1\n",(0,t.jsx)(e.img,{src:"https://cdn.nlark.com/yuque/0/2024/png/33622884/1714915673234-8156cb7b-2969-40e6-99d6-543f6cf4f180.png#averageHue=%23140e09&clientId=u2ae92484-be5c-4&from=paste&height=378&id=ufe6be1c2&originHeight=425&originWidth=1160&originalType=binary&ratio=1.125&rotation=0&showTitle=false&size=54919&status=done&style=none&taskId=u8e84a321-dfee-467c-9a3f-76037979503&title=&width=1031.111111111111",alt:"image.png"}),"\n",(0,t.jsx)(e.img,{src:"https://cdn.nlark.com/yuque/0/2024/png/33622884/1714915647541-a91a7480-6b8a-4340-87bd-dbd8bb6e95d4.png#averageHue=%23180e06&clientId=u2ae92484-be5c-4&from=paste&height=201&id=u0be82b0e&originHeight=226&originWidth=1160&originalType=binary&ratio=1.125&rotation=0&showTitle=false&size=35203&status=done&style=none&taskId=u3e96e54c-3d6b-411f-8c48-d40ca379b94&title=&width=1031.111111111111",alt:"image.png"}),"\n",(0,t.jsx)(e.img,{src:"https://cdn.nlark.com/yuque/0/2024/png/33622884/1714921019278-72978ccc-d467-4dcb-bcf6-81fa6de8f2a7.png#averageHue=%230b0805&clientId=u401221bd-813d-4&from=paste&height=367&id=u08245404&originHeight=413&originWidth=1117&originalType=binary&ratio=1.125&rotation=0&showTitle=false&size=36929&status=done&style=none&taskId=ua6b909c6-7bfd-4166-95e0-ddc76052351&title=&width=992.8888888888889",alt:"image.png"})]}),"\n",(0,t.jsx)(e.h2,{id:"7\u5c0f\u9898",children:"7\u5c0f\u9898"}),"\n",(0,t.jsx)(e.p,{children:"7.RT1 \u4ee5\u592a\u94fe\u8def\uff08\u7269\u7406\u901f\u7387\u4e3a 2048000\uff09\u3001RT2 \u4ee5\u592a\u94fe\u8def\u3001FW1 \u4e4b\u95f4\u8fd0 \u884c ISIS \u534f\u8bae\uff0cinstance 1\uff0c\u5b9e\u73b0 Loopback3 \u4e4b\u95f4 IPv4 \u4e92\u901a\u548c IPv6 \u4e92\u901a\u3002RT1\u3001RT2\u3001FW1 \u7684 NET \u5206\u522b\u4e3a 10.0000.0000.0005.00\u3001 10.0000.0000.0006.00 \u3001 10.0000.0000.0007.00 \uff0c \u8def \u7531 \u5668 \u7c7b \u578b \u662f Level-2\uff0c\u4e92\u8054\u63a5\u53e3\u7f51\u7edc\u7c7b\u578b\u4e3a\u70b9\u5230\u70b9\u3002"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"ISIS\u534f\u8bae\u5373\u4e2d\u95f4\u7cfb\u7edf\u5230\u4e2d\u95f4\u7cfb\u7edf\uff0c\u662f\u4e00\u79cd\u57fa\u4e8e\u94fe\u8def\u72b6\u6001\u5e76\u4f7f\u7528\u6700\u77ed\u8def\u5f84\u4f18\u5148\u7b97\u6cd5\u8fdb\u884c\u8def\u7531\u7684IGP\uff08\u5185\u90e8\u7f51\u5173\uff09\u534f\u8bae\n"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"RT1 \u914d\u7f6eISIS\u8def\u7531\u534f\u8bae\nrouter isis 1 \t\t\t\t\t\t\t\t #\u8fdb\u5165ISIS\u8fdb\u7a0b1\n  is-type level-2 \t\t\t\t\t\t #\u8bbe\u7f6e\u8def\u7531\u5668\u7c7b\u578b\u4e3alevel-2\n  net 10.0000.0000.0005.00 \t\t #\u8bbe\u7f6enet\ninterface GigaEthernet0/0\t\t\t #\u4e0eRT2\u76f8\u8fde\n  ip router isis 1  \t\t\t\t\t #\u542f\u52a8Ipv4 isis \u8fdb\u7a0b1\n  ipv6 router isis 1\t\t\t\t\t #\u542f\u52a8Ipv6 isis \u8fdb\u7a0b1\n  isis network point-to-point  #\u8bbe\u7f6eISIS\u7684\u7f51\u7edc\u7c7b\u578b\u4e3a\u70b9\u5230\u70b9\n\ninterface G0/1\t\t\t\t\t\t\t\t #\u4e0eFW1\u76f8\u8fde\n  ipv6 enable\n  ip router isis 1\n  ipv6 router isis 1\n  isis network point-to-point\n\ninterface Loopback3\n  ipv6 enable\n  ip router isis 1\n  ipv6 router isis 1\n  \n"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"RT2 \u914d\u7f6eISIS\u8def\u7531\u534f\u8bae\nrouter isis 1 \t\t\t\t\t\t\t\t #\u8fdb\u5165ISIS\u8fdb\u7a0b1\n  is-type level-2 \t\t\t\t\t\t #\u8bbe\u7f6e\u8def\u7531\u5668\u7c7b\u578b\u4e3alevel-2\n  net 10.0000.0000.0006.00 \t\t #\u8bbe\u7f6enet\ninterface GigaEthernet0/0\t\t\t #\u4e0eRT1\u76f8\u8fde\n  ipv6 enable\n  ip router isis 1  \t\t\t\t\t #\u5f00\u542fIpv4 isis\n  ipv6 router isis 1\n  isis network point-to-point  #\u8bbe\u7f6eISIS\u7684\u7f51\u7edc\u7c7b\u578b\u4e3a\u70b9\u5230\u70b9\n\ninterface Loopback3\n  ip router isis 1\n  ipv6 router isis 1\n\n"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:' ip vrouter "trust-vr"\nrouter isis\n    net 10.0000.0000.0007.00\n    is-type level-2-only\nexit\ninterface ethernet0/2\n  isis enable\n  isis ipv6 enable\n  isis network point-to-point\n  \ninterface loopback3\n  ipv6 enable\n  isis enable\n  isis ipv6 enable\n'})}),"\n",(0,t.jsxs)(e.p,{children:["\u9a8c\u8bc1",(0,t.jsx)(e.strong,{children:"\u67e5\u770bisis\u7684\u90bb\u5c45"}),"\n",(0,t.jsx)(e.strong,{children:"show isis neighbors"}),"\n",(0,t.jsx)(e.img,{src:"https://cdn.nlark.com/yuque/0/2024/png/33622884/1711530270541-e52b8cdf-af9d-427b-a7fc-6d30760c850a.png#averageHue=%2315120f&clientId=ub0e526e7-29f8-4&from=paste&height=193&id=u0ec2a9e0&originHeight=193&originWidth=1276&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=29350&status=done&style=none&taskId=uc9f23e79-82ae-41da-a291-b3b2dbbed58&title=&width=1276",alt:"image.png"}),"\n",(0,t.jsx)(e.img,{src:"https://cdn.nlark.com/yuque/0/2024/png/33622884/1711530344994-983a4fe2-7f5c-44ef-8676-d5073046ab4c.png#averageHue=%230c0a08&clientId=ub0e526e7-29f8-4&from=paste&height=162&id=ua4ee6d76&originHeight=162&originWidth=1164&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=20860&status=done&style=none&taskId=u32d741cb-b0cd-4ee0-b470-b0f94be3f56&title=&width=1164",alt:"image.png"}),"\n",(0,t.jsx)(e.img,{src:"https://cdn.nlark.com/yuque/0/2024/png/33622884/1711530314834-e1c805be-4b7c-476d-9012-ef7eed39c71b.png#averageHue=%23100b06&clientId=ub0e526e7-29f8-4&from=paste&height=100&id=u4fc70337&originHeight=100&originWidth=1245&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=16801&status=done&style=none&taskId=u99f13816-b737-4f9e-85ac-f086029f2c9&title=&width=1245",alt:"image.png"}),"\n",(0,t.jsx)(e.strong,{children:"RT1"}),"\n",(0,t.jsx)(e.img,{src:"https://cdn.nlark.com/yuque/0/2024/png/33622884/1711525923844-9eba1a65-05be-4b89-82c9-1992028ddb87.png#averageHue=%230e0a07&clientId=ub0e526e7-29f8-4&from=paste&height=160&id=VT0Lk&originHeight=160&originWidth=1400&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=27157&status=done&style=none&taskId=u8aaae9eb-eba8-49f4-8e4a-2ee4dbbde1c&title=&width=1400",alt:"image.png"}),"\n",(0,t.jsx)(e.img,{src:"https://cdn.nlark.com/yuque/0/2024/png/33622884/1711525947313-4f4b8ede-cc45-4c92-bf84-64ce19f50e92.png#averageHue=%23160e08&clientId=ub0e526e7-29f8-4&from=paste&height=161&id=ueb65bfb7&originHeight=161&originWidth=1219&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=31535&status=done&style=none&taskId=u0005ce68-6f40-4bb1-b87a-04e7ccce03b&title=&width=1219",alt:"image.png"}),"\n",(0,t.jsx)(e.strong,{children:"RT2"}),"\n",(0,t.jsx)(e.img,{src:"https://cdn.nlark.com/yuque/0/2024/png/33622884/1711525887714-359ae990-c592-44d0-8802-2d9ae26781b3.png#averageHue=%230d0a07&clientId=ub0e526e7-29f8-4&from=paste&height=197&id=u70827a62&originHeight=197&originWidth=1381&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=31163&status=done&style=none&taskId=uf5cc5b70-e3c4-48b1-8606-1e47a4c5fe4&title=&width=1381",alt:"image.png"}),"\n",(0,t.jsx)(e.img,{src:"https://cdn.nlark.com/yuque/0/2024/png/33622884/1711526087274-3ef1bef0-29db-41b3-a74e-9fc4b5a1004e.png#averageHue=%23160f08&clientId=ub0e526e7-29f8-4&from=paste&height=163&id=ub64674f6&originHeight=163&originWidth=1222&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=32050&status=done&style=none&taskId=u6d4956df-ffef-4653-be8d-994bc0f87e9&title=&width=1222",alt:"image.png"}),"\n",(0,t.jsx)(e.strong,{children:"FW1"}),"\n",(0,t.jsx)(e.img,{src:"https://cdn.nlark.com/yuque/0/2024/png/33622884/1711526123131-f6e6dfc8-d5de-40c1-82be-0ebd0396bb0d.png#averageHue=%23130f0b&clientId=ub0e526e7-29f8-4&from=paste&height=386&id=u4b308c1f&originHeight=386&originWidth=1155&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=58096&status=done&style=none&taskId=u5441b9e9-54cb-4c3c-b77d-5947362f707&title=&width=1155",alt:"image.png"}),"\n",(0,t.jsx)(e.img,{src:"https://cdn.nlark.com/yuque/0/2024/png/33622884/1711526152843-2433036d-3883-4217-98c9-43ce45756e5a.png#averageHue=%23120d09&clientId=ub0e526e7-29f8-4&from=paste&height=380&id=u22a92687&originHeight=380&originWidth=1066&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=50822&status=done&style=none&taskId=u09176260-723e-4439-bf42-ea202e821a4&title=&width=1066",alt:"image.png"})]}),"\n",(0,t.jsx)(e.h2,{id:"8\u5c0f\u9898",children:"8\u5c0f\u9898"}),"\n",(0,t.jsxs)(e.p,{children:["8.SW1\u3001SW2\u3001SW3\u3001RT1\u3001RT2 \u4e4b\u95f4\u8fd0\u884c BGP \u534f\u8bae\uff0cSW1\u3001SW2\u3001RT1 AS \u53f7 65001\u3001RT2 AS \u53f7 65002\u3001SW3 AS \u53f7 65003\u3002 SW1\u3001SW2\u3001SW3\u3001RT1\u3001RT2 \u4e4b\u95f4\u901a\u8fc7 Loopback1 \u5efa\u7acb IPv4 \u548c IPv6 BGP \u90bb\u5c45\u3002 SW1 \u548c SW2 \u4e4b\u95f4\u8d22\u52a1\u901a\u8fc7 Loopback2 \u5efa\u7acb IPv4 \u548c IPv6 BGP \u90bb\u5c45\u3002SW1 \u548cSW2\u7684Loopback2 IPv4\u4e92\u901a\u91c7\u7528\u9759\u6001\u8def\u7531\uff1bIPv6\u4e92\u901a\u91c7\u7528OSPFv3\uff0c process 2\uff0carea 2\u3002 SW1\u3001SW2\u3001SW3 \u5206\u522b\u53ea\u53d1\u5e03\u8425\u9500\u3001\u6cd5\u52a1\u3001\u4eba\u529b\u3001\u8d22\u52a1\u7b49 IPv4 \u548c IPv6  \u8def\u7531\uff1bRT1 \u53d1\u5e03\u529e\u4e8b\u5904\u8425\u9500 IPv4 \u548c IPv6 \u8def\u7531\u5230 BGP\uff1bRT2 \u53d1\u5e03\u5206\u516c \u53f8\u8425\u9500 IPv4 \u548c IPv6 \u8def\u7531\u5230 BGP\u3002 SW3 \u8425\u9500\u5206\u522b\u4e0e SW1 \u548c SW2 \u8425\u9500 IPv4 \u548c IPv6 \u4e92\u8bbf\u4f18\u5148\u5728 SW1-SW3 \u94fe\u8def\u8f6c\u53d1\uff1bSW3 \u6cd5\u52a1\u53ca\u4eba\u529b\u5206\u522b\u4e0e SW1 \u548c SW2 \u6cd5\u52a1\u53ca\u4eba\u529b IPv4 \u548c IPv6 \u4e92\u8bbf\u4f18\u5148\u5728 SW2-SW3 \u94fe\u8def\u8f6c\u53d1\uff0c\u4e3b\u5907\u94fe\u8def\u76f8\u4e92\u5907\u4efd\uff1b\u5728 SW3 \u4e0a\u7528 prefix-list\u3001route-map \u548c BGP \u8def\u5f84\u5c5e\u6027\u8fdb\u884c\u9009\u8def\uff0c\u65b0\u589e AS 65000\u3002\uff08SW1 \u548c SW2 \u8425\u9500\u8def\u7531 prefix-list \u540d\u79f0\u5206\u522b\u4e3a SW1-SW2-YX-IPv4 \u548c SW1-SW2-YX-IPv6\u3001\u6cd5\u52a1\u53ca\u4eba\u529b\u8def\u7531 prefix-list \u540d\u79f0\u5206\u522b\u4e3a SW1- SW2-FWRL-IPv4 \u548c SW1-SW2-FWRL-IPv6\uff1bSW3 \u8425\u9500\u8def\u7531 prefix-list \u540d \u79f0\u5206\u522b\u4e3aSW3-YX-IPv4 \u548c SW3-YX-IPv6\u3001\u6cd5\u52a1\u53ca\u4eba\u529b\u8def\u7531prefix-list \u540d\u79f0\u5206\u522b\u4e3a SW3-FWRL-IPv4 \u548c SW3-FWRL-IPv6\uff09\n\u7ea2\u8272\u90e8\u5206\n",(0,t.jsx)(e.strong,{children:"\u65b9\u6848\u4e00"})]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"SW1\nIPV4\nrouter bgp 65001  \t\t\t#\u8fdb\u5165BGP\uff0c\u81ea\u6cbb\u7cfb\u7edf\u53f7\u4e3a65001\uff0c1\u53f0\u8bbe\u5907\u53ea\u80fd\u5b58\u5728\u4e00\u4e2a\u81ea\u6cbb\u533a\u57df\n bgp router-id 10.4.1.1 #\u8bbe\u7f6eBGP router-id\uff0cIP\u5730\u5740\u5206\u914d\u8868\u91cc\u6709\u8bf4\u660e\n \n neighbor 10.4.2.1 remote-as 65001 \t\t\t\t\t#\u4e0eSW2\u5efa\u7acb\u90bb\u5c45\uff0c\u90bb\u5c45\u5730\u5740\u4e3a\u9898\u76ee\u8981\u6c42\u7684loop1\u5730\u5740\uff0c\u662f\u5bf9\u65b9\u7684loop1\u5730\u5740\uff0c65001\u662f\u5bf9\u65b9\u7684AS\u53f7\n neighbor 10.4.2.1 update-source Loopback1  #\u5efa\u7acb\u90bb\u5c45\u7684\u8def\u7531\u66f4\u65b0\u6e90\u4e3aloop1\n neighbor 10.4.2.1 next-hop-self  \t\t\t\t\t#SW1\u548cSW2\u5c5e\u4e8e\u540c\u4e00\u81ea\u6cbb\u533a\u57df\uff0c\u662fIBGP\u73af\u5883\uff0c\u9700\u8981\u624b\u52a8\u6307\u5b9a\u4e0b\u4e00\u8df3\uff0c\u4e0d\u540c\u81ea\u6cbb\u533a\u57df\u662fEBGP\u73af\u5883\uff0c\u4e0b\u4e00\u8df3\u4f1a\u81ea\u52a8\u6307\u5411\u6765\u6e90\u90bb\u5c45\n \n neighbor 10.4.3.1 remote-as 65003  \t\t\t\t#\u4e0eSW3\u5efa\u7acb\u90bb\u5c45\uff0cSW3\u7684\u81ea\u6cbb\u533a\u57df\u53f7\u4e3a65003\uff0c\u8fd9\u91cc\u662fEBGP\u73af\u5883\n neighbor 10.4.3.1 ebgp-multihop 255 \t\t\t\t#\u5efa\u7acbEbgp\u90bb\u5c45\u5173\u7cfb\uff0c\u8df3\u6570\u4e3a\u6700\u5927255\uff0c\u8fd9\u6761\u547d\u4ee4\u53ef\u4ee5\u8ba9\u4e0d\u540c\u7f51\u6bb5\u4e4b\u95f4\u5efa\u7acbEBGP\u90bb\u5c45\n neighbor 10.4.3.1 update-source Loopback1  #\u6307\u5b9a\u8def\u7531\u66f4\u65b0\u6e90\u4e3aloop1\u5730\u5740\n \n neighbor 10.4.5.1 remote-as 65001          #\u4e0eRT1\u5efa\u7acb\u90bb\u5c45\uff0c\u8fd9\u53c8\u662f\u4e00\u4e2aIBGP\u73af\u5883\n neighbor 10.4.5.1 update-source Loopback1  #\u66f4\u65b0\u6e90\n neighbor 10.4.5.1 next-hop-self\t\t\t\t    #\u6307\u5b9a\u4e0b\u4e00\u8df3\n \n neighbor 10.4.6.1 remote-as 65002 \t\t\t\t\t#\u4e0eRT2\u5efa\u7acb\u90bb\u5c45\uff0c\u8fd9\u662f\u4e00\u4e2aEBGP\u73af\u5883\n neighbor 10.4.6.1 ebgp-multihop 255        #\u5efa\u7acbEBGP\u90bb\u5c45\u5173\u7cfb\n neighbor 10.4.6.1 update-source Loopback1  #\u66f4\u65b0\u6e90\n\n IPV6\n neighbor 2001:10:4:2::1 remote-as 65001          #\u4e0eSW2\u5efa\u7acbIPV6\u4e0b\u7684Ibgp\u90bb\u5c45\u5173\u7cfb\uff0c\u547d\u4ee4\u548cipv4\u4e00\u6837\uff0c\u53ea\u662f\u5730\u5740\u53d8\u6210\u4e86IPV6\n neighbor 2001:10:4:2::1 update-source Loopback1  #\u66f4\u65b0\u6e90\n no neighbor 2001:10:4:2::1 activate              #\u7981\u7528\u8def\u7531\u5668\u4e4b\u95f4\u7684IPv6 BGP\u90bb\u5c45\u5173\u7cfb\n\n neighbor 2001:10:4:3::1 remote-as 65003         #\u4e0eSW3\u5efa\u7acbIPV6\u4e0b\u7684Ebgp\u90bb\u5c45\u5173\u7cfb\n neighbor 2001:10:4:3::1 ebgp-multihop 255       #\u8ba9\u4e0d\u540c\u7f51\u6bb5\u4e4b\u95f4\u53ef\u4ee5\u5efa\u7acbEBGP\u90bb\u5c45\n neighbor 2001:10:4:3::1 update-source Loopback1 #\u66f4\u65b0\u6e90\n no neighbor 2001:10:4:3::1 activate             #\u7981\u7528\u8def\u7531\u5668\u4e4b\u95f4\u7684IPv6 BGP\u90bb\u5c45\u5173\u7cfb\n \n neighbor 2001:10:4:5::1 remote-as 65001\t\t\t\t #\u4e0eRT1\u5efa\u7acbIPV6\u4e0b\u7684Ibgp\u90bb\u5c45\u5173\u7cfb \n neighbor 2001:10:4:5::1 update-source Loopback1 #\u66f4\u65b0\u6e90\n no neighbor 2001:10:4:5::1 activate\t\t\t\t\t\t #\u7981\u7528\u8def\u7531\u5668\u4e4b\u95f4\u7684IPv6 BGP\u90bb\u5c45\u5173\u7cfb\n \n neighbor 2001:10:4:6::1 remote-as 65002\t\t\t\t #\u4e0eRT2\u5efa\u7acbIPV6\u4e0b\u7684Ebgp\u90bb\u5c45\u5173\u7cfb \n neighbor 2001:10:4:6::1 ebgp-multihop 255       #\u8ba9\u4e0d\u540c\u7f51\u6bb5\u4e4b\u95f4\u53ef\u4ee5\u5efa\u7acbEBGP\u90bb\u5c45\n neighbor 2001:10:4:6::1 update-source Loopback1 #\u66f4\u65b0\u6e90\n no neighbor 2001:10:4:6::1 activate\t\t\t\t\t\t #\u7981\u7528\u8def\u7531\u5668\u4e4b\u95f4\u7684IPv6 BGP\u90bb\u5c45\u5173\u7cfb\n \n address-family ipv6 unicast   \t\t\t   \t  #\u8fdb\u5165IPV6\u5730\u5740\u65cf\n   neighbor 2001:10:4:2::1 activate       #\u6fc0\u6d3b\u4e0eSW2\u7684ipv6 BGP\u90bb\u5c45\u5173\u7cfb  \u524d\u9762\u8bf4\u4e86\uff0c\u9700\u8981\u5728\u5168\u5c40\u7981\u7528IPV6\u5173\u7cfb\uff0c\u6240\u4ee5\u6211\u4eec\u5728\u5730\u5740\u65cf\u91cc\u9762\u6fc0\u6d3b\n   neighbor 2001:10:4:2::1 next-hop-self  #\u6307\u5b9a\u4e0b\u4e00\u8df3\uff0c\u4e0eSW2\u4e4b\u95f4\u662fIBGP\u73af\u5883\uff0cIPV6\u91cc\u6211\u4eec\u5728\u5730\u5740\u65cf\u91cc\u9762\u914d\u7f6e\n   neighbor 2001:10:4:3::1 activate       #\u6fc0\u6d3b\u4e0eSW2\u7684ipv6 BGP\u90bb\u5c45\u5173\u7cfb\n   neighbor 2001:10:4:5::1 activate\t\t\t\t#\u6fc0\u6d3b\u4e0eRT1\u7684ipv6 BGP\u90bb\u5c45\u5173\u7cfb\n   neighbor 2001:10:4:5::1 next-hop-self  #\u6307\u5b9a\u4e0b\u4e00\u8df3\uff0c\u4e0eRT1\u4e4b\u95f4\u662fIBGP\u73af\u5883\n   neighbor 2001:10:4:6::1 activate\t\t\t\t#\u6fc0\u6d3b\u4e0eRT2\u7684ipv6 BGP\u90bb\u5c45\u5173\u7cfb\n   exit-address-family                    #\u9000\u51fa\u5730\u5740\u7c07\u914d\u7f6e\u6a21\u5f0f\n\n\u6fc0\u6d3bipv6 BGP\u90bb\u5c45\u5173\u7cfb\u8fd9\u6761\u547d\u4ee4\u5728BGP\u5168\u5c40\u6a21\u5f0f\u4e0b\u548c\u5728\u5730\u5740\u7c07\u914d\u7f6e\u6a21\u5f0f\u4e0b\u8f93\u5165\u6709\u4ec0\u4e48\u533a\u522b\uff1f\nneighbor 2001:10:4:2::1 activate\n\n\u533a\u522b\u5728\u4e8e\u4f60\u5728BGP\u5168\u5c40\u914d\u7f6e\u6a21\u5f0f\u4e0b\u8f93\u5165\uff0c\u4f1a\u4e0e\u6240\u6709\u80fd\u8fde\u901a\u7684IPV6\u5730\u5740\u5efa\u7acb\u90bb\u5c45\u5173\u7cfb\n\u5728\u5730\u5740\u7c07\u4e2d\u8f93\u5165\uff0c\u53ea\u4f1a\u4e0e\u5730\u5740\u7c07\u4e2d\u7684ipv6\u5730\u5740\u5efa\u7acb\u90bb\u5c45\n"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:" SW2\uff1a\nIPV4 SW1 IBGP\nrouter bgp 65001\n bgp router-id 10.4.2.1\n neighbor 10.4.1.1 remote-as 65001   \n neighbor 10.4.1.1 update-source Loopback1\n neighbor 10.4.1.1 next-hop-self\n\n #SW3 EBGP\n neighbor 10.4.3.1 remote-as 65003  \n neighbor 10.4.3.1 ebgp-multihop 255\n neighbor 10.4.3.1 update-source Loopback1\n \n #RT1 IBGP\n neighbor 10.4.5.1 remote-as 65001  \n neighbor 10.4.5.1 update-source Loopback1\n neighbor 10.4.5.1 next-hop-self\n\n #RT2 EBGP\n neighbor 10.4.6.1 remote-as 65002\t\n neighbor 10.4.6.1 ebgp-multihop 255\n neighbor 10.4.6.1 update-source Loopback1\n\n IPV6  \n #SW1 IBGP\n neighbor 2001:10:4:1::1 remote-as 65001\n neighbor 2001:10:4:1::1 update-source Loopback1\n no neighbor 2001:10:4:1::1 activate\n\n #SW3 EBGP\n neighbor 2001:10:4:3::1 remote-as 65003\n neighbor 2001:10:4:3::1 ebgp-multihop 255\n neighbor 2001:10:4:3::1 update-source Loopback1\n no neighbor 2001:10:4:3::1 activate\n \n #RT1 IBGP\n neighbor 2001:10:4:5::1 remote-as 65001 \n neighbor 2001:10:4:5::1 update-source Loopback1\n no neighbor 2001:10:4:5::1 activate\n\n #RT2 EBGP\n neighbor 2001:10:4:6::1 remote-as 65002\n neighbor 2001:10:4:6::1 ebgp-multihop 255\n neighbor 2001:10:4:6::1 update-source Loopback1\n no neighbor 2001:10:4:6::1 activate\n \n #ipv6\u5730\u5740\u7c07\u914d\u7f6e\n address-family ipv6 unicast \n  neighbor 2001:10:4:1::1 activate        #SW1\n  neighbor 2001:10:4:1::1 next-hop-self\t#\u4e0b\u4e00\u8df3\n  neighbor 2001:10:4:3::1 activate\t\t\t\t#SW3\n  neighbor 2001:10:4:5::1 activate\t\t\t\t#RT1\n  neighbor 2001:10:4:5::1 next-hop-self  #\u4e0b\u4e00\u8df3\n  neighbor 2001:10:4:6::1 activate\t\t\t\t#RT2\n  exit-address-family\t\t\t\t\t\t\t\t\t\t#\u9000\u51fa\u5730\u5740\u7c07\n"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"SW3\uff1a\nrouter bgp 65003\n bgp router-id 10.4.3.1\n neighbor 10.4.1.1 remote-as 65001\n neighbor 10.4.1.1 ebgp-multihop 255\n neighbor 10.4.1.1 update-source Loopback1\n \n neighbor 10.4.2.1 remote-as 65001\n neighbor 10.4.2.1 ebgp-multihop 255\n neighbor 10.4.2.1 update-source Loopback1\n \n neighbor 10.4.5.1 remote-as 65001\n neighbor 10.4.5.1 ebgp-multihop 255\n neighbor 10.4.5.1 update-source Loopback1\n \n neighbor 10.4.6.1 remote-as 65002\n neighbor 10.4.6.1 ebgp-multihop 255\n neighbor 10.4.6.1 update-source Loopback1\n \n neighbor 2001:10:4:1::1 remote-as 65001\n neighbor 2001:10:4:1::1 ebgp-multihop 255\n neighbor 2001:10:4:1::1 update-source Loopback1\n no neighbor 2001:10:4:1::1 activate\n \n neighbor 2001:10:4:2::1 remote-as 65001\n neighbor 2001:10:4:2::1 ebgp-multihop 255\n neighbor 2001:10:4:2::1 update-source Loopback1\n no neighbor 2001:10:4:2::1 activate\n \n neighbor 2001:10:4:5::1 remote-as 65001\n neighbor 2001:10:4:5::1 ebgp-multihop 255\n neighbor 2001:10:4:5::1 update-source Loopback1\n no neighbor 2001:10:4:5::1 activate\n \n neighbor 2001:10:4:6::1 remote-as 65002\n neighbor 2001:10:4:6::1 ebgp-multihop 255\n neighbor 2001:10:4:6::1 update-source Loopback1\n no neighbor 2001:10:4:6::1 activate\n \n address-family ipv6 unicast\n  neighbor 2001:10:4:1::1 activate\n  neighbor 2001:10:4:2::1 activate\n  neighbor 2001:10:4:5::1 activate\n  neighbor 2001:10:4:6::1 activate\n  exit-address-family\n"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"RT1\uff1a\nrouter bgp 65001\n bgp router-id 10.4.5.1\n neighbor 10.4.1.1 remote-as 65001 \n neighbor 10.4.1.1 update-source Loopback1\n neighbor 10.4.1.1 next-hop-self\n \n neighbor 10.4.2.1 remote-as 65001 \n neighbor 10.4.2.1 update-source Loopback1\n neighbor 10.4.2.1 next-hop-self\n \n neighbor 10.4.3.1 remote-as 65003 \n neighbor 10.4.3.1 ebgp-multihop 255\n neighbor 10.4.3.1 update-source Loopback1\n \n neighbor 10.4.6.1 remote-as 65002 \n neighbor 10.4.6.1 ebgp-multihop 255\n neighbor 10.4.6.1 update-source Loopback1\n\n ipv6\n neighbor 2001:10:4:1::1 remote-as 65001 \n neighbor 2001:10:4:1::1 update-source Loopback1\n no neighbor 2001:10:4:1::1 activate\n \n neighbor 2001:10:4:2::1 remote-as 65001 \n neighbor 2001:10:4:2::1 update-source Loopback1\n no neighbor 2001:10:4:2::1 activate\n \n neighbor 2001:10:4:3::1 remote-as 65003 \n neighbor 2001:10:4:3::1 ebgp-multihop 255\n neighbor 2001:10:4:3::1 update-source Loopback1\n no neighbor 2001:10:4:3::1 activate\n \n neighbor 2001:10:4:6::1 remote-as 65002 \n neighbor 2001:10:4:6::1 ebgp-multihop 255\n neighbor 2001:10:4:6::1 update-source Loopback1\n no neighbor 2001:10:4:6::1 activate\n\n address-family ipv6\n  no synchronization\n  neighbor 2001:10:4:1::1 activate\n  neighbor 2001:10:4:1::1 next-hop-self\n  neighbor 2001:10:4:2::1 activate\n  neighbor 2001:10:4:2::1 next-hop-self\n  neighbor 2001:10:4:3::1 activate\n  neighbor 2001:10:4:6::1 activate\n  exit-address-family\n"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:" RT2\uff1a\nrouter bgp 65002\n bgp router-id 10.4.6.1\n neighbor 10.4.1.1 remote-as 65001 \n neighbor 10.4.1.1 ebgp-multihop 255\n neighbor 10.4.1.1 update-source Loopback1\n \n neighbor 10.4.2.1 remote-as 65001 \n neighbor 10.4.2.1 ebgp-multihop 255\n neighbor 10.4.2.1 update-source Loopback1\n \n neighbor 10.4.3.1 remote-as 65003 \n neighbor 10.4.3.1 ebgp-multihop 255\n neighbor 10.4.3.1 update-source Loopback1\n \n neighbor 10.4.5.1 remote-as 65001 \n neighbor 10.4.5.1 ebgp-multihop 255\n neighbor 10.4.5.1 update-source Loopback1\n \n neighbor 2001:10:4:1::1 remote-as 65001 \n neighbor 2001:10:4:1::1 ebgp-multihop 255\n neighbor 2001:10:4:1::1 update-source Loopback1\n no neighbor 2001:10:4:1::1 activate\n \n neighbor 2001:10:4:2::1 remote-as 65001 \n neighbor 2001:10:4:2::1 ebgp-multihop 255\n neighbor 2001:10:4:2::1 update-source Loopback1\n no neighbor 2001:10:4:2::1 activate\n \n neighbor 2001:10:4:3::1 remote-as 65003 \n neighbor 2001:10:4:3::1 ebgp-multihop 255\n neighbor 2001:10:4:3::1 update-source Loopback1\n no neighbor 2001:10:4:3::1 activate\n \n neighbor 2001:10:4:5::1 remote-as 65001 \n neighbor 2001:10:4:5::1 ebgp-multihop 255\n neighbor 2001:10:4:5::1 update-source Loopback1\n no neighbor 2001:10:4:5::1 activate\n\n address-family ipv6\n  neighbor 2001:10:4:1::1 activate\n  neighbor 2001:10:4:2::1 activate\n  neighbor 2001:10:4:3::1 activate\n  neighbor 2001:10:4:5::1 activate\n  exit-address-family\n"})}),"\n",(0,t.jsx)(e.p,{children:"\u9ed1\u8272\u90e8\u5206"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"\u4ea4\u6362\u914d\u7f6e\u7b2c\u4e8c\u5c0f\u9898\u56de\u987e\nSW1 \u548c SW2 \u4e4b\u95f4\u5229\u7528\u4e09\u6761\u88f8\u5149\u7f06\u5b9e\u73b0\u4e92\u901a\uff0c\u5176\u4e2d\u4e00\u6761\u88f8\u5149\u7f06\u627f\u8f7d\u4e09\u5c42 IP \u4e1a\u52a1(23)\u3001\u4e00\u6761\u88f8\u5149\u7f06\u627f\n\u8f7d VPN \u4e1a\u52a1(24)\u3001\u4e00\u6761\u88f8\u5149\u7f06\u627f\u8f7d\u4e8c\u5c42\u4e1a\u52a1(22)\u3002 \u7528\u76f8\u5173\u6280\u672f\u5206\u522b\u5b9e\u73b0\u8d22\u52a1 1 \u6bb5\u3001\u8d22\u52a1 2 \u6bb5\u4e1a\u52a1\n\u8def\u7531\u8868\u4e0e\u5176\u5b83\u4e1a\u52a1\u8def\u7531\u8868\u9694\u79bb\uff0c\u8d22\u52a1\u4e1a\u52a1 VPN \u5b9e\u4f8b\u540d\u79f0\u4e3a Finance\uff0cRD \u4e3a 1:1\u3002\n\n\u8fd9\u91cc\u8981\u6ce8\u610f\uff0c\u56e0\u4e3a\u524d\u9762\u5df2\u7ecf\u8981\u6c42\u6211\u4eec\u8d22\u52a11\u548c2\u6bb5\u8def\u7531\u8868\u9694\u79bb\u4e86\uff0c\u6240\u4ee5\u8fd9\u4e2a\u5c0f\u8981\u6c42\u91cc\u7684\u914d\u7f6e\u90fd\u9700\u8981\u4e0evrf\u5173\u8054\n\u8d22\u52a11\u6bb5\u662fSW1\u7684vlan15\uff0c\u8d22\u52a12\u6bb5\u662fSW2\u7684vlan25\uff0c\u505a\u4ea4\u6362\u673a\u7b2c\u4e8c\u5c0f\u9898\u65f6\u5df2\u7ecf\u628aFinance\u8fd9\u4e2a\u5b9e\u4f8b\u5173\u8054\u5230\n\u4e86SW1\u7684vlan15\u3001vlan1024\u548cloopback2\u3001SW2\u7684vlan25\u3001vlan1024\u548cloopback2\n\nip route vrf Finance 10.4.2.2/32 10.4.255.2 #\u914d\u7f6e\u9759\u6001\u8def\u7531\u5b9e\u73b0SW1\u548cSW2\u7684loop2\u7684IPv4\u4e92\u901a\n\nrouter ipv6 ospf 2 vrf Finance \t\t\t\t\t\t\t#\u5728VRF\u5b9e\u4f8b\u4e2d\u8fd0\u884cospv3\u8fdb\u7a0b2\uff08\u5b9e\u73b0IPV6\u7684loop2\u4e92\u901a\uff09\n  router-id 10.4.1.2\t\t\t\t\t\t\t\t\t\t\t\t#\u914d\u7f6erouter-id\nexit\n\nipv6 route vrf Finance 2001:10:4:2::2 200\n\u89e3\u91ca\uff1alo1\u662f\u4e92\u901a\u7684\uff0c\u56e0\u4e3a\u4e4b\u524d\u5728ospf\u91cc\u9762\u901a\u544a\u8fc7\uff0clo2\u6ca1\u6709\u901a\u544a\uff0c\u6240\u4ee5\u9700\u8981\u624b\u52a8\u3002\n\ninterface Loopback2 \t\t\t\t  \t#\u8fdb\u5165loo2\n  ipv6 router ospf area 2 tag 2 #\u901a\u544aIPv6 \u7684ospf \u8fdb\u7a0b2 tag2\ninterface Vlan1024\t\t\t\t\t\t  #\u8fdb\u5165vlan 1024 \u8fd9\u662f\u76f4\u8fde\u7528\uff0c\u6240\u4ee5\u9700\u8981\u901a\u544a\n  ipv6 router ospf area 2 tag 2 #\u901a\u544aIPv6 \u7684ospf \u8fdb\u7a0b2 tag2\n  exit\nrouter bgp 65001                  \t\t#\u8fdb\u5165BGP AS65001\n  address-family ipv4 vrf Finance \t\t#\u8fdb\u5165Ipv4vrf\u5730\u5740\u65cf\n    network 10.4.15.0/24\t\t\t\t\t\t\t#BGP\u901a\u544a\u8d22\u52a11\u6bb5\n    neighbor 10.4.2.2 remote-as 65001 #\u6307\u5b9a\u90bb\u5c45\u4e3aSW2\u7684loop2\u5730\u5740\n    neighbor 10.4.2.2 update-source Loopback2 #\u6307\u5b9a\u66f4\u65b0\u6e90\n    exit-address-family\n  address-family ipv6 vrf Finance     \t\t\t#\u8fdb\u5165IPV6vrf\u5730\u5740\u65cf\n    network 2001:10:4:15::/64         \t\t\t#BGP\u901a\u544a\u8d22\u52a11\u6bb5\n    neighbor 2001:10:4:2::2 remote-as 65001 #\u6307\u5b9a\u90bb\u5c45\u4e3aSW2\u7684loop2\u5730\u5740\n    neighbor 2001:10:4:2::2 update-source Loopback2 #\u66f4\u65b0\u6e90\n    exit-address-family\n    exit\n"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"ip route vrf Finance 10.4.1.2/32 10.4.255.1\nrouter ipv6 ospf 2 vrf Finance\n router-id 10.4.2.2\nexit\n\ninterface Loopback2\nipv6 router ospf area 2 tag 2\nexit\n\ninterface vlan 1024\nipv6 router ospf area 2 tag 2\n\nrouter bgp 65001\n  address-family ipv4 vrf Finance\n    network 10.4.25.0/24\t\t\t\t\t\t\t#BGP\u901a\u544a\u8d22\u52a12\u6bb5\n    neighbor 10.4.1.2 remote-as 65001\n    neighbor 10.4.1.2 update-source Loopback2\n    exit-address-family\n  address-family ipv6 vrf Finance\n    network 2001:10:4:25::/64\t\t\t\t\t#BGP\u901a\u544a\u8d22\u52a12\u6bb5\n    neighbor 2001:10:4:1::2 remote-as 65001\n    neighbor 2001:10:4:1::2 update-source Loopback2\n    exit-address-family\n"})}),"\n",(0,t.jsx)(e.p,{children:"\u6d4b\u8bd5\u4e00\u3001SW1\u6d4b\u8bd5loo2\u8fde\u901a\u60c5\u51b5\nping vrf Finance src 10.4.1.2 10.4.2.2\nping6 vrf Finance src 2001:10:4:1::2 2001:10:4:2::2\nSW2\u6d4b\u8bd5loo2\u8fde\u901a\u60c5\u51b5\nping vrf Finance src 10.4.2.2 10.4.1.2\nping6 vrf Finance src 2001:10:4:2::2 2001:10:4:1::2"}),"\n",(0,t.jsxs)(e.p,{children:["\u4e8c\u3001\u8def\u7531\u5b66\u4e60\u6d4b\u8bd5\nshow ip route vrf Finance  #SW1\u548cSW2\u4e0a\u4f1a\u6709\u5bf9\u65b9\u8d22\u52a1\u6bb5\u7684BGP\u8def\u7531\n",(0,t.jsx)(e.img,{src:"https://cdn.nlark.com/yuque/0/2024/png/33622884/1714918916723-e713549b-9341-405f-9a4d-b7eb4d1936c7.png#averageHue=%230c0906&clientId=udcaddb26-962f-4&from=paste&height=314&id=u1c3ccd3b&originHeight=353&originWidth=1470&originalType=binary&ratio=1.125&rotation=0&showTitle=false&size=54491&status=done&style=none&taskId=u481b9d54-c8bd-4b17-8980-7278b951ad4&title=&width=1306.6666666666667",alt:"image.png"}),"\n",(0,t.jsx)(e.img,{src:"https://cdn.nlark.com/yuque/0/2024/png/33622884/1714918856928-f89dd77b-83f7-4f07-a231-1d497aeeef5a.png#averageHue=%230b0806&clientId=udcaddb26-962f-4&from=paste&height=336&id=ua31abfde&originHeight=378&originWidth=1470&originalType=binary&ratio=1.125&rotation=0&showTitle=false&size=56888&status=done&style=none&taskId=u0bee85f4-e750-42c8-b2b6-4277aff1a0c&title=&width=1306.6666666666667",alt:"image.png"})]}),"\n",(0,t.jsx)(e.p,{children:"\u7d2b\u8272\u90e8\u5206"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"router bgp 65001\n  network 10.4.12.0/24 \t\t\t\t #\u901a\u544a\u8425\u95001\u6bb5\u7f51\u7edc\n  network 10.4.13.0/24 \t\t\t   #\u901a\u544a\u6cd5\u52a11\u6bb5\u7f51\u7edc\n  network 10.4.14.0/24   \t\t   #\u901a\u544a\u4eba\u529b1\u6bb5\u7f51\u7edc\n  address-family ipv6 unicast  #\u8fdb\u5165IPv6\u5730\u5740\u7c07\uff0c\u901a\u544aIPv6\u53ea\u80fd\u5728\u5730\u5740\u7c07\u91cc\u901a\u544a\n    network 2001:10:4:12::/64  #\u901a\u544a\u8425\u95001\u6bb5\u7f51\u7edc\n    network 2001:10:4:13::/64  #\u901a\u544a\u6cd5\u52a11\u6bb5\u7f51\u7edc\n    network 2001:10:4:14::/64  #\u901a\u544a\u4eba\u529b1\u6bb5\u7f51\u7edc\n    exit-address-family        #\u9000\u51fa\u5730\u5740\u7c07\n"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"router bgp 65001\n  network 10.4.22.0/24\n  network 10.4.23.0/24\n  network 10.4.24.0/24\n  address-family ipv6 unicast\n    network 2001:10:4:22::/64\n    network 2001:10:4:23::/64\n    network 2001:10:4:24::/64\n    exit-address-family\n"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"router bgp 65003\n  network 10.4.32.0/24\n  network 10.4.33.0/24\n  network 10.4.34.0/24\n  address-family ipv6 unicast\n    network 2001:10:4:32::/64\n    network 2001:10:4:33::/64\n    network 2001:10:4:34::/64\n    SW3\u6ca1\u6709\u8d22\u52a1\u8def\u7531\uff0c\u4e0d\u9700\u8981\u53d1\u5e03\n"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"router bgp 65001\n  network 10.4.120.0/24 \u2013\u529e\u4e8b\u5904\u8425\u9500\u8def\u7531\n  address-family ipv6\n    network 2001:10:4:120::/64\n"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"router bgp 65002\n  network 10.4.150.0/24 \u2013\u5206\u516c\u53f8\u8425\u9500\u8def\u7531\n  address-family ipv6\n    network 2001:10:4:150::/64\n"})}),"\n",(0,t.jsxs)(e.p,{children:["\u6d4b\u8bd5(\u5c55\u793a\u90e8\u5206)\n",(0,t.jsx)(e.img,{src:"https://cdn.nlark.com/yuque/0/2024/png/33622884/1714810177910-43c32643-d9e1-45d6-b9c5-1aa88bc99daf.png#averageHue=%231a1008&clientId=u54b87adb-d758-4&from=paste&height=402&id=ucb3abb1c&originHeight=452&originWidth=1656&originalType=binary&ratio=1.125&rotation=0&showTitle=false&size=103614&status=done&style=none&taskId=u5e53ef11-14ed-44cc-981d-c9addd59252&title=&width=1472",alt:"image.png"}),"\n",(0,t.jsx)(e.img,{src:"https://cdn.nlark.com/yuque/0/2024/png/33622884/1714810080384-7fef6542-98ea-40cd-8738-b4c88acb331a.png#averageHue=%230d0803&clientId=u54b87adb-d758-4&from=paste&height=328&id=u74681ad5&originHeight=369&originWidth=1220&originalType=binary&ratio=1.125&rotation=0&showTitle=false&size=39702&status=done&style=none&taskId=u63411d24-8ebf-48e3-a8f7-eec694a97f6&title=&width=1084.4444444444443",alt:"image.png"}),"\n\u7eff\u8272\u90e8\u5206"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"\u524d\u7f00\u5217\u8868\u540d\u79f0\n\u8425\u9500\uff1aSW3-YX-IPv4\u548cSW3-YX-IPv6\n\u6cd5\u52a1\u53ca\u4eba\u529b\uff1aSW3-FWRL-IPv4\u548cSW3-FWRL-IPv6\n\n\u8425\u9500\u8def\u7531\u4e92\u8bbf\u4f18\u5148\u4eceSW1\u8d70\uff0c\u6cd5\u52a1\u548c\u4eba\u529b\u8def\u7531\u4e92\u8bbf\u4f18\u5148\u4eceSW2\u8d70\n\n\u6ce8\u610f\uff1a\u540c\u4e00\u4e2aprefix-list\u540d\u6839\u636e\u5e8f\u53f7\u4e0d\u540c\uff0c\u53ef\u4ee5\u5339\u914d\u591a\u4e2a\u7f51\u7edc\uff1b\u540c\u4e00\u4e2aroute-map\uff0c\u6839\u636e\u5e8f\u53f7\u4e0d\u540c\uff0c\u53ef\u4ee5\u5339\u914d\u591a\u4e2aperfix-list\n\u5e8f\u53f7\u9012\u589e\u4f9d\u636e\uff1a\u540c\u4e00\u4e2aprefix-list\u4f9d\u6b21\u9012\u589e5\uff0c\u540c\u4e00\u4e2aroute-map\uff0c\u4f9d\u6b21\u9012\u589e10\uff0c\u6309\u524d\u9762ospf\u90a3\u4e2a\u9898\u91cc\u7684\u8981\u6c42\u6765\n\n\u7b2c\u4e00\u6b65\uff1aIPv4\u524d\u7f00\u5217\u8868\u914d\u7f6e\nip prefix-list SW1-SW2-YX-IPv4 seq 5 permit 10.4.12.0/24    #SW1\u8425\u9500\u7f51\u7edc vlan12\nip prefix-list SW1-SW2-YX-IPv4 seq 10 permit 10.4.22.0/24   #SW2\u8425\u9500\u7f51\u7edc vlan22\n\nip prefix-list SW1-SW2-FWRL-IPv4 seq 5 permit 10.4.13.0/24  #SW1\u6cd5\u52a1\u7f51\u7edc vlan13\nip prefix-list SW1-SW2-FWRL-IPv4 seq 10 permit 10.4.14.0/24 #SW1\u4eba\u529b\u7f51\u7edc vlan14\nip prefix-list SW1-SW2-FWRL-IPv4 seq 15 permit 10.4.23.0/24 #SW2\u6cd5\u52a1\u7f51\u7edc vlan23\nip prefix-list SW1-SW2-FWRL-IPv4 seq 20 permit 10.4.24.0/24 #SW2\u4eba\u529b\u7f51\u7edc vlan24\n\nip prefix-list SW3-YX-IPv4 seq 5 permit 10.4.32.0/24        #SW3\u8425\u9500\u7f51\u7edc\n\nip prefix-list SW3-FWRL-IPv4 seq 5 permit 10.4.33.0/24      #SW3\u6cd5\u52a1\u7f51\u7edc\nip prefix-list SW3-FWRL-IPv4 seq 10 permit 10.4.34.0/24     #SW3\u4eba\u529b\u7f51\u7edc\n\n\u7b2c\u4e8c\u6b65\uff1aIPv6\u524d\u7f00\u5217\u8868\u914d\u7f6e\nipv6 prefix-list SW1-SW2-YX-IPv6 seq 5 permit 2001:10:4:12::/64  #SW1\u8425\u9500\u7f51\u7edc vlan12\nipv6 prefix-list SW1-SW2-YX-IPv6 seq 10 permit 2001:10:4:22::/64 #SW2\u8425\u9500\u7f51\u7edc vlan22\n\nipv6 prefix-list SW1-SW2-FWRL-IPv6 seq 5 permit 2001:10:4:13::/64  #SW1\u6cd5\u52a1\u7f51\u7edc vlan13\nipv6 prefix-list SW1-SW2-FWRL-IPv6 seq 10 permit 2001:10:4:14::/64 #SW1\u4eba\u529b\u7f51\u7edc vlan14\nipv6 prefix-list SW1-SW2-FWRL-IPv6 seq 15 permit 2001:10:4:23::/64 #SW2\u6cd5\u52a1\u7f51\u7edc vlan23\nipv6 prefix-list SW1-SW2-FWRL-IPv6 seq 20 permit 2001:10:4:24::/64 #SW2\u4eba\u529b\u7f51\u7edc vlan24\n\nipv6 prefix-list SW3-YX-IPv6 seq 5 permit 2001:10:4:32::/64     #SW3\u8425\u9500\u7f51\u7edc\n\nipv6 prefix-list SW3-FWRL-IPv6 seq 5 permit 2001:10:4:33::/64   #SW3\u6cd5\u52a1\u7f51\u7edc\nipv6 prefix-list SW3-FWRL-IPv6 seq 10 permit 2001:10:4:34::/64  #SW3\u4eba\u529b\u7f51\u7edc\n\nSW3\u4e0a\u7684prefix-list\u6709\u56db\u79cd\uff1asw1-sw2\u7684\u8425\u9500\u3001sw1-sw2\u7684\u6cd5\u52a1\u548c\u4eba\u529b\u3001sw3\u7684\u8425\u9500\u3001sw3\u7684\u6cd5\u52a1\u548c\u4eba\u529b\n\n\u7b2c\u4e09\u6b65\uff1aroute-map\u5339\u914dipv4\u524d\u7f00\u5217\u8868\nroute-map YX-IPv4 permit 10\n match ip address prefix-list SW1-SW2-YX-IPv4\n exit\n\nroute-map YX-IPv4 permit 20\n match ip address prefix-list SW3-YX-IPv4\n exit\n \nroute-map YX-IPv4 permit 30\n match ip address prefix-list SW1-SW2-FWRL-IPv4  #\u5339\u914dSW1\u4e0eSW2 \u4eba\u529b\u6cd5\u52a1\u7684\u524d\u7f00\u5217\u8868\n set as-path prepend 65000                      #\u65b0\u589eAS65000,\u4f1a\u6bd4\u6ca1\u65b0\u589e\u7684\u591a\u4e00\u8df3\n exit\n \nroute-map FWRL-IPv4 permit 10\n match ip address prefix-list SW1-SW2-FWRL-IPv4\n exit\nroute-map FWRL-IPv4 permit 20\n match ip address prefix-list SW3-FWRL-IPv4\n exit\nroute-map FWRL-IPv4 permit 30\n match ip address prefix-list SW1-SW2-YX-IPv4\n set as-path prepend 65000\n exit\n \n\u7b2c\u56db\u6b65\uff1aroute-map\u5339\u914dipv6\u524d\u7f00\u5217\u8868\nroute-map YX-IPv6 permit 10\n match ipv6 address prefix-list SW1-SW2-YX-IPv6\n exit\n \nroute-map YX-IPv6 permit 20\n match ipv6 address prefix-list SW3-YX-IPv6\n exit\n \nroute-map YX-IPv6 permit 30\n match ipv6 address prefix-list SW1-SW2-FWRL-IPv6\n set as-path prepend 65000\n exit\n\nroute-map FWRL-IPv6 permit 10\n match ipv6 address prefix-list SW1-SW2-FWRL-IPv6\n exit\n \nroute-map FWRL-IPv6 permit 20\n match ipv6 address prefix-list SW3-FWRL-IPv6\n exit\n \nroute-map FWRL-IPv6 permit 30\n match ipv6 address prefix-list SW1-SW2-YX-IPv6\n set as-path prepend 65000\n\n\n\u7b2c\u4e94\u6b65\uff1abgp\u4e2d\u5339\u914droute-map\nrouter bgp 65003\nneighbor 10.4.1.1 route-map YX-IPv4 in \nneighbor 10.4.2.1 route-map FWRL-IPv4 in \naddress-family ipv6 unicast\nneighbor 2001:10:4:1::1 route-map YX-IPv6 in\nneighbor 2001:10:4:2::1 route-map FWRL-IPv6 in\n\n\u505a\u5b8c\u4e4b\u540e\u5728\u7279\u6743\u6a21\u5f0f\u4e0b\u66f4\u65b0\u4e00\u4e9bBGP\u8fdb\u7a0b\nclear ip bgp * soft \nclear bgp ipv6 * soft\n"})}),"\n",(0,t.jsxs)(e.p,{children:["\u6d4b\u8bd5\n",(0,t.jsx)(e.img,{src:"https://cdn.nlark.com/yuque/0/2024/png/33622884/1714919671968-9f68dc12-ef66-4e65-8967-932da980009d.png#averageHue=%23080604&clientId=u401221bd-813d-4&from=paste&height=705&id=uc56dfac8&originHeight=793&originWidth=1754&originalType=binary&ratio=1.125&rotation=0&showTitle=false&size=85566&status=done&style=none&taskId=u28e426b8-1f5f-4e8f-8080-0c7ac9bd001&title=&width=1559.111111111111",alt:"image.png"}),"\nshow ipv6 route nsm bgp\nshow bgp ipv6\n",(0,t.jsx)(e.img,{src:"https://cdn.nlark.com/yuque/0/2024/png/33622884/1715169050040-cc0d0000-142f-4694-b73f-a270a6b9d4cc.png#averageHue=%23170e05&clientId=u99f4550c-33ce-4&from=paste&height=294&id=uccb60378&originHeight=368&originWidth=1489&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=70624&status=done&style=none&taskId=u91faaef2-46df-4d68-82f5-f4f0b2c2886&title=&width=1191.2",alt:"image.png"}),"\n",(0,t.jsx)(e.img,{src:"https://cdn.nlark.com/yuque/0/2024/png/33622884/1715080904735-04ce0361-29ff-404c-808c-ed24e5ffd1ce.png#averageHue=%23060302&clientId=uf9fb7853-3969-4&from=paste&height=588&id=J3N0N&originHeight=808&originWidth=1889&originalType=binary&ratio=1.375&rotation=0&showTitle=false&size=80878&status=done&style=none&taskId=uf2038833-287f-4615-8267-06e83ce3070&title=&width=1373.8181818181818",alt:"image.png"})]}),"\n",(0,t.jsx)(e.h2,{id:"9\u5c0f\u9898",children:"9\u5c0f\u9898"}),"\n",(0,t.jsxs)(e.p,{children:["9.\u5229\u7528 BGP MPLS VPN \u6280\u672f\uff0cRT1 \u4e0e RT2 \u4ee5\u592a\u94fe\u8def\u95f4\u8fd0\u884c\u591a\u534f\u8bae\u6807\u7b7e\u4ea4\u6362\u3001\u6807\u7b7e\u5206\u53d1\u534f\u8bae\u3002RT1 \u4e0e RT2 \u95f4\u521b\u5efa\u8d22\u52a1 VPN \u5b9e\u4f8b\uff0c\u540d\u79f0\u4e3a Finance\uff0c RT1 \u7684 RD \u503c\u4e3a 1:1\uff0cexport rt \u503c\u4e3a 1:2\uff0cimport rt \u503c\u4e3a 2:1\uff1bRT2 \u7684 RD \u503c\u4e3a 2:2\u3002\u901a\u8fc7\u4e24\u7aef Loopback1 \u5efa\u7acb VPN \u90bb\u5c45\uff0c\u5206\u522b\u5b9e\u73b0\u4e24\u7aef Loopback5 IPv4 \u4e92\u901a\u548c IPv6 \u4e92\u901a\u3002\nBGP MPLS VPN\u91ca\u4e49MPLS\uff08Multiprotocol Label Switching\uff0c\u591a\u534f\u8bae\u6807\u7b7e\u4ea4\u6362\uff09",(0,t.jsx)(e.br,{}),"\n","BGP MPLS VPN \u662f\u63d0\u4f9b\u5546VPN\u89e3\u51b3\u65b9\u6848\u4e2d\u4e00\u79cd\u57fa\u4e8ePE\u7684L3VPN\u6280\u672f\uff0c\u5b83\u4f7f\u7528BGP\u5728\u670d\u52a1\u63d0\u4f9b\u5546\u9aa8\u5e72\u7f51\u4e0a\u53d1\u5e03VPN\u8def\u7531\uff0c\u4f7f\u7528MPLS\u5728\u670d\u52a1\u63d0\u4f9b\u5546\u9aa8\u5e72\u7f51\u4e0a\u8f6c\u53d1VPN\u62a5\u6587\u3002 BGP/MPLS VPN \u7ec4\u7f51\u65b9\u5f0f\u7075\u6d3b\u3001\u53ef\u6269\u5c55\u6027\u597d\uff0c\u5e76\u80fd\u591f\u65b9\u4fbf\u5730\u652f\u6301MPLS QoS\u548cMPLS TE\uff0c\u56e0\u6b64 \u5f97\u5230\u8d8a\u6765\u8d8a\u591a\u7684\u5e94\u7528\u3002\nBGP/MPLS VPN \u6a21\u578b\u7531\u4e09\u90e8\u5206\u7ec4\u6210\uff1aCE\u3001PE\u548cP\u3002\nP\u8def\u7531\u5668\uff08Provide Router\uff09\uff1a\u4f9b\u5e94\u5546\u8def\u7531\u5668\u3002\u4f4d\u4e8e MPLS \u57df\u7684\u5185\u90e8\uff0cP \u8def\u7531\u5668\u63a5\u6536MPLS \u62a5\u6587\uff0c\u4ea4\u6362\u6807\u7b7e\u540e\uff0c\u8f93\u51faMPLS \u62a5\u6587\u3002",(0,t.jsx)(e.br,{}),"\n","PE\u8def\u7531\u5668\uff08Provide Edge Router\uff09\uff1a\u4f9b\u5e94\u5546\u8fb9\u754c\u8def\u7531\u5668\u3002\u4f4d\u4e8eMPLS\u57df\u7684\u8fb9\u754c\uff0c\u7528\u4e8e \u8f6c\u6362IP\u62a5\u6587\u548cMPLS\u62a5\u6587\u3002",(0,t.jsx)(e.br,{}),"\n","CE\u8def\u7531\u5668\uff08Customer Edge Router\uff09\uff1a\u7528\u6237\u8fb9\u754c\u8def\u7531\u5668\u3002\u4f4d\u4e8e\u7528\u6237IP\u57df\u8fb9\u754c\uff0c\u7528\u4e8e\u6c47\u805a\u7528\u6237\u6570\u636e\uff0c\u5e76\u628a\u7528\u6237IP\u57df\u7684\u8def\u7531\u4fe1\u606f\u8f6c\u53d1\u5230PE\u8def\u7531\u5668\u3002"]}),"\n",(0,t.jsxs)(e.p,{children:["site\uff08\u7ad9\u70b9)\uff1a \u4e00\u4e2asite\u4e2d\u7684\u8bbe\u5907\u53ef\u4ee5\u5c5e\u4e8e\u591a\u4e2aVPN\uff0c\u6362\u8a00\u4e4b\uff0c\u4e00\u4e2asite\u53ef\u4ee5\u5c5e\u4e8e\u591a\u4e2aVPN  \uff1b \u4e00\u4e2asite\u53ef\u4ee5\u5305\u542b\u591a\u4e2aCE\uff0c\u4f46\u4e00\u4e2aCE\u53ea\u5c5e\u4e8e \u4e00\u4e2asite\u3002",(0,t.jsx)(e.br,{}),"\n","set\uff08\u96c6\u5408\uff09"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-bash",children:"\u4e00\u3001\u5168\u5c40\u542f\u7528MPLS\uff08\u5fc5\u987b\uff09\n\n\u4e8c\u3001\u914d\u7f6eVPN\u5b9e\u4f8b\uff08\u5fc5\u987b\uff09\n(1) \u521b\u5efa VPN \u5b9e\u4f8b\uff0c\u5e76\u8fdb\u5165 VPN \u5b9e\u4f8b\u89c6\u56fe\n(2) \u914d\u7f6e VPN \u5b9e\u4f8b\u7684 RD\n(3) \u914d\u7f6e VPN \u5b9e\u4f8b\u7684 RT\n(4) \u914d\u7f6e VPN \u5b9e\u4f8b\u4e0e\u63a5\u53e3\u5173\u8054\n\n\u4e09\u3001\u914d\u7f6ePE-CE\u95f4\u4f7f\u7528EBGP\n(1) \u914d\u7f6e\u5bf9\u7aef PE \u4e3a\u516c\u7f51 VPNv4 \u90bb\u5c45\n(2) \u8fdb\u5165 BGP-VPN \u5b9e\u4f8b\u89c6\u56fe\n(3) \u5c06 CE \u914d\u7f6e\u4e3a VPN \u79c1\u7f51\u90bb\u5c45\n(4) \u53d1\u5e03\u672c\u7aef\u7684\u79c1\u7f51\u8def\u7531\n"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"ip vrf Finance           #\u65b0\u5efaVPN\u5b9e\u4f8bFinance\n rd 1:1\n route-target export 1:2 #\u8f93\u51fa\u76ee\u6807\u7b56\u7565\u5c5e\u6027\u914d\u7f6e\uff0c\u4e0e\u5bf9\u7aef\u4ea4\u53c9\u914d\u7f6e\n route-target import 2:1 #\u8f93\u5165\u76ee\u6807\u7b56\u7565\u5c5e\u6027\u914d\u7f6e\uff0c\u4e0e\u5bf9\u7aef\u4ea4\u53c9\u914d\u7f6e\n\nipv6 vrf Finance\n rd 1:1\n route-target export 1:2\n route-target import 2:1\n \nint lo5\nip vrf forwarding Finance\n ip address 10.4.5.5 255.255.255.255\n ipv6 enable\n ipv6 vrf forwarding Finance\n\nmpls ip   #\u5168\u5c40\u542f\u7528mpls\nmpls ldp router-id 10.4.5.1\ninterface GigaEthernet0/0\n mpls ip         #\u5728\u63a5\u53e3\u4e0b\u6253\u5f00mpls\u529f\u80fd\n mpls ldp enable #\u6253\u5f00ldp\u529f\u80fd\n\nrouter bgp 65001\n  address-family vpnv4  --\u8fdb\u5165vpnv4\u5730\u5740\u65cf\u4e2d\n    neighbor 10.4.6.1 activate \u2013\u6fc0\u6d3b\u4e0eRT2\u7684VPNv4\u90bb\u5c45\u5173\u7cfb\n    exit-address-family\n  address-family vpnv6 \u2013\u8fdb\u5165VPNV6\u5730\u5740\u65cf\u4e2d\n    neighbor 10.4.6.1 activate \u2013\u6fc0\u6d3b\u4e0eRT2\u7684VPNV6\u90bb\u5c45\u5173\u7cfb\n    exit-address-family\n  address-family ipv4 vrf Finance \u2013\u8fdb\u5165IPV4 vrf\u5730\u5740\u65cf\u4e2d\n    network 10.4.5.5/32  --\u53d1\u5e03loop5\u5730\u5740\n    exit-address-family\n  address-family ipv6 vrf Finance \u2013\u8fdb\u5165IPV6 VRF\u5730\u5740\u65cf\u4e2d\n    network 2001:10:4:5::5/128 \u2014\u53d1\u5e03loop5\u5730\u5740\n    exit-address-family\n"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"ip vrf Finance           #\u65b0\u5efaVPN\u5b9e\u4f8bFinance\n rd 2:2\n route-target export 2:1 #\u8f93\u51fa\u76ee\u6807\u7b56\u7565\u5c5e\u6027\u914d\u7f6e\n route-target import 1:2 #\u8f93\u5165\u76ee\u6807\u7b56\u7565\u5c5e\u6027\u914d\u7f6e\n\nipv6 vrf Finance\n rd 2:2\n route-target export 2:1\n route-target import 1:2\n \nint lo5\nip vrf forwarding Finance\n ip address 10.4.6.5 255.255.255.255\n ipv6 enable\n ipv6 vrf forwarding Finance\n\nmpls ip   #\u5168\u5c40\u542f\u7528mpls\nmpls ldp router-id 10.4.6.1\ninterface GigaEthernet0/0\n mpls ip          #\u6253\u5f00ldp\u529f\u80fd\n\nrouter bgp 65002\n  address-family vpnv4  --\u8fdb\u5165vpnv4\u5730\u5740\u65cf\u4e2d\n    neighbor 10.4.5.1 activate \u2013\u6fc0\u6d3b\u4e0eRT2\u7684VPNv4\u90bb\u5c45\u5173\u7cfb\n    exit-address-family\n  address-family vpnv6 \u2013\u8fdb\u5165VPNV6\u5730\u5740\u65cf\u4e2d\n    neighbor 10.4.5.1 activate \u2013\u6fc0\u6d3b\u4e0eRT2\u7684VPNV6\u90bb\u5c45\u5173\u7cfb\n    exit-address-family\n  address-family ipv4 vrf Finance \u2013\u8fdb\u5165IPV4 vrf\u5730\u5740\u65cf\u4e2d\n    network 10.4.6.5/32  --\u53d1\u5e03loop5\u5730\u5740\n    exit-address-family\n  address-family ipv6 vrf Finance \u2013\u8fdb\u5165IPV6 VRF\u5730\u5740\u65cf\u4e2d\n    network 2001:10:4:6::5/128 \u2014\u53d1\u5e03loop5\u5730\u5740\n    exit-address-family\n"})}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.img,{src:"https://cdn.nlark.com/yuque/0/2024/png/33622884/1714633394096-f883043c-df76-4dce-8d48-751f66eb9193.png#averageHue=%23090706&clientId=u0bb62bc1-e74d-4&from=paste&height=322&id=u56880819&originHeight=322&originWidth=1432&originalType=binary&ratio=1&rotation=0&showTitle=false&size=37673&status=done&style=none&taskId=ub842876f-f8f0-421b-b524-89a204096ce&title=&width=1432",alt:"image.png"}),"\n",(0,t.jsx)(e.img,{src:"https://cdn.nlark.com/yuque/0/2024/png/33622884/1714633361110-1bbaafa5-2615-4e24-a202-9ca6e54a1bb5.png#averageHue=%23090706&clientId=u0bb62bc1-e74d-4&from=paste&height=323&id=u7d8814c6&originHeight=323&originWidth=1432&originalType=binary&ratio=1&rotation=0&showTitle=false&size=36617&status=done&style=none&taskId=u463919d3-f78e-4994-9be7-26498c4b73c&title=&width=1432",alt:"image.png"})]}),"\n",(0,t.jsx)(e.h2,{id:"10\u5c0f\u9898\u5f85\u5b9a\u7a3f",children:"10\u5c0f\u9898(\u5f85\u5b9a\u7a3f)"}),"\n",(0,t.jsxs)(e.p,{children:["RT2 \u914d\u7f6e IPv4 NAT\uff0cACL \u540d\u79f0\u4e3a ACL-NAT\uff0c\u5b9e\u73b0 AC1 IPv4 \u4ea7\u54c1\u7528 RT2 \u5916\u7f51\u63a5\u53e3 IPv4 \u5730\u5740\u8bbf\u95ee Internet\u3002RT2 \u914d\u7f6e NAT64\uff0cACL \u540d\u79f0\u4e3a ACL-NAT64\uff0c\u5b9e\u73b0 AC1 IPv6 \u4ea7\u54c1\u7528 RT2 \u5916\u7f51\u63a5\u53e3 IPv4 \u5730\u5740\u8bbf\u95ee Internet\uff0cIPv4 \u5730\u5740\u8f6c IPv6 \u5730\u5740\u524d\u7f00\u4e3a 64:ff9b::/96\u3002",(0,t.jsx)(e.br,{}),"\n","NAT\u3001ACL\u91ca\u4e49NAT\uff1a\u7f51\u7edc\u5730\u5740\u8f6c\u6362\nACL\uff1a\u8bbf\u95ee\u63a7\u5236\u5217\u8868"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"IPv4 NAT\u914d\u7f6e\nip route default GigaEthernet0/2 200.200.200.5  #\u914d\u7f6eipv4\u9ed8\u8ba4\u8def\u7531\n\nip access-list standard ACL-NAT\t\t\t\t\t\t\t\t\t#\u5efa\u7acb\u6807\u51c6\u8bbf\u95ee\u63a7\u5236\u5217\u8868\n  permit 10.4.140.1 255.255.255.0 sequence 10   #\u5efa\u7acb\u89c4\u5219\uff0c\u5141\u8bb8AC \u4ea7\u54c1\u7f51\u7edc\u901a\u8fc7\uff0c\u89c4\u5219\u5e8f\u5217\u53f7\u4e3a10\n  exit\n\nip nat inside source list ACL-NAT interface GigaEthernet0/2 #\u914d\u7f6e\u5185\u90e8\u6e90\u5730\u5740\u8f6c\u6362\u7684\u89c4\u5219\uff0c\u4f7f\u7528ACL-NAT\u5217\u8868\u4e2d\u7684\u6e90\u5730\u5740\u8fdb\u884c\u8f6c\u6362\uff0c\u5e76\u901a\u8fc7GigaEthernet0/2\u63a5\u53e3\u8fdb\u884c\u901a\u4fe1\u3002\n\n\ninterface GigaEthernet0/1\t\t\t\n  ip nat inside \t\t\t\t\t\t\t#\u542f\u7528\u5185\u90e8\u6e90\u5730\u5740\u8f6c\u6362\ninterface GigaEthernet0/2\t\t\t\n  ip nat outside\t\t\t\t\t\t\t#\u542f\u7528\u5916\u90e8\u6e90\u5730\u5740\u8f6c\u6362\nIPv6 NAT\u914d\u7f6e\nipv6 route default GigaEthernet0/2\t\t\t\t\t\t\t#\u914d\u7f6eipv6\u9ed8\u8ba4\u8def\u7531\n\nipv6 access-list ACL-NAT64 #\u521b\u5efa\u4e00\u4e2a\u540d\u4e3aACL-NAT64\u7684IPv6\u8bbf\u95ee\u63a7\u5236\u5217\u8868\n  permit ipv6 2001:10:4:140::/64 64:ff9b::/96 sequence 10 \u6dfb\u52a0\u4e00\u4e2a\u5141\u8bb8\u89c4\u5219\uff0c\u5141\u8bb8\u6765\u81ea2001:10:4:140::/64\u5b50\u7f51\u7684IPv6\u4e3b\u673a\u8fdb\u884c\u8bbf\u95ee\uff0c\u5e76\u5c06\u5b83\u4eec\u6620\u5c04\u523064:FF9B::/96\u524d\u7f00\uff0c\u5e8f\u5217\u53f7\u4e3a10\n  exit\nipv6 access-list ACL-NAT64-any\npermit ipv6 2001:10:4:140::/64 any sequence 10\n\nipv6 nat v6v4 source list ACL-NAT64 interface GigaEthernet0/2 #\u914d\u7f6eIPv6\u5230IPv4\u7684\u6e90\u5730\u5740\u8f6c\u6362\u7684\u89c4\u5219\uff0c\u4f7f\u7528ACL-NAT64\u5217\u8868\u4e2d\u7684\u6e90\u5730\u5740\u8fdb\u884c\u8f6c\u6362\uff0c\u5e76\u901a\u8fc7GigaEthernet0/2\u63a5\u53e3\u8fdb\u884c\u901a\u4fe1\nipv6 nat prefix 64:ff9b::/96 v4-mapped ACL-NAT64 #\u914d\u7f6eIPv6\u524d\u7f00\u8f6c\u6362\u7684\u89c4\u5219\uff0c\u5c0664:FF9B::/96\u524d\u7f00\u6620\u5c04\u5230ACL-NAT64\u5217\u8868\u4e2d\u7684\u6e90\u5730\u5740\n\ninterface GigaEthernet0/2\t\t\t\n  ip nat outside\t\t\t\t\t\t\t#\u542f\u7528\u5916\u90e8\u6e90\u5730\u5740\u8f6c\u6362\n  ipv6 nat\ninterface GigaEthernet0/1\t\t\t\n  ip nat inside \t\t\t\t\t\t\t#\u542f\u7528\u5185\u90e8\u6e90\u5730\u5740\u8f6c\u6362\n  ipv6 nat\n"})})]})}function l(n={}){const{wrapper:e}={...(0,r.R)(),...n.components};return e?(0,t.jsx)(e,{...n,children:(0,t.jsx)(c,{...n})}):c(n)}},8453:(n,e,i)=>{i.d(e,{R:()=>o,x:()=>s});var t=i(6540);const r={},a=t.createContext(r);function o(n){const e=t.useContext(a);return t.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function s(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:o(n.components),t.createElement(a.Provider,{value:e},n.children)}}}]);