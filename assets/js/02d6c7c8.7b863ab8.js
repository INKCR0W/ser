"use strict";(self.webpackChunkser=self.webpackChunkser||[]).push([[6836],{2782:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>s,default:()=>a,frontMatter:()=>d,metadata:()=>o,toc:()=>c});var r=t(4848),i=t(8453);const d={sidebar_position:15},s=void 0,o={id:"\u4e8c\u3001\u670d\u52a1\u5668\u6a21\u5757/\u56db\u3001Linux\u4e91\u670d\u52a1\u914d\u7f6e/15\u3001ftp\u670d\u52a1 \u221a",title:"15\u3001ftp\u670d\u52a1 \u221a",description:"ftp\u670d\u52a1",source:"@site/docs/\u4e8c\u3001\u670d\u52a1\u5668\u6a21\u5757/\u56db\u3001Linux\u4e91\u670d\u52a1\u914d\u7f6e/15\u3001ftp\u670d\u52a1 \u221a.md",sourceDirName:"\u4e8c\u3001\u670d\u52a1\u5668\u6a21\u5757/\u56db\u3001Linux\u4e91\u670d\u52a1\u914d\u7f6e",slug:"/\u4e8c\u3001\u670d\u52a1\u5668\u6a21\u5757/\u56db\u3001Linux\u4e91\u670d\u52a1\u914d\u7f6e/15\u3001ftp\u670d\u52a1 \u221a",permalink:"/docs/\u4e8c\u3001\u670d\u52a1\u5668\u6a21\u5757/\u56db\u3001Linux\u4e91\u670d\u52a1\u914d\u7f6e/15\u3001ftp\u670d\u52a1 \u221a",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:15,frontMatter:{sidebar_position:15},sidebar:"tutorialSidebar",previous:{title:"14\u3001\u78c1\u76d8\u914d\u989d \u221a",permalink:"/docs/\u4e8c\u3001\u670d\u52a1\u5668\u6a21\u5757/\u56db\u3001Linux\u4e91\u670d\u52a1\u914d\u7f6e/14\u3001\u78c1\u76d8\u914d\u989d \u221a"},next:{title:"\u7f51\u7edc\u8fd0\u7ef4",permalink:"/docs/category/\u7f51\u7edc\u8fd0\u7ef4"}},l={},c=[{value:"1\u5c0f\u9898",id:"1\u5c0f\u9898",level:2},{value:"1.\u5b89\u88c5vsftpd",id:"1\u5b89\u88c5vsftpd",level:3},{value:"2.\u521b\u5efa\u7528\u6237\u5e76\u8bbe\u7f6e\u5bc6\u7801",id:"2\u521b\u5efa\u7528\u6237\u5e76\u8bbe\u7f6e\u5bc6\u7801",level:3},{value:"3.\u7f16\u8f91\u4e3b\u914d\u7f6e\u6587\u4ef6",id:"3\u7f16\u8f91\u4e3b\u914d\u7f6e\u6587\u4ef6",level:3},{value:"4.\u6743\u9650\u914d\u7f6e",id:"4\u6743\u9650\u914d\u7f6e",level:3},{value:"2\u5c0f\u9898",id:"2\u5c0f\u9898",level:2},{value:"1.\u521b\u5efa\u865a\u62df\u7528\u6237\u76ee\u5f55\u3001\u8d4b\u6743",id:"1\u521b\u5efa\u865a\u62df\u7528\u6237\u76ee\u5f55\u8d4b\u6743",level:3},{value:"2.\u914d\u7f6e\u865a\u62df\u7528\u6237",id:"2\u914d\u7f6e\u865a\u62df\u7528\u6237",level:3},{value:"3.\u521b\u5efa\u548c\u914d\u7f6e\u865a\u62df\u7528\u6237\u6743\u9650\u6587\u4ef6",id:"3\u521b\u5efa\u548c\u914d\u7f6e\u865a\u62df\u7528\u6237\u6743\u9650\u6587\u4ef6",level:3},{value:"3\u5c0f\u9898",id:"3\u5c0f\u9898",level:2}];function p(e){const n={code:"code",h2:"h2",h3:"h3",img:"img",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:"ftp\u670d\u52a1\n\u4efb\u52a1\u63cf\u8ff0\uff1a\u8bf7\u91c7\u7528FTP\u670d\u52a1\u5668\uff0c\u5b9e\u73b0\u6587\u4ef6\u5b89\u5168\u4f20\u8f93\u3002\n\uff081\uff09\u914d\u7f6elinux2\u4e3aFTP\u670d\u52a1\u5668\uff0c\u5b89\u88c5vsftpd\uff0c\u65b0\u5efa\u672c\u5730\u7528\u6237test\uff0c\u672c\u5730\u7528\u6237\u767b\u9646ftp\u540e\u7684\u76ee\u5f55\u4e3a/var/ftp/pub\uff0c\u53ef\u4ee5\u4e0a\u4f20\u4e0b\u8f7d\u3002\n\uff082\uff09\u914d\u7f6eftp\u865a\u62df\u7528\u6237\u8ba4\u8bc1\u6a21\u5f0f\uff0c\u865a\u62df\u7528\u6237ftp1\u548cftp2\u6620\u5c04\u4e3aftp\uff0cftp1\u767b\u5f55ftp\u540e\u7684\u76ee\u5f55\u4e3a/var/ftp/vdir/ftp1\uff0c\u53ef\u4ee5\u4e0a\u4f20\u4e0b\u8f7d,\u7981\u6b62\u4e0a\u4f20\u540e\u7f00\u540d\u4e3a.docx\u7684\u6587\u4ef6\uff1bftp2\u767b\u5f55ftp\u540e\u7684\u76ee\u5f55\u4e3a/var/ftp/vdir/ftp2\uff0c\u4ec5\u6709\u4e0b\u8f7d\u6743\u9650\u3002\n\uff083\uff09\u4f7f\u7528ftp\u547d\u4ee4\u5728\u672c\u673a\u9a8c\u8bc1\u3002"}),"\n",(0,r.jsx)(n.h2,{id:"1\u5c0f\u9898",children:"1\u5c0f\u9898"}),"\n",(0,r.jsx)(n.h3,{id:"1\u5b89\u88c5vsftpd",children:"1.\u5b89\u88c5vsftpd"}),"\n",(0,r.jsx)(n.p,{children:"yum install vsftpd*  ftp libdb*"}),"\n",(0,r.jsx)(n.h3,{id:"2\u521b\u5efa\u7528\u6237\u5e76\u8bbe\u7f6e\u5bc6\u7801",children:"2.\u521b\u5efa\u7528\u6237\u5e76\u8bbe\u7f6e\u5bc6\u7801"}),"\n",(0,r.jsx)(n.p,{children:"useradd test && echo Qwer1234|passwd --stdin test"}),"\n",(0,r.jsx)(n.h3,{id:"3\u7f16\u8f91\u4e3b\u914d\u7f6e\u6587\u4ef6",children:"3.\u7f16\u8f91\u4e3b\u914d\u7f6e\u6587\u4ef6"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"chroot_local_user=YES      #\u6ce8\u91ca \u8ba9\u7528\u6237\u767b\u5f55\u9501\u5b9a\u5230\u5bb6\u76ee\u5f55\nlocal_root=/var/ftp/pub    #\u65b0\u589e \u6307\u5b9a\u7528\u6237\u767b\u5f55\u5230\u7684\u76ee\u5f55\nallow_writeable_chroot=YES #\u662f\u5426\u6709\u5199\u5165\u6743\u9650\nchroot_list_enable=NO      #\u6ce8\u91ca \u8ba9\u767b\u5f55\u7528\u6237\u4e0d\u80fd\u5207\u6362\u5230\u5176\u4ed6\u76ee\u5f55\nchroot_list_file=/etc/vsftpd/chroot_list   #\u65b0\u589e \u53ea\u80fd\u8bbf\u95ee\u5bb6\u76ee\u5f55\u7684\u7528\u6237\u5217\u8868\uff0c\u9700\u8981\u81ea\u884c\u521b\u5efa\n"})}),"\n",(0,r.jsx)(n.h3,{id:"4\u6743\u9650\u914d\u7f6e",children:"4.\u6743\u9650\u914d\u7f6e"}),"\n",(0,r.jsx)(n.p,{children:"chmod 777 /var/ftp/pub #\u8d4b\u4e88pub\u76ee\u5f55\u6ee1\u6743\u9650"}),"\n",(0,r.jsx)(n.h2,{id:"2\u5c0f\u9898",children:"2\u5c0f\u9898"}),"\n",(0,r.jsx)(n.h3,{id:"1\u521b\u5efa\u865a\u62df\u7528\u6237\u76ee\u5f55\u8d4b\u6743",children:"1.\u521b\u5efa\u865a\u62df\u7528\u6237\u76ee\u5f55\u3001\u8d4b\u6743"}),"\n",(0,r.jsx)(n.p,{children:"mkdir /var/ftp/vdir\nmkdir /var/ftp/vdir/ftp1\nmkdir /var/ftp/vdir/ftp2\nchmod 777 /var/ftp/vdir/ftp1\nchmod 777 /var/ftp/vdir/ftp2"}),"\n",(0,r.jsx)(n.h3,{id:"2\u914d\u7f6e\u865a\u62df\u7528\u6237",children:"2.\u914d\u7f6e\u865a\u62df\u7528\u6237"}),"\n",(0,r.jsx)(n.p,{children:"cd /etc/vsftpd/"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"anonymous_enable=YES   #\u5141\u8bb8\u533f\u540d\u7528\u6237\u767b\u5f55\nanon_upload_enable=YES  #\u5141\u8bb8\u533f\u540d\u7528\u6237\u4e0a\u4f20\nanon_mkdir_write_enable=YES #\u5141\u8bb8\u533f\u540d\u7528\u6237\u5199\u5165/\u521b\u5efa\n\n\u6587\u4ef6\u5c3e\u90e8\u6dfb\u52a0\u4ee5\u4e0b\u4e09\u884c\nguest_enable=YES  #\u542f\u7528\u865a\u62df\u7528\u6237\nguest_username=ftp  #\u6620\u5c04\u7684\u533f\u540d\u7528\u6237\u4e3aftp\nuser_config_dir=/etc/vsftpd/vuser_conf #\u865a\u62df\u7528\u6237\u7684\u914d\u7f6e\u6587\u4ef6\u8def\u5f84\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"ftp1 \u865a\u62df\u7528\u6237\u540d\nQwer1234 \u7528\u6237\u5bc6\u7801\nftp2\nQwer1234\n"})}),"\n",(0,r.jsx)(n.p,{children:"db_load -T -t hash -f vuser_list vuser.db #\u751f\u6210db\u6570\u636e\u5e93\uff0c\u4f7f\u5176\u80fd\u591f\u5feb\u901f\u8bfb\u53d6"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"auth       sufficient   pam_userdb.so db=/etc/vsftpd/vuser\naccount    sufficient   pam_userdb.so db=/etc/vsftpd/vuser\n"})}),"\n",(0,r.jsxs)(n.p,{children:["\u6ce8\u610f\uff1a\u8fd9\u4e24\u884c\u7684\u4f4d\u7f6e\u662f\u72ec\u7acb\u7684\uff0c\u4e0d\u8981\u653e\u5230\u5df2\u5b58\u5728\u7684\u5185\u5bb9\u4e2d\uff0c\u5426\u5219\u4f1a\u63d0\u793a530\u767b\u5f55\u5931\u8d25\n",(0,r.jsx)(n.img,{src:"https://cdn.nlark.com/yuque/0/2024/png/33622884/1713595907227-e097fb53-c9b5-45d2-8542-cb0f1ba8bbfe.png#averageHue=%230b0605&clientId=u7fe7b5fc-a0b2-4&from=paste&height=287&id=u5df7ac58&originHeight=394&originWidth=1168&originalType=binary&ratio=1.375&rotation=0&showTitle=false&size=60315&status=done&style=none&taskId=u2ee62758-dc86-409d-ba81-0374450e21b&title=&width=849.4545454545455",alt:"image.png"})]}),"\n",(0,r.jsx)(n.h3,{id:"3\u521b\u5efa\u548c\u914d\u7f6e\u865a\u62df\u7528\u6237\u6743\u9650\u6587\u4ef6",children:"3.\u521b\u5efa\u548c\u914d\u7f6e\u865a\u62df\u7528\u6237\u6743\u9650\u6587\u4ef6"}),"\n",(0,r.jsx)(n.p,{children:"mkdir /etc/vsftpd/vuser_conf\ntouch /etc/vsftpd/vuser_conf/ftp1\ntouch /etc/vsftpd/vuser_conf/ftp2"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"write_enable=YES\ndeny_file=*.docx #\u7981\u6b62\u4e0a\u4f20.docx\u683c\u5f0f\u7684\u6587\u4ef6\nanon_upload_enable=YES\nanon_mkdir_write_enable=YES\nanon_other_write_enable=YES\nlocal_root=/var/ftp/vdir/ftp1\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"write_enable=NO  #\u4e0d\u5141\u8bb8\u5199\u5165\nanon_upload_enable=YES #\u533f\u540d\u7528\u6237\u4e0a\u4f20\u6743\u9650\nanon_mkdir_write_enable=YES #\u533f\u540d\u7528\u6237\u65b0\u589e\u76ee\u5f55\u6743\u9650\nanon_other_write_enable=YES #\u533f\u540d\u7528\u6237\u7684\u5176\u5b83\u6743\u9650\nlocal_root=/var/ftp/vdir/ftp2 #\u533f\u540d\u7528\u6237\u767b\u5f55\u5230\u7684\u76ee\u5f55\n"})}),"\n",(0,r.jsx)(n.p,{children:"systemc enable vsftpd.service --now"}),"\n",(0,r.jsx)(n.h2,{id:"3\u5c0f\u9898",children:"3\u5c0f\u9898"}),"\n",(0,r.jsx)(n.p,{children:"\u5728\u672c\u5730test\u7528\u6237\u7684\u767b\u5f55\u76ee\u5f55\u4e0a\u521b\u5efat.txt\n\u5728\u865a\u62df\u7528\u6237ftp1\u767b\u5f55\u76ee\u5f55\u521b\u5efaf1.txt\n\u5728\u865a\u62df\u7528\u6237ftp1\u767b\u5f55\u76ee\u5f55\u521b\u5efaf2.txt\n\u5728root\u76ee\u5f55\u521b\u5efa g.docx\u548cg.txt"}),"\n",(0,r.jsx)(n.p,{children:"\u4f7f\u7528Linux \xa0\u6d4b\u8bd5ftp\ncd /root/\nftp 10.4.120.102 #\u767b\u5f55\u5230ftp\u5e76\u8f93\u5165\u7528\u6237\u540d\u5bc6\u7801\nftp> put g.txt g.txt  #\u4e0a\u4f20\u5f53\u524d\u76ee\u5f55\u7684g.txt\nftp> get t.txt t.txt\xa0 \xa0 #\u4e0b\u8f7dt.txt\u5230\u5f53\u524d\u76ee\u5f55\nftp> put g.docx g.docx\xa0 \xa0 #\u4e0b\u8f7dg.txt\u5230\u5f53\u524d\u76ee\u5f55"}),"\n",(0,r.jsx)(n.p,{children:"Bye \xa0 \xa0 \xa0 \xa0#\u65ad\u5f00"}),"\n",(0,r.jsx)(n.p,{children:"\u5b9e\u9a8c\u95ee\u9898\u603b\u7ed3\uff1a\n1\u3001\u65e0\u6cd5\u4e0a\u4f20\u6587\u4ef6\uff08\u63d0\u793a227\u548c553\uff09\n\u4fee\u6539setsebool -P ftpd_full_access 1 \u4fee\u6539\u5b8c\u6210\u540e\u4f1a\u63d0\u793a500\u548c421\n\u4fee\u6539vsftpd.conf\uff0c\u5728chroot\u5904\u52a0\u5165\uff1aallow_writeable_chroot=YES\n\u91cd\u542f\u5c31\u89e3\u51b3\u4e86"}),"\n",(0,r.jsx)(n.p,{children:"2\u3001\u9650\u5236\u4e0a\u4f20.sh\u6587\u4ef6\n\u865a\u62df\u7528\u6237\u7684\u6743\u9650\u6587\u4ef6\u5904\u52a0\u5165\u4ee5\u4e0b\u5185\u5bb9\ndeny_file=*.sh"})]})}function a(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(p,{...e})}):p(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>s,x:()=>o});var r=t(6540);const i={},d=r.createContext(i);function s(e){const n=r.useContext(d);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),r.createElement(d.Provider,{value:n},e.children)}}}]);