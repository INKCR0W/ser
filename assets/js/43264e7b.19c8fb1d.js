"use strict";(self.webpackChunkser=self.webpackChunkser||[]).push([[9065],{9199:(e,t,i)=>{i.r(t),i.d(t,{assets:()=>r,contentTitle:()=>d,default:()=>g,frontMatter:()=>s,metadata:()=>o,toc:()=>c});var n=i(4848),a=i(8453);const s={sidebar_position:5},d=void 0,o={id:"\u4e00\u3001\u7f51\u7edc\u6a21\u5757/\u4e94\u3001\u5b89\u5168\u7ef4\u62a4",title:"\u4e94\u3001\u5b89\u5168\u7ef4\u62a4",description:"\u8bf4\u660e\uff1a\u6309\u7167 IP \u5730\u5740\u4ece\u5c0f\u5230\u5927\u7684\u987a\u5e8f\u7528\u201cIP/mask\u201d\u8868\u793a\uff0cIPv4 Any \u5730\u5740\u7528 0.0.0.0/0\uff0cIPv6 Any \u5730\u5740\u7528::/0\uff0c\u7981\u6b62\u4f7f\u7528\u5730\u5740\u6761\u76ee\u3002",source:"@site/docs/\u4e00\u3001\u7f51\u7edc\u6a21\u5757/\u4e94\u3001\u5b89\u5168\u7ef4\u62a4.md",sourceDirName:"\u4e00\u3001\u7f51\u7edc\u6a21\u5757",slug:"/\u4e00\u3001\u7f51\u7edc\u6a21\u5757/\u4e94\u3001\u5b89\u5168\u7ef4\u62a4",permalink:"/docs/\u4e00\u3001\u7f51\u7edc\u6a21\u5757/\u4e94\u3001\u5b89\u5168\u7ef4\u62a4",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:5,frontMatter:{sidebar_position:5},sidebar:"tutorialSidebar",previous:{title:"\u56db\u3001\u65e0\u7ebf\u90e8\u7f72",permalink:"/docs/\u4e00\u3001\u7f51\u7edc\u6a21\u5757/\u56db\u3001\u65e0\u7ebf\u90e8\u7f72"},next:{title:"\u5f00\u73ed",permalink:"/docs/\u5f00\u73ed"}},r={},c=[{value:"1\u5c0f\u9898",id:"1\u5c0f\u9898",level:2},{value:"2\u5c0f\u9898",id:"2\u5c0f\u9898",level:2},{value:"3\u5c0f\u9898",id:"3\u5c0f\u9898",level:2},{value:"4\u5c0f\u9898",id:"4\u5c0f\u9898",level:2},{value:"5\u5c0f\u9898\uff08\u5f85\u5b8c\u5584\uff09",id:"5\u5c0f\u9898\u5f85\u5b8c\u5584",level:2}];function l(e){const t={code:"code",h2:"h2",img:"img",p:"p",pre:"pre",...(0,a.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.p,{children:"\u8bf4\u660e\uff1a\u6309\u7167 IP \u5730\u5740\u4ece\u5c0f\u5230\u5927\u7684\u987a\u5e8f\u7528\u201cIP/mask\u201d\u8868\u793a\uff0cIPv4 Any \u5730\u5740\u7528 0.0.0.0/0\uff0cIPv6 Any \u5730\u5740\u7528::/0\uff0c\u7981\u6b62\u4f7f\u7528\u5730\u5740\u6761\u76ee\u3002"}),"\n",(0,n.jsx)(t.h2,{id:"1\u5c0f\u9898",children:"1\u5c0f\u9898"}),"\n",(0,n.jsxs)(t.p,{children:["1.FW1 \u914d\u7f6e IPv4 NAT\uff0cid \u4e3a 1\uff0c\u5b9e\u73b0\u96c6\u56e2\u4ea7\u54c1 1 \u6bb5 IPv4 \u8bbf\u95ee Internet IPv4\uff0c\u8f6c\u6362 ip/mask \u4e3a 200.200.200.16/28\uff0c\u4fdd\u8bc1\u6bcf\u4e00\u4e2a\u6e90 ip \u4ea7\u751f \u7684\u6240\u6709\u4f1a\u8bdd\u5c06\u88ab\u6620\u5c04\u5230\u540c\u4e00\u4e2a\u56fa\u5b9a\u7684 IP \u5730\u5740\u3002\n\u914d\u7f6eFW1\n",(0,n.jsx)(t.img,{src:"https://cdn.nlark.com/yuque/0/2024/png/33622884/1713179363911-26ac87a2-cf27-4ac6-90ed-c95d51897e05.png#averageHue=%23fdfcfc&clientId=u69021d19-85d0-4&from=paste&height=831&id=u05bf16da&originHeight=779&originWidth=1253&originalType=binary&ratio=0.9375&rotation=0&showTitle=false&size=68997&status=done&style=none&taskId=uab9efd92-7a5b-4323-a3a6-979e318d567&title=&width=1336.5333333333333",alt:"image.png"}),"\n",(0,n.jsx)(t.img,{src:"https://cdn.nlark.com/yuque/0/2024/png/33622884/1713179928211-ea2b7565-4dc9-42a5-8200-903facae4e9d.png#averageHue=%23f9f8f7&clientId=u69021d19-85d0-4&from=paste&height=112&id=vodNQ&originHeight=105&originWidth=1238&originalType=binary&ratio=0.9375&rotation=0&showTitle=false&size=14836&status=done&style=none&taskId=ucec8bea9-5c51-4c1e-990f-ce12524e3db&title=&width=1320.5333333333333",alt:"image.png"}),"\nFW1\u914d\u7f6e\nip route 0.0.0.0/0 200.200.200.1  #\u8bbf\u95ee\u5916\u7f51\u8def\u7531"]}),"\n",(0,n.jsxs)(t.p,{children:["SW3 internet\u6a21\u62df\u914d\u7f6e\nip route vrf Internet 200.200.200.16/28 200.200.200.2 #Internet\u8fd4\u56de\u8def\u7531\n",(0,n.jsx)(t.img,{src:"https://cdn.nlark.com/yuque/0/2024/png/33622884/1714817517877-89fced60-f047-47f7-b37e-4122ac95263a.png#averageHue=%230d0a08&clientId=u673a1512-5e3f-4&from=paste&height=159&id=u6579d415&originHeight=179&originWidth=1334&originalType=binary&ratio=1.125&rotation=0&showTitle=false&size=19220&status=done&style=none&taskId=ua7ed1555-a433-41c4-b23b-741e51e2599&title=&width=1185.7777777777778",alt:"image.png"})]}),"\n",(0,n.jsx)(t.h2,{id:"2\u5c0f\u9898",children:"2\u5c0f\u9898"}),"\n",(0,n.jsxs)(t.p,{children:["2.FW1 \u914d\u7f6e NAT64\uff0cid \u4e3a 2\uff0c\u5b9e\u73b0\u96c6\u56e2\u4ea7\u54c1 1 \u6bb5 IPv6 \u8bbf\u95ee Internet IPv4\uff0c\u8f6c\u6362\u4e3a\u51fa\u63a5\u53e3 IP\uff0cIPv4 \u8f6c IPv6 \u5730\u5740\u524d\u7f00\u4e3a 64:ff9b::/96\u3002\n\u914d\u7f6eFW1\n",(0,n.jsx)(t.img,{src:"https://cdn.nlark.com/yuque/0/2024/png/33622884/1713179792173-0270fbd8-4e64-492d-a21e-9f58d3ca3e65.png#averageHue=%23fdfcfc&clientId=u69021d19-85d0-4&from=paste&height=875&id=HB3WM&originHeight=820&originWidth=1009&originalType=binary&ratio=0.9375&rotation=0&showTitle=false&size=61824&status=done&style=none&taskId=ua7707e91-3304-4c71-a818-6a4df3bb131&title=&width=1076.2666666666667",alt:"image.png"}),"\n",(0,n.jsx)(t.img,{src:"https://cdn.nlark.com/yuque/0/2024/png/33622884/1713179956707-f34e403f-d90c-4f05-95c0-92afcd3bce0c.png#averageHue=%23faf9f8&clientId=u69021d19-85d0-4&from=paste&height=203&id=u4024fa97&originHeight=190&originWidth=1248&originalType=binary&ratio=0.9375&rotation=0&showTitle=false&size=29369&status=done&style=none&taskId=u6c465127-5a74-4e01-8460-ee97b151ef5&title=&width=1331.2",alt:"image.png"}),"\n",(0,n.jsx)(t.img,{src:"https://cdn.nlark.com/yuque/0/2024/png/33622884/1714896549690-f79fdb22-be8f-4d53-8a99-ad386e6d056a.png#averageHue=%23dce8b6&clientId=u578d56e8-21be-4&from=paste&height=331&id=u44fd313d&originHeight=372&originWidth=1584&originalType=binary&ratio=1.125&rotation=0&showTitle=false&size=49192&status=done&style=none&taskId=uaf18e054-b8c8-4b42-aa3e-c3a18d2c32a&title=&width=1408",alt:"image.png"}),"\nFW1\u914d\u7f6e\nipv6 route ::/0 FE80::203:FFF:FE3F",":C5B6","  ethernet0/3 #\u8bbf\u95ee\u5916\u7f51\u8def\u7531\n",(0,n.jsx)(t.img,{src:"https://cdn.nlark.com/yuque/0/2024/png/33622884/1714899272091-d4401c22-0f67-4978-bf34-d2affcccf35f.png#averageHue=%230b0806&clientId=u578d56e8-21be-4&from=paste&height=209&id=TPc58&originHeight=235&originWidth=1546&originalType=binary&ratio=1.125&rotation=0&showTitle=false&size=24724&status=done&style=none&taskId=ueb0d23eb-e1bc-4e26-b6e1-25d12174ee7&title=&width=1374.2222222222222",alt:"image.png"})]}),"\n",(0,n.jsx)(t.h2,{id:"3\u5c0f\u9898",children:"3\u5c0f\u9898"}),"\n",(0,n.jsxs)(t.p,{children:["3.FW1 \u548c FW2 \u7b56\u7565\u9ed8\u8ba4\u52a8\u4f5c\u4e3a\u62d2\u7edd\uff0cFW1 \u5141\u8bb8\u96c6\u56e2\u4ea7\u54c1 1 \u6bb5 IPv4 \u548c IPv6 \u8bbf\u95ee Internet \u4efb\u610f\u670d\u52a1\u3002\n\u914d\u7f6e",(0,n.jsx)(t.img,{src:"https://cdn.nlark.com/yuque/0/2024/png/33622884/1713417472751-a716b6e3-8d3b-46bf-b052-7f90d3846b33.png#averageHue=%23fdfdfd&clientId=u6629b3ce-ba0b-4&from=paste&height=626&id=qPRwZ&originHeight=783&originWidth=1120&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=51790&status=done&style=none&taskId=ube238c05-1ef2-4c27-a281-190dd343ca3&title=&width=896",alt:"image.png"}),"\n",(0,n.jsx)(t.img,{src:"https://cdn.nlark.com/yuque/0/2024/png/33622884/1713417608385-43a689a4-61ef-4a20-ba76-f5bd3a69018f.png#averageHue=%23fdfdfd&clientId=u6629b3ce-ba0b-4&from=paste&height=597&id=CgUmY&originHeight=746&originWidth=1068&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=50254&status=done&style=none&taskId=u8ac2a002-808f-4356-9b32-f3a180ac269&title=&width=854.4",alt:"image.png"}),"\n",(0,n.jsx)(t.img,{src:"https://cdn.nlark.com/yuque/0/2024/png/33622884/1714903271659-ade565af-c796-4a27-bdfd-d436749d2857.png#averageHue=%23e3c499&clientId=ufcc1bd19-54c4-4&from=paste&height=346&id=u151476b5&originHeight=389&originWidth=1846&originalType=binary&ratio=1.125&rotation=0&showTitle=false&size=59477&status=done&style=none&taskId=u27d89713-b1cd-4eae-84e8-f449d1437e2&title=&width=1640.888888888889",alt:"image.png"})]}),"\n",(0,n.jsx)(t.h2,{id:"4\u5c0f\u9898",children:"4\u5c0f\u9898"}),"\n",(0,n.jsxs)(t.p,{children:["4.FW2 \u5141\u8bb8\u529e\u4e8b\u5904\u4ea7\u54c1 IPv4 \u8bbf\u95ee\u96c6\u56e2\u4ea7\u54c1 1 \u6bb5 https \u670d\u52a1\uff0c\u5141\u8bb8\u96c6 \u56e2\u4ea7\u54c1 1 \u6bb5\u548c\u4ea7\u54c1 2 \u6bb5\u8bbf\u95ee SW3 \u6a21\u62df\u529e\u4e8b\u5904 Loopback2 IPv4\u3001FW2 Loopback1 IPv4\u3001\u529e\u4e8b\u5904\u4ea7\u54c1 IPv4\u3002\n\u914d\u7f6e\u529e\u4e8b\u5904\u4ea7\u54c1\uff1aSW3 VLAN 110\n",(0,n.jsx)(t.img,{src:"https://cdn.nlark.com/yuque/0/2024/png/33622884/1713417973571-e4746025-0732-4ec1-96f6-86d48bb960f3.png#averageHue=%23fdfdfd&clientId=u6629b3ce-ba0b-4&from=paste&height=627&id=aLEsA&originHeight=784&originWidth=1065&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=52152&status=done&style=none&taskId=u2430f626-1be1-466f-a9d0-b4f2af50842&title=&width=852",alt:"image.png"}),"\n\u96c6\u56e2\u4ea7\u54c11\u6bb5\uff1aSW1 VLAN 11\n\u96c6\u56e2\u4ea7\u54c12\u6bb5\uff1aSW2 VLAN 21\n\u529e\u4e8b\u5904loo2\uff1a10.4.3.2\nFW2 loo1\uff1a10.4.8.1\n\u529e\u4e8b\u5904\u4ea7\u54c1\uff1aVLAN 110\n",(0,n.jsx)(t.img,{src:"https://cdn.nlark.com/yuque/0/2024/png/33622884/1713418154695-92967ab3-9a2d-4449-9548-81dc7983b442.png#averageHue=%23fdfdfd&clientId=u6629b3ce-ba0b-4&from=paste&height=657&id=OlsRs&originHeight=821&originWidth=1048&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=56647&status=done&style=none&taskId=u69b0e71e-89de-4a1a-874e-4b867e04970&title=&width=838.4",alt:"image.png"})]}),"\n",(0,n.jsx)(t.h2,{id:"5\u5c0f\u9898\u5f85\u5b8c\u5584",children:"5\u5c0f\u9898\uff08\u5f85\u5b8c\u5584\uff09"}),"\n",(0,n.jsx)(t.p,{children:"5.FW1 \u4e0e RT2 \u4e4b\u95f4\u7528 Internet \u4e92\u8054\u5730\u5740\u5efa\u7acb GRE Over IPSec VPN\uff0c \u5b9e\u73b0 Loopback4 \u4e4b\u95f4\u7684\u52a0\u5bc6\u8bbf\u95ee\u3002RT2 \u7684 ACL \u540d\u79f0\u4e3a ACL-VPN\uff0c transform-set \u540d\u79f0\u4e3a SET-1\uff0ccrypto map \u540d\u79f0\u4e3a MAP-1\u3002FW1 \u7684 isakmp proposal \u540d\u79f0\u4e3a P-1\uff0cisakmp peer \u540d\u79f0\u4e3a PEER-1\uff0cipsec proposal \u540d\u79f0\u4e3a P-2\uff0ctunnel ipsec \u540d\u79f0\u4e3a IPSEC-1\uff0ctunnel gre \u540d \u79f0\u4e3a GRE-1\u3002"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{children:"transform-set\uff1a\u53d8\u6362\u96c6\ncrypto map\uff1a\u52a0\u5bc6\u6620\u5c04\n\nisakmp proposal\uff08IKE\u5b89\u5168\u63d0\u6848\uff09\u5305\u542b\u4e86\u5728IPsec VPN\u4e2d\u5bf9\u7b49\u4f53\u95f4\u534f\u5546\u5b89\u5168\u53c2\u6570\u7684\u5efa\u8bae\u3002\u8fd9\u4e9b\u53c2\u6570\u5305\u62ec\u4f46\u4e0d\u9650\u4e8e\uff1a\n\u52a0\u5bc6\u7b97\u6cd5\uff1a\u5982AES\uff08\u9ad8\u7ea7\u52a0\u5bc6\u6807\u51c6\uff09\u3001DES\uff08\u6570\u636e\u52a0\u5bc6\u6807\u51c6\uff09\u7b49\u3002\n\u8ba4\u8bc1\u7b97\u6cd5\uff1a\u5982SHA\uff08\u5b89\u5168\u54c8\u5e0c\u7b97\u6cd5\uff09\u3001MD5\uff08\u6d88\u606f\u6458\u89815\uff09\u7b49\u3002\n\u5bc6\u94a5\u751f\u547d\u5468\u671f\uff1a\u5b9a\u4e49\u4e86\u5b89\u5168\u5173\u8054\u7684\u751f\u5b58\u5468\u671f\uff0c\u5373\u5bc6\u94a5\u7684\u6709\u6548\u65f6\u95f4\u3002\nDiffie-Hellman\uff08DH\uff09\u7ec4\uff1a\u7528\u4e8e\u5bc6\u94a5\u4ea4\u6362\u7684DH\u7b97\u6cd5\u7684\u7ec4\u522b\uff0c\u4e0d\u540c\u7684\u7ec4\u63d0\u4f9b\u4e86\u4e0d\u540c\u7684\u5b89\u5168\u5f3a\u5ea6\u3002\n\u5b89\u5168\u534f\u8bae\uff1a\u5982ESP\uff08\u5c01\u88c5\u5b89\u5168\u8d1f\u8f7d\uff09\u6216AH\uff08\u8ba4\u8bc1\u5934\uff09\u3002\n\n"})}),"\n",(0,n.jsxs)(t.p,{children:["FW1\u914d\u7f6e",(0,n.jsx)(t.img,{src:"https://cdn.nlark.com/yuque/0/2024/png/33622884/1714821014742-79ac2703-a3e4-4c53-a601-42fcb3471fc0.png#averageHue=%23fcfcfb&clientId=u673a1512-5e3f-4&from=paste&height=551&id=ue0c7c4bd&originHeight=620&originWidth=1528&originalType=binary&ratio=1.125&rotation=0&showTitle=false&size=63332&status=done&style=none&taskId=ua73d2844-77bf-4959-805f-9638316fa58&title=&width=1358.2222222222222",alt:"image.png"}),"\n",(0,n.jsx)(t.img,{src:"https://cdn.nlark.com/yuque/0/2024/png/33622884/1714821531081-f686bb55-4c75-4d19-95c9-d67df10fb7d7.png#averageHue=%23f9f9f8&clientId=u673a1512-5e3f-4&from=paste&height=644&id=ua0f2da31&originHeight=724&originWidth=1581&originalType=binary&ratio=1.125&rotation=0&showTitle=false&size=72415&status=done&style=none&taskId=u1e540c80-dbe3-4e63-95a7-589cfb35500&title=&width=1405.3333333333333",alt:"image.png"}),"\n",(0,n.jsx)(t.img,{src:"https://cdn.nlark.com/yuque/0/2024/png/33622884/1714821561409-32b491a5-c48e-4578-b45f-8f590578fdd6.png#averageHue=%23f9f9f9&clientId=u673a1512-5e3f-4&from=paste&height=694&id=ucab34f40&originHeight=781&originWidth=1581&originalType=binary&ratio=1.125&rotation=0&showTitle=false&size=62607&status=done&style=none&taskId=uc3ca94d0-244d-412f-898b-127ad14c037&title=&width=1405",alt:"image.png"}),"\n",(0,n.jsx)(t.img,{src:"https://cdn.nlark.com/yuque/0/2024/png/33622884/1714821603668-5d8170b2-bbdb-4d6c-8216-0a242803be9f.png#averageHue=%23f8f8f8&clientId=u673a1512-5e3f-4&from=paste&height=520&id=ubbb28c0e&originHeight=585&originWidth=1581&originalType=binary&ratio=1.125&rotation=0&showTitle=false&size=65940&status=done&style=none&taskId=ufca2e5c3-8453-4a63-86c7-e337a37d197&title=&width=1405.3333333333333",alt:"image.png"}),"\nRT2\u914d\u7f6e"]})]})}function g(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(l,{...e})}):l(e)}},8453:(e,t,i)=>{i.d(t,{R:()=>d,x:()=>o});var n=i(6540);const a={},s=n.createContext(a);function d(e){const t=n.useContext(s);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:d(e.components),n.createElement(s.Provider,{value:t},e.children)}}}]);