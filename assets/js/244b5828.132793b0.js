"use strict";(self.webpackChunkser=self.webpackChunkser||[]).push([[2934],{1582:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>l,contentTitle:()=>r,default:()=>p,frontMatter:()=>s,metadata:()=>d,toc:()=>o});var i=t(4848),a=t(8453);const s={sidebar_position:13},r=void 0,d={id:"\u4e8c\u3001\u670d\u52a1\u5668\u6a21\u5757/\u56db\u3001Linux\u4e91\u670d\u52a1\u914d\u7f6e/13\u3001podman\u670d\u52a1-arm \u221a",title:"13\u3001podman\u670d\u52a1-arm \u221a",description:"\u9898\u76ee\uff1a",source:"@site/docs/\u4e8c\u3001\u670d\u52a1\u5668\u6a21\u5757/\u56db\u3001Linux\u4e91\u670d\u52a1\u914d\u7f6e/13\u3001podman\u670d\u52a1-arm \u221a.md",sourceDirName:"\u4e8c\u3001\u670d\u52a1\u5668\u6a21\u5757/\u56db\u3001Linux\u4e91\u670d\u52a1\u914d\u7f6e",slug:"/\u4e8c\u3001\u670d\u52a1\u5668\u6a21\u5757/\u56db\u3001Linux\u4e91\u670d\u52a1\u914d\u7f6e/13\u3001podman\u670d\u52a1-arm \u221a",permalink:"/docs/\u4e8c\u3001\u670d\u52a1\u5668\u6a21\u5757/\u56db\u3001Linux\u4e91\u670d\u52a1\u914d\u7f6e/13\u3001podman\u670d\u52a1-arm \u221a",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:13,frontMatter:{sidebar_position:13},sidebar:"tutorialSidebar",previous:{title:"12\u3001podman\u670d\u52a1x86 \u221a",permalink:"/docs/\u4e8c\u3001\u670d\u52a1\u5668\u6a21\u5757/\u56db\u3001Linux\u4e91\u670d\u52a1\u914d\u7f6e/12\u3001podman\u670d\u52a1x86 \u221a"},next:{title:"14\u3001\u78c1\u76d8\u914d\u989d \u221a",permalink:"/docs/\u4e8c\u3001\u670d\u52a1\u5668\u6a21\u5757/\u56db\u3001Linux\u4e91\u670d\u52a1\u914d\u7f6e/14\u3001\u78c1\u76d8\u914d\u989d \u221a"}},l={},o=[{value:"<strong>\u9898\u76ee\uff1a</strong>",id:"\u9898\u76ee",level:2},{value:"\u914d\u7f6e\u6b65\u9aa4\uff1a",id:"\u914d\u7f6e\u6b65\u9aa4",level:2},{value:"1\u5c0f\u9898",id:"1\u5c0f\u9898",level:2},{value:"1.1 \u5b89\u88c5podman",id:"11-\u5b89\u88c5podman",level:3},{value:"1.2 \u5bfc\u5165\u955c\u50cf",id:"12-\u5bfc\u5165\u955c\u50cf",level:3},{value:"1.3 \u521b\u5efa\u5bb9\u5668",id:"13-\u521b\u5efa\u5bb9\u5668",level:3},{value:"1.4 \u5bb9\u5668\u914d\u7f6e",id:"14-\u5bb9\u5668\u914d\u7f6e",level:3},{value:"1.5 \u5728\u5bb9\u5668\u4e2d\u5b89\u88c5httpd\uff0c\u8fdb\u884c\u76f8\u5e94\u914d\u7f6e",id:"15-\u5728\u5bb9\u5668\u4e2d\u5b89\u88c5httpd\u8fdb\u884c\u76f8\u5e94\u914d\u7f6e",level:3},{value:"2\u5c0f\u9898",id:"2\u5c0f\u9898",level:2},{value:"2.1 \u914d\u7f6e\u79c1\u6709\u4ed3\u5e93",id:"21-\u914d\u7f6e\u79c1\u6709\u4ed3\u5e93",level:3},{value:"2.2 \u5bfc\u5165registry\u955c\u50cf",id:"22-\u5bfc\u5165registry\u955c\u50cf",level:3}];function c(n){const e={a:"a",code:"code",h2:"h2",h3:"h3",img:"img",p:"p",pre:"pre",strong:"strong",...(0,a.R)(),...n.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e.h2,{id:"\u9898\u76ee",children:(0,i.jsx)(e.strong,{children:"\u9898\u76ee\uff1a"})}),"\n",(0,i.jsx)(e.p,{children:"\u8bf7\u91c7\u7528 podman\uff0c\u5b9e\u73b0\u5bb9\u5668\u865a\u62df\u5316\u6280\u672f\u3002\n1\u3001\u5728 linux3 \u4e0a\u5b89\u88c5 podman\uff0c\u5bfc\u5165 rockylinux-9.tar \u955c\u50cf\u3002 \u521b\u5efa\u540d\u79f0\u4e3a skills \u7684\u5bb9\u5668\uff0c\u6620\u5c04\u672c\u673a\u7684 8000 \u7aef\u53e3\u5230\u5bb9\u5668\u7684 80 \u7aef\u53e3\uff0c \u5728\u5bb9\u5668\u5185\u5b89\u88c5 httpd\uff0c\u9ed8\u8ba4\u7f51\u9875\u5185\u5bb9\u4e3a\u201cHelloPodman\u201d\u3002\n2\u3001\u914d\u7f6e https \u8bbf\u95ee\u7684\u79c1\u6709\u4ed3\u5e93\uff0c\u767b\u5f55\u7528\u6237\u548c\u5bc6\u7801\u5747\u4e3a admin\u3002\u5bfc\u5165registry.tar \u955c\u50cf\uff0c\u521b\u5efa\u540d\u79f0\u4e3a registry \u7684\u5bb9\u5668\u3002\n3\u3001\u4fee \u6539 rockylinux \u955c\u50cf\u7684tag\u4e3alinux3.skills.lan:5000/rockylinux:9\uff0c\u4e0a\u4f20\u8be5\u955c\u50cf\u5230\u79c1\u6709\u4ed3\u5e93\u3002"}),"\n",(0,i.jsx)(e.h2,{id:"\u914d\u7f6e\u6b65\u9aa4",children:"\u914d\u7f6e\u6b65\u9aa4\uff1a"}),"\n",(0,i.jsx)(e.h2,{id:"1\u5c0f\u9898",children:"1\u5c0f\u9898"}),"\n",(0,i.jsx)(e.h3,{id:"11-\u5b89\u88c5podman",children:"1.1 \u5b89\u88c5podman"}),"\n",(0,i.jsx)(e.p,{children:"yum install podman* -y\nsystemctl enable --now podman"}),"\n",(0,i.jsx)(e.h3,{id:"12-\u5bfc\u5165\u955c\u50cf",children:"1.2 \u5bfc\u5165\u955c\u50cf"}),"\n",(0,i.jsxs)(e.p,{children:["podman load -i rockylinux-9.tar\npodman images  #\u67e5\u770b\u5bfc\u5165\u7684\u955c\u50cf\u4fe1\u606f\n",(0,i.jsx)(e.img,{src:"https://cdn.nlark.com/yuque/0/2024/png/33622884/1706090679574-18dfe548-3992-4aee-9f9a-92f29b52ba03.png#averageHue=%23320c26&clientId=u0c7e01e1-0e05-4&from=paste&height=80&id=vkvyA&originHeight=80&originWidth=736&originalType=binary&ratio=1&rotation=0&showTitle=false&size=26386&status=done&style=none&taskId=u7353ca89-cf49-47c0-ac9c-eb1d128d100&title=&width=736",alt:"image.png"})]}),"\n",(0,i.jsx)(e.h3,{id:"13-\u521b\u5efa\u5bb9\u5668",children:"1.3 \u521b\u5efa\u5bb9\u5668"}),"\n",(0,i.jsx)(e.p,{children:"podman run -itd -p 8000:80 --name skills name/ID /bin/bash\n\u6ce8\u610f\uff01\u52a0/bin/bash \u8ba9\u7528\u6237\u4e0e\u5bb9\u5668\u80fd\u6b63\u5e38\u4ea4\u4e92\uff0c\u5373\u542f\u52a8\u4e00\u4e2aBash shell"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"podman ps -a\t\t\t\t#\u67e5\u770b\u5bb9\u5668\npodman stop skills  #\u505c\u6b62\u5bb9\u5668\npodman start skills #\u542f\u52a8\u5bb9\u5668\npodman rm skills\t\t#\u5220\u9664\u5bb9\u5668\npodman images\t\t\t\t\t\t\t#\u67e5\u770b\u5bb9\u5668\npodman rmi \u955c\u50cf\u540d:tag/ID\t#\u5220\u9664\u955c\u50cf\n\n"})}),"\n",(0,i.jsx)(e.h3,{id:"14-\u5bb9\u5668\u914d\u7f6e",children:"1.4 \u5bb9\u5668\u914d\u7f6e"}),"\n",(0,i.jsx)(e.p,{children:"podman exec -it skills bash #\u4ee5bash\u542f\u52a8\u8fdb\u5165skills\u5bb9\u5668"}),"\n",(0,i.jsx)(e.h3,{id:"15-\u5728\u5bb9\u5668\u4e2d\u5b89\u88c5httpd\u8fdb\u884c\u76f8\u5e94\u914d\u7f6e",children:"1.5 \u5728\u5bb9\u5668\u4e2d\u5b89\u88c5httpd\uff0c\u8fdb\u884c\u76f8\u5e94\u914d\u7f6e"}),"\n",(0,i.jsxs)(e.p,{children:["\u914d\u7f6ehttp\u7f51\u7edc\u6e90\n",(0,i.jsx)(e.img,{src:"https://cdn.nlark.com/yuque/0/2024/png/33622884/1706090538417-fd36d7c5-07fb-474e-82b1-7d469399fbd7.png#averageHue=%23310b25&clientId=u0c7e01e1-0e05-4&from=paste&height=242&id=u59562248&originHeight=242&originWidth=568&originalType=binary&ratio=1&rotation=0&showTitle=false&size=33901&status=done&style=none&taskId=ub4553832-57ae-4e19-b5c9-2f2e54c3f38&title=&width=568",alt:"image.png"}),"\nyum clean all\nyum makecache"]}),"\n",(0,i.jsx)(e.p,{children:'yum install httpd\necho "Helledocker" > /var/www/html/index.html\nhttpd -k start\ncurl localhost'}),"\n",(0,i.jsx)(e.h2,{id:"2\u5c0f\u9898",children:"2\u5c0f\u9898"}),"\n",(0,i.jsx)(e.h3,{id:"21-\u914d\u7f6e\u79c1\u6709\u4ed3\u5e93",children:"2.1 \u914d\u7f6e\u79c1\u6709\u4ed3\u5e93"}),"\n",(0,i.jsx)(e.p,{children:'vim /etc/containers/registries.conf\nprefix = "linux3.skills.lan:5000"  #\u6307\u5b9a\u955c\u50cf\u524d\u7f00\nlocation = "linux3.skills.lan:5000" #\u6307\u5b9a\u83b7\u53d6\u5730\u5740\ninsecure = true #\u5141\u8bb8\u901a\u8fc7http\u534f\u8bae\u83b7\u53d6\u955c\u50cf'}),"\n",(0,i.jsx)(e.p,{children:"systemctl daemon-reload    #\u91cd\u65b0\u52a0\u8f7d\u6240\u6709 systemd \u5b88\u62a4\u7a0b\u5e8f\u914d\u7f6e\u6587\u4ef6\nsystemctl restart podman    #\u91cd\u542f\u542f\u52a8podman\uff0c\u79c1\u6709\u4ed3\u5e93\u7684\u914d\u7f6e\u751f\u6548"}),"\n",(0,i.jsx)(e.h3,{id:"22-\u5bfc\u5165registry\u955c\u50cf",children:"2.2 \u5bfc\u5165registry\u955c\u50cf"}),"\n",(0,i.jsxs)(e.p,{children:["podman load -i registryarm.tar\n",(0,i.jsx)(e.img,{src:"https://cdn.nlark.com/yuque/0/2024/png/33622884/1713355843178-08704089-d346-406f-9ddc-d28e11b683b8.png#averageHue=%23110e0c&clientId=ub7c60c24-82a0-4&from=paste&height=200&id=ud69b90f2&originHeight=250&originWidth=987&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=27331&status=done&style=none&taskId=uc162e4c1-291b-4bdb-9c9e-a9c7ccdcb70&title=&width=789.6",alt:"image.png"}),"\nmkdir /podman/admin -p    #\u767b\u5f55\u7528\u6237\u5bc6\u7801\u5b58\u653e\u70b9\nmkdir /podman/registry      #\u955c\u50cf\u5b58\u653e\u70b9\nmkdir /podman/cert\t     #\u8bc1\u4e66\u5b58\u653e\u70b9\nhtpasswd -Bc /podman/admin/htpasswd admin\t#\u8bbe\u7f6ehtpasswd\u8d26\u6237\u5bc6\u7801\ncat /etc/ssl/ca.crt >> /etc/pki/tls/certs/ca-bundle.crt  #ca\u8bc1\u4e66\u4eceLinux1\u53d1\u9001\u8fc7\u6765\n",(0,i.jsx)(e.img,{src:"https://cdn.nlark.com/yuque/0/2024/png/33622884/1706188454651-18a2c4b0-5e91-4667-b5d3-a6535f3e1479.png#averageHue=%23310b25&clientId=u64221790-2036-4&from=paste&height=107&id=u9ec7caab&originHeight=107&originWidth=747&originalType=binary&ratio=1&rotation=0&showTitle=false&size=28754&status=done&style=none&taskId=ub3a5a635-fb09-4ae3-91d5-1237b63d496&title=&width=747",alt:"image.png"})]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:'podman run -d --name registry \\\n-p 5000:5000 \\\n-v /podman/admin/:/auth:z \\\n-e "REGISTRY_AUTH=htpasswd" \\\n-e "REGISTRY_AUTH_HTPASSWD_REALM=Registry Realm" \\\n-e REGISTRY_AUTH_HTPASSWD_PATH=/auth/htpasswd \\\n-v /podman/cert:/certs \\\n-e REGISTRY_HTTP_ADDR=0.0.0.0:5000 \\\n-e REGISTRY_HTTP_TLS_CERTIFICATE=/certs/skills.crt \\\n-e REGISTRY_HTTP_TLS_KEY=/certs/skills.key registry:latest \\\nregistry\n\n\u4ee5\u4e0b\u4e3a\u914d\u7f6e\u8bf4\u660e\uff0c\u4e0a\u9762\u7684\u662f\u6b63\u5f0f\u914d\u7f6e\npodman run -itd --name registry \\\n-p 5000:5000 \\      #\u5c06\u4e3b\u673a\u76845000\u7aef\u53e3\u6620\u5c04\u5230\u5bb9\u5668\u76845000\u7aef\u53e3\n-v /podman/registry/:/var/lib/registry:z \\ #\u5c06\u4e3b\u673a\u7684/podman/registry/\u6302\u8f7d\u5230\u5bb9\u5668\u7684/var/lib/registry\uff0c\u5e76\u542f\u7528\u6302\u8f7d\u7684\u6743\u9650\u68c0\u67e5\u3002\n-v /podman/admin/:/auth:z \\\t\t#\u5c06\u4e3b\u673a\u7684/podman/admin/\u76ee\u5f55\u6302\u8f7d\u5230\u5bb9\u5668\u7684/auth\u76ee\u5f55\uff0c\u5e76\u542f\u7528\u6302\u8f7d\u7684\u6743\u9650\u68c0\u67e5\u3002\n-e "REGISTRY_AUTH=htpasswd" \\  #\u8bbe\u7f6e\u79c1\u6709\u4ed3\u5e93\u7684\u8eab\u4efd\u9a8c\u8bc1\u7c7b\u578b\u4e3ahtpasswd\u3002\n-e "REGISTRY_AUTH_HTPASSWD_REALM=Registry Realm" \\\t#\u8bbe\u7f6e\u79c1\u6709\u4ed3\u5e93\u7684\u8eab\u4efd\u9a8c\u8bc1\u57df\n-e REGISTRY_AUTH_HTPASSWD_PATH=/auth/htpasswd \\   #\u6307\u5b9ahtpasswd\u6587\u4ef6\u8def\u5f84\u3002\n  #\u5c06\u4e3b\u673a\u7684/podman/cert/\u76ee\u5f55\u6302\u8f7d\u5230\u5bb9\u5668\u7684/certs\u76ee\u5f55\uff0c\u5e76\u542f\u7528\u6302\u8f7d\u7684\u6743\u9650\u68c0\u67e5\u3002\n-e "REGISTRY_HTTP_TLS_CERTIFICATE=/certs/skills.crt" \\ #\u8bbe\u7f6e\u73af\u5883\u53d8\u91cf\uff0c\u6307\u5b9a\u8bc1\u4e66\u8def\u5f84\n-e "REGISTRY_HTTP_TLS_KEY=/certs/skills.key" \\ #\u8bbe\u7f6e\u73af\u5883\u53d8\u91cf\uff0c\u6307\u5b9a\u79c1\u94a5\u7684\u8def\u5f84\n-e REGISTRY_COMPATIBILITY_SCHEMA1_ENABLED=true \\ #\u542f\u7528\u517c\u5bb9\u6027\u6a21\u5f0f\uff0c\u652f\u6301\u65e7\u7248\u672c\u7684\u955c\u50cf\n-e REGISTRY_STORAGE_DELETE_ENABLED=true \\  #\u542f\u7528\u5220\u9664\u955c\u50cf\u529f\u80fd\uff0c\u5141\u8bb8\u5220\u9664\u955c\u50cf\nregistry\n'})}),"\n",(0,i.jsxs)(e.p,{children:["podman tag 210996f98b85 linux3.skills.lan:5000/rockylinux:9  #\u4fee\u6539\u6807\u7b7e\n",(0,i.jsx)(e.img,{src:"https://cdn.nlark.com/yuque/0/2024/png/33622884/1713358680464-637ffc09-8b90-433c-a732-8835eec565ff.png#averageHue=%2314120f&clientId=ub7c60c24-82a0-4&from=paste&height=118&id=ue2e90e4b&originHeight=147&originWidth=1205&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=19746&status=done&style=none&taskId=uda5061ce-5015-4129-8233-0a25a452494&title=&width=964",alt:"image.png"}),"\npodman login -u admin -p admin linux3.skills.lan:5000            #\u767b\u5f55\u5230\u79c1\u6709\u4ed3\u5e93\n",(0,i.jsx)(e.img,{src:"https://cdn.nlark.com/yuque/0/2024/png/33622884/1713358654869-62841793-274b-4a63-a34f-10834c09848e.png#averageHue=%2314110e&clientId=ub7c60c24-82a0-4&from=paste&height=38&id=uf79a169d&originHeight=47&originWidth=996&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=5703&status=done&style=none&taskId=ud3ba5a1d-ef3d-40b0-88ec-65ecf64ad1a&title=&width=796.8",alt:"image.png"}),"\npodman push --tls-verify=false linux3.skills.lan:5000/rockylinux:9 #\u4e0a\u4f20  rockylinux:9\u672c\u5730\u955c\u50cf\u5230linux3.skills.lan:5000\u4ed3\u5e93\n",(0,i.jsx)(e.img,{src:"https://cdn.nlark.com/yuque/0/2024/png/33622884/1713358615022-f50b1874-ab10-4712-8211-674e2e0283cf.png#averageHue=%23100e0c&clientId=ub7c60c24-82a0-4&from=paste&height=110&id=uf452cf70&originHeight=137&originWidth=1177&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=16164&status=done&style=none&taskId=uc64c9134-b17b-45d1-baed-3f9d827cadb&title=&width=941.6",alt:"image.png"}),'\ncurl -k -u "admin',":admin",'" ',(0,i.jsx)(e.a,{href:"https://linux3.skills.lan:5000/v2/_catalog",children:"https://linux3.skills.lan:5000/v2/_catalog"}),"\n",(0,i.jsx)(e.img,{src:"https://cdn.nlark.com/yuque/0/2024/png/33622884/1713358599262-518fcad0-5b30-4875-a332-e09a6bf0f1f8.png#averageHue=%2314110f&clientId=ub7c60c24-82a0-4&from=paste&height=38&id=u3534c8ba&originHeight=47&originWidth=1156&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=7893&status=done&style=none&taskId=u1fbd229d-cbe4-48d8-9c76-0c8811ef7ce&title=&width=924.8",alt:"image.png"})]})]})}function p(n={}){const{wrapper:e}={...(0,a.R)(),...n.components};return e?(0,i.jsx)(e,{...n,children:(0,i.jsx)(c,{...n})}):c(n)}},8453:(n,e,t)=>{t.d(e,{R:()=>r,x:()=>d});var i=t(6540);const a={},s=i.createContext(a);function r(n){const e=i.useContext(s);return i.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function d(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(a):n.components||a:r(n.components),i.createElement(s.Provider,{value:e},n.children)}}}]);