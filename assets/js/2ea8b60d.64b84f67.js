"use strict";(self.webpackChunkser=self.webpackChunkser||[]).push([[8491],{579:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>p,frontMatter:()=>a,metadata:()=>d,toc:()=>r});var t=i(4848),s=i(8453);const a={sidebar_position:2},l=void 0,d={id:"\u4e8c\u3001\u670d\u52a1\u5668\u6a21\u5757/\u56db\u3001Linux\u4e91\u670d\u52a1\u914d\u7f6e/2\u3001dns\u670d\u52a1 \u221a",title:"2\u3001dns\u670d\u52a1 \u221a",description:"\u9898\u76ee\uff1a",source:"@site/docs/\u4e8c\u3001\u670d\u52a1\u5668\u6a21\u5757/\u56db\u3001Linux\u4e91\u670d\u52a1\u914d\u7f6e/2\u3001dns\u670d\u52a1 \u221a.md",sourceDirName:"\u4e8c\u3001\u670d\u52a1\u5668\u6a21\u5757/\u56db\u3001Linux\u4e91\u670d\u52a1\u914d\u7f6e",slug:"/\u4e8c\u3001\u670d\u52a1\u5668\u6a21\u5757/\u56db\u3001Linux\u4e91\u670d\u52a1\u914d\u7f6e/2\u3001dns\u670d\u52a1 \u221a",permalink:"/docs/\u4e8c\u3001\u670d\u52a1\u5668\u6a21\u5757/\u56db\u3001Linux\u4e91\u670d\u52a1\u914d\u7f6e/2\u3001dns\u670d\u52a1 \u221a",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"1\u3001\u7cfb\u7edf\u5b89\u88c5 \u221a",permalink:"/docs/\u4e8c\u3001\u670d\u52a1\u5668\u6a21\u5757/\u56db\u3001Linux\u4e91\u670d\u52a1\u914d\u7f6e/1\u3001\u7cfb\u7edf\u5b89\u88c5 \u221a"},next:{title:"3\u3001ansible\u670d\u52a1 \u221a",permalink:"/docs/\u4e8c\u3001\u670d\u52a1\u5668\u6a21\u5757/\u56db\u3001Linux\u4e91\u670d\u52a1\u914d\u7f6e/3\u3001ansible\u670d\u52a1 \u221a"}},c={},r=[{value:"<strong>\u9898\u76ee\uff1a</strong>",id:"\u9898\u76ee",level:2},{value:"\u914d\u7f6e\u6b65\u9aa4\uff1a",id:"\u914d\u7f6e\u6b65\u9aa4",level:2},{value:"1\u5c0f\u9898",id:"1\u5c0f\u9898",level:3},{value:"2\u5c0f\u9898",id:"2\u5c0f\u9898",level:3},{value:"3\u5c0f\u9898",id:"3\u5c0f\u9898",level:3},{value:"4\u5c0f\u9898",id:"4\u5c0f\u9898",level:3},{value:"5\u5c0f\u9898",id:"5\u5c0f\u9898",level:3},{value:"Linux1\u6267\u884c",id:"linux1\u6267\u884c",level:4},{value:"Linux2\u6267\u884c",id:"linux2\u6267\u884c",level:4},{value:"\u7ed3\u8bba",id:"\u7ed3\u8bba",level:4},{value:"6\u5c0f\u9898",id:"6\u5c0f\u9898",level:3},{value:"\u65b9\u6848\u4e00",id:"\u65b9\u6848\u4e00",level:4},{value:"\u6b65\u9aa4\u4e00\u3001\u6839CA\u8bc1\u4e66\u914d\u7f6e",id:"\u6b65\u9aa4\u4e00\u6839ca\u8bc1\u4e66\u914d\u7f6e",level:5},{value:"\u9636\u6bb5\u4e8c\u3001SSL\u8bc1\u4e66\u914d\u7f6e",id:"\u9636\u6bb5\u4e8cssl\u8bc1\u4e66\u914d\u7f6e",level:5},{value:"\u9636\u6bb5\u4e09\u3001CA\u8bc1\u4e66\u8f6c\u6362",id:"\u9636\u6bb5\u4e09ca\u8bc1\u4e66\u8f6c\u6362",level:5},{value:"\u9636\u6bb5\u56db\u3001\u914d\u7f6e\u4fe1\u4efb",id:"\u9636\u6bb5\u56db\u914d\u7f6e\u4fe1\u4efb",level:5},{value:"\u65b9\u6848\u4e8c",id:"\u65b9\u6848\u4e8c",level:4},{value:"\u6b65\u9aa4\u4e00\u3001\u6839CA\u8bc1\u4e66\u914d\u7f6e",id:"\u6b65\u9aa4\u4e00\u6839ca\u8bc1\u4e66\u914d\u7f6e-1",level:5},{value:"\u9636\u6bb5\u4e8c\u3001SSL\u8bc1\u4e66\u914d\u7f6e",id:"\u9636\u6bb5\u4e8cssl\u8bc1\u4e66\u914d\u7f6e-1",level:5},{value:"<strong>\u9636\u6bb5\u4e09\u3001\u914d\u7f6e\u4fe1\u4efb</strong>",id:"\u9636\u6bb5\u4e09\u914d\u7f6e\u4fe1\u4efb",level:5}];function o(e){const n={code:"code",h2:"h2",h3:"h3",h4:"h4",h5:"h5",img:"img",p:"p",pre:"pre",strong:"strong",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h2,{id:"\u9898\u76ee",children:(0,t.jsx)(n.strong,{children:"\u9898\u76ee\uff1a"})}),"\n",(0,t.jsx)(n.p,{children:"\u521b\u5efa DNS \u670d\u52a1\u5668\uff0c\u5b9e\u73b0\u4f01\u4e1a\u57df\u540d\u8bbf\u95ee\u3002\n1\u3001\u914d\u7f6e linux \u4e3b\u673a\u7684 IP \u5730\u5740\u548c\u4e3b\u673a\u540d\u79f0\u3002\n2\u3001\u6240\u6709 linux \u4e3b\u673a\u542f\u7528\u9632\u706b\u5899\uff08kubernetes \u670d\u52a1\u4e3b\u673a\u9664\u5916\uff09\uff0c\u9632\u706b\u5899\u533a\u57df\u4e3a public\uff0c\u5728\u9632\u706b\u5899\u4e2d\u653e\u884c\u5bf9\u5e94\u670d\u52a1\u7aef\u53e3\u3002\n3\u3001\u6240\u6709 linux \u4e3b\u673a\u4e4b\u95f4\uff08\u5305\u542b\u672c\u4e3b\u673a\uff09root \u7528\u6237\u5b9e\u73b0\u5bc6\u94a5 ssh \u8ba4\u8bc1\uff0c\u7981\u7528\u5bc6\u7801\u8ba4\u8bc1\u3002\n4\u3001\u5229\u7528 chrony\uff0c\u914d\u7f6e linux1 \u4e3a\u5176\u4ed6 linux \u4e3b\u673a\u63d0\u4f9b NTP \u670d\u52a1\u3002\n5\u3001\u5229\u7528 bind\uff0c\u914d\u7f6e linux1 \u4e3a\u4e3b DNS \u670d\u52a1\u5668\uff0clinux2 \u4e3a\u5907\u7528 DNS \u670d\u52a1\u5668\uff0c\u4e3a\u6240\u6709 linux \u4e3b\u673a\u63d0\u4f9b\u5197\u4f59 DNS \u6b63\u53cd\u5411\u89e3\u6790\u670d\u52a1\u3002\u6b63\u5411\u533a\u57df\u6587\u4ef6\u5747/var/named/named.skills \uff0c \u53cd \u5411 \u533a \u57df \u6587 \u4ef6 \u5747 \u4e3a /var/named/named.10\u3002\n6\u3001\u914d\u7f6e linux1 \u4e3a CA \u670d\u52a1\u5668,\u4e3a linux \u4e3b\u673a\u9881\u53d1\u8bc1\u4e66\u3002\u8bc1\u4e66\u9881\u53d1\u673a\u6784\u6709\u6548\u671f 10 \u5e74\uff0c\u516c\u7528\u540d\u4e3a linux1.skills.lan\u3002\u7533\u8bf7\u5e76\u9881\u53d1\u4e00\u5f20\u4f9b linux \u670d\u52a1\u5668\u4f7f\u7528\u7684\u8bc1\u4e66\uff0c\u8bc1\u4e66\u4fe1\u606f\uff1a\u6709\u6548\u671f=5 \u5e74\uff0c\u516c\u7528\u540d=skills.lan\uff0c\u56fd\u5bb6=CN\uff0c\u7701=Beijing\uff0c\u57ce\u5e02=Beijing\uff0c\u7ec4\u7ec7=skills\uff0c\u7ec4\u7ec7\u5355\u4f4d=system\uff0c \u4f7f\u7528\u8005\u53ef\u9009\u540d\u79f0=*.skills.lan \u548c skills.lan\u3002\u5c06\u8bc1\u4e66skills.crt \u548c\u79c1\u94a5 skills.key \u590d\u5236\u5230\u9700\u8981\u8bc1\u4e66\u7684 linux \u670d\u52a1\u5668/etc/pki/tls \u76ee \u5f55\u3002\u6d4f\u89c8\u5668\u8bbf\u95ee https \u7f51\u7ad9\u65f6\uff0c\u4e0d\u51fa\u73b0\u8bc1\u4e66\u8b66\u544a\u4fe1\u606f\u3002"}),"\n",(0,t.jsx)(n.h2,{id:"\u914d\u7f6e\u6b65\u9aa4",children:"\u914d\u7f6e\u6b65\u9aa4\uff1a"}),"\n",(0,t.jsx)(n.h3,{id:"1\u5c0f\u9898",children:"1\u5c0f\u9898"}),"\n",(0,t.jsx)(n.p,{children:"\u4fee\u6539IP\u5730\u5740vi /etc/NetworkManager/system-connections/ens160.nmconnection #\u4f7f\u7528vi\u7f16\u8f91\u5668\u4fee\u6539\u7f51\u5361\u914d\u7f6e\u6587\u4ef6"}),"\n",(0,t.jsx)(n.p,{children:"[ipv4]\nmethod=manual  \t\t\t\t      #\u53d6\u6d88\u81ea\u52a8\u83b7\u53d6\uff0c\u6539\u4e3amanual\uff0cmanual\u4e3a\u624b\u52a8\u7684\u610f\u601d\naddress1=10.4.220.100/24,10.4.220.1  #\u914d\u7f6eIP\u5730\u5740\u548c\u7f51\u5173\ndns=10.4.220.101;10.4.220.102  \t      #dns\u914d\u7f6e\nnmcli connection reload  ens160 \u52a0\u8f7d\u914d\u7f6e\u4fe1\u606f\nnmcli connection up ens160 \u6fc0\u6d3b\u914d\u7f6e\n\u4fee\u6539\u4e3b\u673a\u540dnmcli g hostname linux1"}),"\n",(0,t.jsx)(n.h3,{id:"2\u5c0f\u9898",children:"2\u5c0f\u9898"}),"\n",(0,t.jsx)(n.p,{children:"\u653e\u884c\u7aef\u53e3firewall-cmd --zone=public --add-port=22/tcp --add-port=53/tcp --add-port=53/udp --add-port=123/udp --add-port=80/tcp --add-port=443/tcp --add-port=21/tcp --add-port=8080/tcp --add-port=2049/tcp --add-port=111/tcp --add-port=111/udp --add-port=139/tcp --add-port=445/tcp --add-port=860/tcp --add-port=3260/tcp --add-port=3306/tcp --add-port=8000/tcp --permanent"}),"\n",(0,t.jsx)(n.p,{children:"firewall-cmd --reload   #\u91cd\u542f\u9632\u706b\u5899\nfirewall-cmd --list-all #\u67e5\u770b\u653e\u884c\u60c5\u51b5\n\u670d\u52a1\u7aef\u53e3\u8bf4\u660edns\uff1a53/tcp 53/udp\nchrony\u7aef\u53e3\uff1a123/UDP\nansible\uff1a22/tcp\nApache2\u670d\u52a1\uff1a80/TCP 443\nftp\u7aef\u53e3\uff1a21/TCP  VSFTP\ntomcat\u7aef\u53e3\uff1a80/TCP 443/TCP 8080/TCP\nnfs\u7aef\u53e3\uff1a2049/TCP 111/TCP  111/UDP\nsmaba\u7aef\u53e3\uff1a139/TCP 445/TCP\niscsi\u7aef\u53e3\uff1a860/TCP 3260/tcp\nmariadb\uff1a3306/tcp\npodman\uff1a8000/udp"}),"\n",(0,t.jsx)(n.h3,{id:"3\u5c0f\u9898",children:"3\u5c0f\u9898"}),"\n",(0,t.jsx)(n.h3,{id:"4\u5c0f\u9898",children:"4\u5c0f\u9898"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:"https://cdn.nlark.com/yuque/0/2024/png/33622884/1713862969706-54673393-ec0f-4649-83a9-91d8e09aaa6b.png#averageHue=%23340f29&clientId=u1ccbc5f7-73d6-4&from=paste&height=88&id=u4da884be&originHeight=99&originWidth=971&originalType=binary&ratio=1.125&rotation=0&showTitle=false&size=41662&status=done&style=none&taskId=u570d0db3-dce8-4777-ae42-20050dfe32a&title=&width=863.1111111111111",alt:"image.png"})}),"\n",(0,t.jsx)(n.h3,{id:"5\u5c0f\u9898",children:"5\u5c0f\u9898"}),"\n",(0,t.jsx)(n.h4,{id:"linux1\u6267\u884c",children:"Linux1\u6267\u884c"}),"\n",(0,t.jsxs)(n.p,{children:["yum install bind bind-utils   #\u5b89\u88c5dns\u670d\u52a1\nvi /etc/named.conf \t#\u7f16\u8f91\u4e3b\u914d\u7f6e\u6587\u4ef6\n",(0,t.jsx)(n.img,{src:"https://cdn.nlark.com/yuque/0/2023/png/33622884/1694768644277-b8dc003e-926e-44c2-9a4d-e61ea7537dcd.png#averageHue=%23300a25&clientId=u6d4a5990-51b7-4&from=paste&height=224&id=uadcf115d&originHeight=308&originWidth=987&originalType=binary&ratio=1.375&rotation=0&showTitle=false&size=57795&status=done&style=none&taskId=ud42b02b5-b7c3-4754-9731-74931c9771e&title=&width=717.8181818181819",alt:"image.png"}),"\nvi /etc/named.rfc1912.zones #\u7f16\u8f91\u533a\u57df\u6587\u4ef6\n",(0,t.jsx)(n.img,{src:"https://cdn.nlark.com/yuque/0/2023/png/33622884/1694768554468-adcb66c4-a60f-40e3-a246-ff5278c96a6e.png#averageHue=%23300a24&clientId=u6d4a5990-51b7-4&from=paste&height=237&id=u9d22180f&originHeight=326&originWidth=518&originalType=binary&ratio=1.375&rotation=0&showTitle=false&size=35361&status=done&style=none&taskId=u3b86f3d1-5f26-4d2a-abf9-d7bb6e49808&title=&width=376.72727272727275",alt:"image.png"}),"\ncd /var/named/  #\u5207\u6362\u5230\u914d\u7f6e\u6587\u4ef6\u76ee\u5f55\ncp -p named.localhost named.skills #\u590d\u5236\u6b63\u5411\u533a\u57df\u6a21\u677f\u6587\u4ef6\u5230\u65b0\u6587\u4ef6\ncp -p named.loopback named.10\t#\u590d\u5236\u53cd\u5411\u533a\u57df\u6a21\u677f\u5230\u65b0\u6587\u4ef6\nvi named.skills #\u7f16\u8f91\u65b0\u7684\u6b63\u5411\u533a\u57df\u6587\u4ef6\n",(0,t.jsx)(n.img,{src:"https://cdn.nlark.com/yuque/0/2023/png/33622884/1694768770130-49c9b868-563c-4359-8b30-50c5619d2ed4.png#averageHue=%23300a24&clientId=u6d4a5990-51b7-4&from=paste&height=316&id=ue50060bc&originHeight=434&originWidth=838&originalType=binary&ratio=1.375&rotation=0&showTitle=false&size=48717&status=done&style=none&taskId=u5d9bd0fa-b94a-4eae-aa66-bcbfa92eb3b&title=&width=609.4545454545455",alt:"image.png"}),"\nvi named.10 \u7f16\u8f91\u65b0\u7684\u53cd\u5411\u533a\u57df\u6587\u4ef6\n",(0,t.jsx)(n.img,{src:"https://cdn.nlark.com/yuque/0/2023/png/33622884/1694768796922-f3abc66a-3d3a-4419-a77b-59ff5ded0cdc.png#averageHue=%23300a24&clientId=u6d4a5990-51b7-4&from=paste&height=337&id=u82999d7e&originHeight=464&originWidth=812&originalType=binary&ratio=1.375&rotation=0&showTitle=false&size=55393&status=done&style=none&taskId=ub7a8e171-37db-4958-8774-a2d85d773da&title=&width=590.5454545454545",alt:"image.png"}),"\nsystemc\trestart named  #\u91cd\u542fdns\u670d\u52a1\n\u6d4b\u8bd5\u6b63\u5411\u89e3\u6790",(0,t.jsx)(n.img,{src:"https://cdn.nlark.com/yuque/0/2023/png/33622884/1694768911842-b24cfb9c-a0d2-49d0-8dd2-45daddc87dbb.png#averageHue=%23300a25&clientId=u6d4a5990-51b7-4&from=paste&height=239&id=LuMEG&originHeight=329&originWidth=1128&originalType=binary&ratio=1.375&rotation=0&showTitle=false&size=63040&status=done&style=none&taskId=ue1bc3287-d8eb-49e9-801d-54868c02c74&title=&width=820.3636363636364",alt:"image.png"}),"\n\u6d4b\u8bd5\u53cd\u5411\u89e3\u6790",(0,t.jsx)(n.img,{src:"https://cdn.nlark.com/yuque/0/2023/png/33622884/1694769008189-797f400c-6572-477d-b700-d87490c844ac.png#averageHue=%23300a24&clientId=u6d4a5990-51b7-4&from=paste&height=608&id=u775a0d5e&originHeight=836&originWidth=1310&originalType=binary&ratio=1.375&rotation=0&showTitle=false&size=112998&status=done&style=none&taskId=u301fa0ef-d101-4896-99da-3257e25e9af&title=&width=952.7272727272727",alt:"image.png"})]}),"\n",(0,t.jsx)(n.h4,{id:"linux2\u6267\u884c",children:"Linux2\u6267\u884c"}),"\n",(0,t.jsxs)(n.p,{children:["yum install bind bind-utils   #\u5b89\u88c5dns\u670d\u52a1\nvi /etc/named.conf \t#\u7f16\u8f91\u4e3b\u914d\u7f6e\u6587\u4ef6\n",(0,t.jsx)(n.img,{src:"https://cdn.nlark.com/yuque/0/2023/png/33622884/1694769352579-49051a10-e119-4c52-a038-f4aacb240a43.png#averageHue=%23300a25&clientId=u6d4a5990-51b7-4&from=paste&height=215&id=ud16ac350&originHeight=296&originWidth=1178&originalType=binary&ratio=1.375&rotation=0&showTitle=false&size=58245&status=done&style=none&taskId=ue5c8f0c4-82a1-4ef8-b1af-485b1402233&title=&width=856.7272727272727",alt:"image.png"}),"\nvi /etc/named.rfc1912.zones #\u7f16\u8f91\u533a\u57df\u6587\u4ef6\n",(0,t.jsx)(n.img,{src:"https://cdn.nlark.com/yuque/0/2024/png/33622884/1713330978138-9ba7ddeb-2647-4063-8ce8-b47e244467ce.png#averageHue=%230a0806&clientId=uac37162c-3352-4&from=paste&height=272&id=u1c569668&originHeight=306&originWidth=761&originalType=binary&ratio=1.125&rotation=0&showTitle=false&size=19694&status=done&style=none&taskId=uaedbe2be-6f9b-4f47-85b8-33f649aa6e8&title=&width=676.4444444444445",alt:"image.png"}),"systemctl restart named  #\u91cd\u542fdns\u670d\u52a1\nsystemctl stop named #\u5173\u95edlinux1\u7684dns\u670d\u52a1\n\u6d4b\u8bd5\u8f85\u52a9dns\u670d\u52a1\u5668\u7684dns\u89e3\u6790\n\u6b63\u5411\u6d4b\u8bd5\n",(0,t.jsx)(n.img,{src:"https://cdn.nlark.com/yuque/0/2023/png/33622884/1694769541094-63e1510b-e589-4281-84f8-49709287d0e0.png#averageHue=%23300a24&clientId=u6d4a5990-51b7-4&from=paste&height=273&id=u4984d80f&originHeight=376&originWidth=1304&originalType=binary&ratio=1.375&rotation=0&showTitle=false&size=64286&status=done&style=none&taskId=u34fb00d9-08ed-4e39-8e16-2d0d747f25e&title=&width=948.3636363636364",alt:"image.png"}),"\n\u53cd\u5411\u6d4b\u8bd5\n",(0,t.jsx)(n.img,{src:"https://cdn.nlark.com/yuque/0/2023/png/33622884/1694769584296-9dd16d7c-48bd-464a-bf6f-a7f531a3f5c2.png#averageHue=%23300a24&clientId=u6d4a5990-51b7-4&from=paste&height=572&id=ude4033bc&originHeight=787&originWidth=1299&originalType=binary&ratio=1.375&rotation=0&showTitle=false&size=102697&status=done&style=none&taskId=u27839020-3462-4744-927f-deb756d50a0&title=&width=944.7272727272727",alt:"image.png"})]}),"\n",(0,t.jsx)(n.h4,{id:"\u7ed3\u8bba",children:"\u7ed3\u8bba"}),"\n",(0,t.jsx)(n.p,{children:"\u4e3bdns\u670d\u52a1\u5668\u5173\u95ed\u7684\u60c5\u51b5\u4e0b\uff0c\u5907\u7528dns\u670d\u52a1\u80fd\u6b63\u5e38\u89e3\u6790"}),"\n",(0,t.jsx)(n.h3,{id:"6\u5c0f\u9898",children:"6\u5c0f\u9898"}),"\n",(0,t.jsx)(n.h4,{id:"\u65b9\u6848\u4e00",children:"\u65b9\u6848\u4e00"}),"\n",(0,t.jsx)(n.h5,{id:"\u6b65\u9aa4\u4e00\u6839ca\u8bc1\u4e66\u914d\u7f6e",children:"\u6b65\u9aa4\u4e00\u3001\u6839CA\u8bc1\u4e66\u914d\u7f6e"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"yum install  openssl-perl\ncd /etc/pki/CA/\ntouch serial\necho 00 >> serial\ntouch index.txt\n"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"openssl genrsa -out cacert.key 2048\n"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"openssl req -new -out ca.csr -key cacert.key\n"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"openssl x509 -req -days 3650 -in ca.csr -signkey cacert.key -out cacert.crt\n"})}),"\n",(0,t.jsx)(n.h5,{id:"\u9636\u6bb5\u4e8cssl\u8bc1\u4e66\u914d\u7f6e",children:"\u9636\u6bb5\u4e8c\u3001SSL\u8bc1\u4e66\u914d\u7f6e"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"req_extensions = v3_req  \u53d6\u6d88\u6ce8\u91ca\u8fd9\u4e00\u884c 167\u884c\n# extendedKeyUsage = critical,timeStamping\n[ v3_req ]\nsubjectAltName = @alt_names \u5728v3\u5b57\u6bb5\u4e0b\u6dfb\u52a0\u8fd9\u4e00\u884c\n# Extensions to add to a certificate request\nbasicConstraints = CA:TRUE   \u6539\u4e3aTRUE\nkeyUsage = nonRepudiation, digitalSignature, keyEncipherment\n[alt_names]      \u6dfb\u52a0\u5b57\u6bb5\nDNS.1=skills.com  \u6dfb\u52a0\u884c\nDNS.2=*.skills.com \u6dfb\u52a0\u884c\n"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"openssl genrsa -out skills.key 2048\n"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"openssl req -new -key skills.key -out skills.csr -config /etc/pki/tls/openssl.cnf -extensions v3_req\n"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"openssl ca -in skills.csr -out skills.crt -cert cacert.crt  -keyfile cacert.key -extensions v3_req -days 1825 -config /etc/pki/tls/openssl.cnf\n"})}),"\n",(0,t.jsx)(n.h5,{id:"\u9636\u6bb5\u4e09ca\u8bc1\u4e66\u8f6c\u6362",children:"\u9636\u6bb5\u4e09\u3001CA\u8bc1\u4e66\u8f6c\u6362"}),"\n",(0,t.jsx)(n.p,{children:"openssl pkcs12 -export -out cacert.pfx -inkey cacert.key -in cacert.crt\nopenssl pkcs12 -in cacert.pfx -nodes -out cacert.pem"}),"\n",(0,t.jsx)(n.h5,{id:"\u9636\u6bb5\u56db\u914d\u7f6e\u4fe1\u4efb",children:"\u9636\u6bb5\u56db\u3001\u914d\u7f6e\u4fe1\u4efb"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"for i in {1..9};do scp skills.* cacert.pem 10.4.220.10$i:/etc/pki/tls/ ;done\ncat cacert.pem >> /etc/pki/tls/certs/ca-bundle.crt   #\u6bcf\u4e00\u53f0\u6709\u8bc1\u4e66\u7684\u4e3b\u673a\u6267\u884c\n"})}),"\n",(0,t.jsx)(n.h4,{id:"\u65b9\u6848\u4e8c",children:"\u65b9\u6848\u4e8c"}),"\n",(0,t.jsx)(n.h5,{id:"\u6b65\u9aa4\u4e00\u6839ca\u8bc1\u4e66\u914d\u7f6e-1",children:"\u6b65\u9aa4\u4e00\u3001\u6839CA\u8bc1\u4e66\u914d\u7f6e"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"yum install  openssl-perl -y\ncd /etc/pki/CA/\ntouch serial\necho 00 >> serial\ntouch index.txt\n"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"openssl genrsa -out cakey.pem 2048\ncp cakey.pem /etc/pki/CA/private/\t\t#\u7b7e\u53d1\u5ba2\u6237\u8bc1\u4e66\u9700\u8981\u628aca\u79c1\u94a5\u653e\u5230\u8fd9\u4e2a\u4f4d\u7f6e\n"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"openssl req -new -x509 -key cakey.pem -days 3650 -out cacert.pem\n"})}),"\n",(0,t.jsx)(n.h5,{id:"\u9636\u6bb5\u4e8cssl\u8bc1\u4e66\u914d\u7f6e-1",children:"\u9636\u6bb5\u4e8c\u3001SSL\u8bc1\u4e66\u914d\u7f6e"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"vim file.ext\nsubjectAltName = @alt_names\n[alt_names]\nDNS.1=skills.lan\nDNS.2=*.skills.lan\n"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"openssl genrsa -out skills.key 2048\n"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"openssl req -new -key skills.key -out skills.csr\n"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"openssl ca -in skills.csr -out skills.crt -days 1825 -extfile file.ext\n"})}),"\n",(0,t.jsx)(n.h5,{id:"\u9636\u6bb5\u4e09\u914d\u7f6e\u4fe1\u4efb",children:(0,t.jsx)(n.strong,{children:"\u9636\u6bb5\u4e09\u3001\u914d\u7f6e\u4fe1\u4efb"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"for i in {1..9};do scp skills.* cacert.pem 10.4.220.10$i:/etc/pki/tls/ ;done\ncat cacert.pem >> /etc/pki/tls/certs/ca-bundle.crt   #\u6bcf\u4e00\u53f0\u6709\u8bc1\u4e66\u7684\u4e3b\u673a\u6267\u884c\n\u6269\u5c55key\u548ccrt \u8f6c\u4e3apfx\nopenssl pkcs12 -export -out skills.pfx -inkey skills.key -in skills.crt \n\npfx\u8f6c\u4e3apem\nopenssl pkcs12 -in skills.pfx -nodes -out skills.pem\n\n\u4ecepem\u8bc1\u4e66\u63d0\u53d6crt\u548ckey\nopenssl x509 -in skills.pem -out apache.crt\nopenssl rsa -in skills.pem -out apache.key\n\n\u8f6cjks\nyum install javapackages-tools.noarch -y\nkeytool -importkeystore -srckeystore skills.pfx -destkeystore skills.jks -deststoretype JKS\n"})})]})}function p(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(o,{...e})}):o(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>l,x:()=>d});var t=i(6540);const s={},a=t.createContext(s);function l(e){const n=t.useContext(a);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),t.createElement(a.Provider,{value:n},e.children)}}}]);